###############################################################################
#                                                                             #
# IAR C/C++ Compiler V7.51A/W32 for 8051                29/Nov/2010  15:51:32 #
# Copyright 2004-2009 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  C:\Documents and Settings\Darren\®à­±\ZIGBEE       #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\Source\zcl_samplelight.c                #
#    Command line       =  -f "C:\Documents and Settings\Darren\®à­±\ZIGBEE   #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\Tools\CC2530DB\f8wCoo #
#                          rd.cfg" (-DCPU32MHZ -DROOT=__near_func             #
#                          -DMAC_CFG_APP_PENDING_QUEUE=TRUE                   #
#                          -DZDO_COORDINATOR -DRTR_NWK -DBLINK_LEDS) -f       #
#                          "C:\Documents and Settings\Darren\®à­±\ZIGBEE      #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\Tools\CC2530DB\f8wCon #
#                          fig.cfg" (-DSECURE=0 -DZG_SECURE_DYNAMIC=0         #
#                          -DREFLECTOR -DDEFAULT_CHANLIST=0x00000800          #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116 "-DCONST=const __code"    #
#                          -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=TRUE      #
#                          -DPOLL_RATE=1000 -DQUEUED_POLL_RATE=100            #
#                          -DRESPONSE_POLL_RATE=100 -DREJOIN_POLL_RATE=440)   #
#                          -f "C:\Documents and Settings\Darren\®à­±\ZIGBEE   #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\Tools\CC2530DB\f8wZCL #
#                          .cfg" (-DZCL_READ -DZCL_WRITE -DZCL_BASIC          #
#                          -DZCL_IDENTIFY -DZCL_ON_OFF -DZCL_KEY_ESTABLISH    #
#                          -DZCL_LOAD_CONTROL -DZCL_SIMPLE_METERING           #
#                          -DZCL_PRICING) -DZCL_MESSAGE "C:\Documents and     #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\Source\zcl_samplelight.c" -D            #
#                          Coordinator -D ZTOOL_P1 -D MT_TASK -D MT_APP_FUNC  #
#                          -D MT_SYS_FUNC -D MT_ZDO_FUNC -D                   #
#                          LCD_SUPPORTED=DEBUG -lC "C:\Documents and          #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\CoordinatorEB\List\" -lA       #
#                          "C:\Documents and Settings\Darren\®à­±\ZIGBEE      #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\CoordinatorEB\List\"           #
#                          --diag_suppress Pe001,Pa010 -o "C:\Documents and   #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\CoordinatorEB\Obj\" -e         #
#                          --require_prototypes --debug --core=plain          #
#                          --dptr=16,1 --data_model=large                     #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I "C:\Documents and          #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\" -I "C:\Documents and         #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\SOURCE\" -I "C:\Documents   #
#                          and Settings\Darren\®à­±\ZIGBEE                    #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\SOURCE\" -I              #
#                          "C:\Documents and Settings\Darren\®à­±\ZIGBEE      #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\ZMAIN\TI2530DB\" -I   #
#                          "C:\Documents and Settings\Darren\®à­±\ZIGBEE      #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\MT\" #
#                           -I "C:\Documents and Settings\Darren\®à­±\ZIGBEE  #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\HAL\ #
#                          INCLUDE\" -I "C:\Documents and                     #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\HAL\ #
#                          TARGET\CC2530EB\" -I "C:\Documents and             #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\OSAL #
#                          \MCU\CCSOC\" -I "C:\Documents and                  #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\OSAL #
#                          \INCLUDE\" -I "C:\Documents and                    #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\STAC #
#                          K\AF\" -I "C:\Documents and                        #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\STAC #
#                          K\NWK\" -I "C:\Documents and                       #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\STAC #
#                          K\SEC\" -I "C:\Documents and                       #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\STAC #
#                          K\SAPI\" -I "C:\Documents and                      #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\STAC #
#                          K\SYS\" -I "C:\Documents and                       #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\STAC #
#                          K\ZCL\" -I "C:\Documents and                       #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\STAC #
#                          K\ZDO\" -I "C:\Documents and                       #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\ZMAC #
#                          \F8W\" -I "C:\Documents and                        #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\ZMAC #
#                          \" -I "C:\Documents and Settings\Darren\®à­±\ZIGBE #
#                          E ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                         #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\SERV #
#                          ICES\SADDR\" -I "C:\Documents and                  #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\SERV #
#                          ICES\SDATA\" -I "C:\Documents and                  #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\MAC\ #
#                          INCLUDE\" -I "C:\Documents and                     #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\MAC\ #
#                          HIGH_LEVEL\" -I "C:\Documents and                  #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\MAC\ #
#                          LOW_LEVEL\srf04\" -I "C:\Documents and             #
#                          Settings\Darren\®à­±\ZIGBEE                        #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\..\..\..\..\..\COMPONENTS\MAC\ #
#                          LOW_LEVEL\srf04\SINGLE_CHIP\" -I "C:\IAR           #
#                          Systems\Embedded Workbench for MCS-51              #
#                          V7.51\8051\INC\" -I "C:\IAR Systems\Embedded       #
#                          Workbench for MCS-51 V7.51\8051\INC\CLIB\" -Ohz    #
#    List file          =  C:\Documents and Settings\Darren\®à­±\ZIGBEE       #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\CoordinatorEB\List\zcl_samplel #
#                          ight.lst                                           #
#    Object file        =  C:\Documents and Settings\Darren\®à­±\ZIGBEE       #
#                          ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE                           #
#                          Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-C #
#                          C2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\S #
#                          ampleLight\CC2530DB\CoordinatorEB\Obj\zcl_sampleli #
#                          ght.r51                                            #
#                                                                             #
#                                                                             #
###############################################################################

C:\Documents and Settings\Darren\®à­±\ZIGBEE ±Ð¾Ç¼Ò²Õ_¥X³f¥úºÐ\ZIGBEE Example\CC2530_ZStack\±Ð¾Ç¼Ò²Õ_Z-Stack_Ex\ZStack-CC2530-2.3.0-1.4.0\Projects\zstack\HomeAutomation\SampleLight\Source\zcl_samplelight.c
      1          /**************************************************************************************************
      2            Filename:       zcl_sampleLight.c
      3            Revised:        $Date: 2009-03-18 15:56:27 -0700 (Wed, 18 Mar 2009) $
      4            Revision:       $Revision: 19453 $
      5          
      6          
      7            Description:    Zigbee Cluster Library - sample device application.
      8          
      9          
     10            Copyright 2006-2009 Texas Instruments Incorporated. All rights reserved.
     11          
     12            IMPORTANT: Your use of this Software is limited to those specific rights
     13            granted under the terms of a software license agreement between the user
     14            who downloaded the software, his/her employer (which must be your employer)
     15            and Texas Instruments Incorporated (the "License").  You may not use this
     16            Software unless you agree to abide by the terms of the License. The License
     17            limits your use, and you acknowledge, that the Software may not be modified,
     18            copied or distributed unless embedded on a Texas Instruments microcontroller
     19            or used solely and exclusively in conjunction with a Texas Instruments radio
     20            frequency transceiver, which is integrated into your product.  Other than for
     21            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     22            works of, modify, distribute, perform, display or sell this Software and/or
     23            its documentation for any purpose.
     24          
     25            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     26            PROVIDED “AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED, 
     27            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE, 
     28            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     29            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     30            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     31            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     32            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     33            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     34            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     35            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     36          
     37            Should you have any questions regarding your right to use this Software,
     38            contact Texas Instruments Incorporated at www.TI.com. 
     39          **************************************************************************************************/
     40          
     41          /*********************************************************************
     42            This device will be like a Light device.  This application is not
     43            intended to be a Light device, but will use the device description
     44            to implement this sample code.
     45          *********************************************************************/
     46          
     47          /*********************************************************************
     48           * INCLUDES
     49           */
     50          #include "ZComDef.h"
     51          #include "OSAL.h"
     52          #include "AF.h"
     53          #include "ZDApp.h"
     54          
     55          #include "zcl.h"
     56          #include "zcl_general.h"
     57          #include "zcl_ha.h"
     58          
     59          #include "zcl_samplelight.h"
     60          
     61          #include "onboard.h"
     62          
     63          /* HAL */
     64          #include "hal_lcd.h"
     65          #include "hal_led.h"
     66          #include "hal_key.h"
     67          
     68          /* high-level */
     69          #include "mac_high_level.h"
     70          
     71          /*********************************************************************
     72           * MACROS
     73           */
     74          
     75          /*********************************************************************
     76           * CONSTANTS
     77           */
     78          /*********************************************************************
     79           * TYPEDEFS
     80           */
     81          
     82          /*********************************************************************
     83           * GLOBAL VARIABLES
     84           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     85          byte zclSampleLight_TaskID;
   \                     zclSampleLight_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
     86          
     87          /*********************************************************************
     88           * GLOBAL FUNCTIONS
     89           */
     90          
     91          /*********************************************************************
     92           * LOCAL VARIABLES
     93           */
     94          //static afAddrType_t zclSampleLight_DstAddr;
     95          
     96          #define ZCLSAMPLELIGHT_BINDINGLIST       2

   \                                 In  segment XDATA_I, align 1, keep-with-next
     97          static cId_t bindingInClusters[ZCLSAMPLELIGHT_BINDINGLIST] =
   \                     bindingInClusters:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for bindingInClusters>`
   \   000004                REQUIRE __INIT_XDATA_I
     98          {
     99            ZCL_CLUSTER_ID_GEN_ON_OFF,
    100            ZCL_CLUSTER_ID_GEN_LEVEL_CONTROL
    101          };
    102          
    103          // Test Endpoint to allow SYS_APP_MSGs

   \                                 In  segment XDATA_I, align 1, keep-with-next
    104          static endPointDesc_t sampleLight_TestEp =
   \                     sampleLight_TestEp:
   \   000000                DS 6
   \   000006                REQUIRE `?<Initializer for sampleLight_TestEp>`
   \   000006                REQUIRE __INIT_XDATA_I
    105          {
    106            20,                                 // Test endpoint
    107            &zclSampleLight_TaskID,
    108            (SimpleDescriptionFormat_t *)NULL,  // No Simple description for this test endpoint
    109            (afNetworkLatencyReq_t)0            // No Network Latency req
    110          };
    111          
    112          /*********************************************************************
    113           * LOCAL FUNCTIONS
    114           */
    115          static void zclSampleLight_HandleKeys( byte shift, byte keys );
    116          static void zclSampleLight_BasicResetCB( void );
    117          static void zclSampleLight_IdentifyCB( zclIdentify_t *pCmd );
    118          static void zclSampleLight_IdentifyQueryRspCB( zclIdentifyQueryRsp_t *pRsp );
    119          static void zclSampleLight_OnOffCB( uint8 cmd );
    120          static void zclSampleLight_ProcessIdentifyTimeChange( void );
    121          
    122          // Functions to process ZCL Foundation incoming Command/Response messages 
    123          static void zclSampleLight_ProcessIncomingMsg( zclIncomingMsg_t *msg );
    124          #ifdef ZCL_READ
    125          static uint8 zclSampleLight_ProcessInReadRspCmd( zclIncomingMsg_t *pInMsg );
    126          #endif
    127          #ifdef ZCL_WRITE
    128          static uint8 zclSampleLight_ProcessInWriteRspCmd( zclIncomingMsg_t *pInMsg );
    129          #endif
    130          static uint8 zclSampleLight_ProcessInDefaultRspCmd( zclIncomingMsg_t *pInMsg );
    131          #ifdef ZCL_DISCOVER
    132          static uint8 zclSampleLight_ProcessInDiscRspCmd( zclIncomingMsg_t *pInMsg );
    133          #endif
    134          
    135          /*********************************************************************
    136           * ZCL General Profile Callback table
    137           */

   \                                 In  segment XDATA_I, align 1, keep-with-next
    138          static zclGeneral_AppCallbacks_t zclSampleLight_CmdCallbacks =
   \                     zclSampleLight_CmdCallbacks:
   \   000000                DS 30
   \   00001E                REQUIRE `?<Initializer for zclSampleLight_CmdCallbacks>`
   \   00001E                REQUIRE __INIT_XDATA_I
    139          {
    140            zclSampleLight_BasicResetCB,              // Basic Cluster Reset command
    141            zclSampleLight_IdentifyCB,                // Identify command  
    142            zclSampleLight_IdentifyQueryRspCB,        // Identify Query Response command
    143            zclSampleLight_OnOffCB,                   // On/Off cluster command
    144            NULL,                                     // Level Control Move to Level command
    145            NULL,                                     // Level Control Move command
    146            NULL,                                     // Level Control Step command
    147            NULL,                                     // Group Response commands
    148            NULL,                                     // Scene Store Request command
    149            NULL,                                     // Scene Recall Request command
    150            NULL,                                     // Scene Response command
    151            NULL,                                     // Alarm (Response) command
    152            NULL,                                     // RSSI Location commands
    153            NULL,                                     // RSSI Location Response commands
    154          };
    155          
    156          /*********************************************************************
    157           * @fn          zclSampleLight_Init
    158           *
    159           * @brief       Initialization function for the zclGeneral layer.
    160           *
    161           * @param       none
    162           *
    163           * @return      none
    164           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    165          void zclSampleLight_Init( byte task_id )
   \                     zclSampleLight_Init:
    166          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    167            zclSampleLight_TaskID = task_id;
   \   000004   E9           MOV     A,R1
   \   000005   90....       MOV     DPTR,#zclSampleLight_TaskID
   \   000008   F0           MOVX    @DPTR,A
    168          
    169            // Set destination address to indirect
    170            //zclSampleLight_DstAddr.addrMode = (afAddrMode_t)AddrNotPresent;
    171            //zclSampleLight_DstAddr.endPoint = 0;
    172            //zclSampleLight_DstAddr.addr.shortAddr = 0;
    173          
    174            // This app is part of the Home Automation Profile
    175            zclHA_Init( &zclSampleLight_SimpleDesc ); //µù¥UÂ²³æªº´y­z
   \   000009                ; Setup parameters for call to function zclHA_Init
   \   000009   7A..         MOV     R2,#(zclSampleLight_SimpleDesc & 0xff)
   \   00000B   7B..         MOV     R3,#((zclSampleLight_SimpleDesc >> 8) & 0xff)
   \   00000D   12....       LCALL   ??zclHA_Init?relay
    176          
    177            // Register the ZCL General Cluster Library callback functions
    178            zclGeneral_RegisterCmdCallbacks( SAMPLELIGHT_ENDPOINT, &zclSampleLight_CmdCallbacks );
   \   000010                ; Setup parameters for call to function zclGeneral_RegisterCmdCallbacks
   \   000010   7A..         MOV     R2,#(zclSampleLight_CmdCallbacks & 0xff)
   \   000012   7B..         MOV     R3,#((zclSampleLight_CmdCallbacks >> 8) & 0xff)
   \   000014   790D         MOV     R1,#0xd
   \   000016   12....       LCALL   ??zclGeneral_RegisterCmdCallbacks?relay
    179          
    180            // Register the application's attribute list
    181            zcl_registerAttrList( SAMPLELIGHT_ENDPOINT, SAMPLELIGHT_MAX_ATTRIBUTES, zclSampleLight_Attrs );
   \   000019                ; Setup parameters for call to function zcl_registerAttrList
   \   000019   7C..         MOV     R4,#(zclSampleLight_Attrs & 0xff)
   \   00001B   7D..         MOV     R5,#((zclSampleLight_Attrs >> 8) & 0xff)
   \   00001D   7A0C         MOV     R2,#0xc
   \   00001F   790D         MOV     R1,#0xd
   \   000021   12....       LCALL   ??zcl_registerAttrList?relay
    182          
    183            // Register the Application to receive the unprocessed Foundation command/response messages
    184            zcl_registerForMsg( zclSampleLight_TaskID );
   \   000024                ; Setup parameters for call to function zcl_registerForMsg
   \   000024   90....       MOV     DPTR,#zclSampleLight_TaskID
   \   000027   E0           MOVX    A,@DPTR
   \   000028   F9           MOV     R1,A
   \   000029   12....       LCALL   ??zcl_registerForMsg?relay
    185            
    186            // Register for all key events - This app will handle all key events
    187            RegisterForKeys( zclSampleLight_TaskID );
   \   00002C                ; Setup parameters for call to function RegisterForKeys
   \   00002C   90....       MOV     DPTR,#zclSampleLight_TaskID
   \   00002F   E0           MOVX    A,@DPTR
   \   000030   F9           MOV     R1,A
   \   000031   12....       LCALL   ??RegisterForKeys?relay
    188          
    189            // Register for a test endpoint
    190            afRegister( &sampleLight_TestEp );
   \   000034                ; Setup parameters for call to function afRegister
   \   000034   7A..         MOV     R2,#(sampleLight_TestEp & 0xff)
   \   000036   7B..         MOV     R3,#((sampleLight_TestEp >> 8) & 0xff)
   \   000038   12....       LCALL   ??afRegister?relay
    191          }
   \   00003B                REQUIRE ?Subroutine1
   \   00003B                ; // Fall through to label ?Subroutine1

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   D083         POP     DPH
   \   000002   D082         POP     DPL
   \   000004   02....       LJMP    ?BRET
    192          
    193          /*********************************************************************
    194           * @fn          zclSample_event_loop
    195           *
    196           * @brief       Event Loop Processor for zclGeneral.
    197           *
    198           * @param       none
    199           *
    200           * @return      none
    201           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    202          uint16 zclSampleLight_event_loop( uint8 task_id, uint16 events )
   \                     zclSampleLight_event_loop:
    203          { 
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 9
   \   000005   74F7         MOV     A,#-0x9
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 2,R2
   \   00000C   8B..         MOV     ?V0 + 3,R3
    204            afIncomingMSGPacket_t *MSGpkt;
    205            (void)task_id;  // Intentionally unreferenced parameter
    206            
    207            if ( events & SYS_EVENT_MSG )
   \   00000E   7480         MOV     A,#-0x80
   \   000010   55..         ANL     A,?V0 + 3
   \   000012   F9           MOV     R1,A
   \   000013   E4           CLR     A
   \   000014   7001         JNZ     ??zclSampleLight_event_loop_0
   \   000016   E9           MOV     A,R1
   \                     ??zclSampleLight_event_loop_0:
   \   000017   6003         JZ      $+5
   \   000019   02....       LJMP    ??zclSampleLight_event_loop_1 & 0xFFFF
    208            {
    209              while ( (MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( zclSampleLight_TaskID )) )
    210              { 
    211                switch ( MSGpkt->hdr.event )
    212                {
    213                case ZCL_INCOMING_MSG:   //0x34 : Incoming ZCL foundation message
    214                    // Incoming ZCL Foundation command/response messages
    215                    zclSampleLight_ProcessIncomingMsg( (zclIncomingMsg_t *)MSGpkt );
    216                    break;
    217                    
    218                case KEY_CHANGE:        //0xC0 : Key Events
    219                    zclSampleLight_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
    220                    break;
    221          
    222                  default:
    223                    break;
    224                }
    225          
    226                // Release the memory
    227                osal_msg_deallocate( (uint8 *)MSGpkt );
    228              }
    229              
    230              // return unprocessed events
    231              return (events ^ SYS_EVENT_MSG);
    232            }
    233          
    234            if ( events & SAMPLELIGHT_IDENTIFY_TIMEOUT_EVT )
   \   00001C   EA           MOV     A,R2
   \   00001D   A2E0         MOV     C,0xE0 /* A   */.0
   \   00001F   4003         JC      $+5
   \   000021   02....       LJMP    ??zclSampleLight_event_loop_2 & 0xFFFF
    235            {
    236              if ( zclSampleLight_IdentifyTime > 0 )
   \   000024   90....       MOV     DPTR,#zclSampleLight_IdentifyTime
   \   000027   E0           MOVX    A,@DPTR
   \   000028   7002         JNZ     ??zclSampleLight_event_loop_3
   \   00002A   A3           INC     DPTR
   \   00002B   E0           MOVX    A,@DPTR
   \                     ??zclSampleLight_event_loop_3:
   \   00002C   600C         JZ      ??zclSampleLight_event_loop_4
    237                zclSampleLight_IdentifyTime--;
   \   00002E   90....       MOV     DPTR,#zclSampleLight_IdentifyTime
   \   000031   E0           MOVX    A,@DPTR
   \   000032   24FF         ADD     A,#-0x1
   \   000034   F0           MOVX    @DPTR,A
   \   000035   A3           INC     DPTR
   \   000036   E0           MOVX    A,@DPTR
   \   000037   34FF         ADDC    A,#-0x1
   \   000039   F0           MOVX    @DPTR,A
    238              zclSampleLight_ProcessIdentifyTimeChange();
   \                     ??zclSampleLight_event_loop_4:
   \   00003A                ; Setup parameters for call to function zclSampleLight_ProcessIdentifyTimeChange
   \   00003A   12....       LCALL   ??zclSampleLight_ProcessIdentifyTimeChange?rela
    239          
    240              return ( events ^ SAMPLELIGHT_IDENTIFY_TIMEOUT_EVT );
   \   00003D   7401         MOV     A,#0x1
   \   00003F   65..         XRL     A,?V0 + 2
   \   000041   FA           MOV     R2,A
   \   000042   AB..         MOV     R3,?V0 + 3
   \   000044   02....       LJMP    ??zclSampleLight_event_loop_5 & 0xFFFF
    241            }
   \                     ??zclSampleLight_event_loop_6:
   \   000047   8A82         MOV     DPL,R2
   \   000049   8B83         MOV     DPH,R3
   \   00004B   A3           INC     DPTR
   \   00004C   A3           INC     DPTR
   \   00004D   A3           INC     DPTR
   \   00004E   E0           MOVX    A,@DPTR
   \   00004F   A2E1         MOV     C,0xE0 /* A   */.1
   \   000051   5062         JNC     ??zclSampleLight_event_loop_7
   \   000053   7408         MOV     A,#0x8
   \   000055   12....       LCALL   ?XSTACK_DISP0_8
   \   000058   7402         MOV     A,#0x2
   \   00005A   F0           MOVX    @DPTR,A
   \   00005B   85..82       MOV     DPL,?XSP + 0
   \   00005E   85..83       MOV     DPH,?XSP + 1
   \   000061   E4           CLR     A
   \   000062   F0           MOVX    @DPTR,A
   \   000063   A3           INC     DPTR
   \   000064   F0           MOVX    @DPTR,A
   \   000065                ; Setup parameters for call to function ZDP_EndDeviceBindReq
   \   000065   75..01       MOV     ?V0 + 4,#0x1
   \   000068   78..         MOV     R0,#?V0 + 4
   \   00006A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00006D   75..00       MOV     ?V0 + 4,#0x0
   \   000070   75..00       MOV     ?V0 + 5,#0x0
   \   000073   78..         MOV     R0,#?V0 + 4
   \   000075   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000078   78..         MOV     R0,#?V0 + 4
   \   00007A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00007D   75....       MOV     ?V0 + 4,#(bindingInClusters & 0xff)
   \   000080   75....       MOV     ?V0 + 5,#((bindingInClusters >> 8) & 0xff)
   \   000083   78..         MOV     R0,#?V0 + 4
   \   000085   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000088   75..02       MOV     ?V0 + 4,#0x2
   \   00008B   78..         MOV     R0,#?V0 + 4
   \   00008D   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000090   75..04       MOV     ?V0 + 4,#0x4
   \   000093   75..01       MOV     ?V0 + 5,#0x1
   \   000096   78..         MOV     R0,#?V0 + 4
   \   000098   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00009B                ; Setup parameters for call to function NLME_GetShortAddr
   \   00009B   12....       LCALL   ??NLME_GetShortAddr?relay
   \   00009E   EA           MOV     A,R2
   \   00009F   FC           MOV     R4,A
   \   0000A0   EB           MOV     A,R3
   \   0000A1   FD           MOV     R5,A
   \   0000A2   790D         MOV     R1,#0xd
   \   0000A4   7409         MOV     A,#0x9
   \   0000A6   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A9   AA82         MOV     R2,DPL
   \   0000AB   AB83         MOV     R3,DPH
   \   0000AD   12....       LCALL   ??ZDP_EndDeviceBindReq?relay
   \   0000B0   7409         MOV     A,#0x9
   \   0000B2   12....       LCALL   ?DEALLOC_XSTACK8
   \                     ??zclSampleLight_event_loop_7:
   \   0000B5                ; Setup parameters for call to function osal_msg_deallocate
   \   0000B5   AA..         MOV     R2,?V0 + 0
   \   0000B7   AB..         MOV     R3,?V0 + 1
   \   0000B9   12....       LCALL   ??osal_msg_deallocate?relay
   \                     ??zclSampleLight_event_loop_1:
   \   0000BC                ; Setup parameters for call to function osal_msg_receive
   \   0000BC   90....       MOV     DPTR,#zclSampleLight_TaskID
   \   0000BF   E0           MOVX    A,@DPTR
   \   0000C0   F9           MOV     R1,A
   \   0000C1   12....       LCALL   ??osal_msg_receive?relay
   \   0000C4   8A..         MOV     ?V0 + 0,R2
   \   0000C6   8B..         MOV     ?V0 + 1,R3
   \   0000C8   EA           MOV     A,R2
   \   0000C9   7001         JNZ     ??zclSampleLight_event_loop_8
   \   0000CB   EB           MOV     A,R3
   \                     ??zclSampleLight_event_loop_8:
   \   0000CC   6061         JZ      ??zclSampleLight_event_loop_9
   \   0000CE   8A82         MOV     DPL,R2
   \   0000D0   8B83         MOV     DPH,R3
   \   0000D2   E0           MOVX    A,@DPTR
   \   0000D3   12....       LCALL   ?UC_SWITCH_SPARSE
   \                     `?<Jumptable for zclSampleLight_event_loop>_0`:
   \   0000D6   00           DB        0
   \   0000D7   02           DB        2
   \   0000D8   34           DB        52
   \   0000D9   ....         DW        ??zclSampleLight_event_loop_10
   \   0000DB   C0           DB        192
   \   0000DC   ....         DW        ??zclSampleLight_event_loop_6
   \   0000DE   ....         DW        ??zclSampleLight_event_loop_7
   \                     ??zclSampleLight_event_loop_10:
   \   0000E0   8A82         MOV     DPL,R2
   \   0000E2   8B83         MOV     DPH,R3
   \   0000E4   A3           INC     DPTR
   \   0000E5   A3           INC     DPTR
   \   0000E6   A3           INC     DPTR
   \   0000E7   A3           INC     DPTR
   \   0000E8   A3           INC     DPTR
   \   0000E9   A3           INC     DPTR
   \   0000EA   A3           INC     DPTR
   \   0000EB   E0           MOVX    A,@DPTR
   \   0000EC   12....       LCALL   ?UC_SWITCH_SPARSE
   \                     `?<Jumptable for zclSampleLight_event_loop>_1`:
   \   0000EF   00           DB        0
   \   0000F0   02           DB        2
   \   0000F1   01           DB        1
   \   0000F2   ....         DW        ??zclSampleLight_event_loop_11
   \   0000F4   04           DB        4
   \   0000F5   ....         DW        ??zclSampleLight_event_loop_12
   \   0000F7   ....         DW        ??zclSampleLight_event_loop_13
   \                     ??zclSampleLight_event_loop_11:
   \   0000F9   12....       LCALL   ?Subroutine0 & 0xFFFF
   \                     ??CrossCallReturnLabel_0:
   \   0000FC   E0           MOVX    A,@DPTR
   \   0000FD   FA           MOV     R2,A
   \   0000FE   EB           MOV     A,R3
   \   0000FF   C3           CLR     C
   \   000100   9A           SUBB    A,R2
   \   000101   5010         JNC     ??zclSampleLight_event_loop_13
   \   000103   0B           INC     R3
   \   000104   80F6         SJMP    ??CrossCallReturnLabel_0
   \                     ??zclSampleLight_event_loop_12:
   \   000106   12....       LCALL   ?Subroutine0 & 0xFFFF
   \                     ??CrossCallReturnLabel_1:
   \   000109   8001         SJMP    ??zclSampleLight_event_loop_14
   \                     ??zclSampleLight_event_loop_15:
   \   00010B   0B           INC     R3
   \                     ??zclSampleLight_event_loop_14:
   \   00010C   E0           MOVX    A,@DPTR
   \   00010D   FA           MOV     R2,A
   \   00010E   EB           MOV     A,R3
   \   00010F   C3           CLR     C
   \   000110   9A           SUBB    A,R2
   \   000111   40F8         JC      ??zclSampleLight_event_loop_15
   \                     ??zclSampleLight_event_loop_13:
   \   000113   E5..         MOV     A,?V0 + 0
   \   000115   2416         ADD     A,#0x16
   \   000117   F582         MOV     DPL,A
   \   000119   E5..         MOV     A,?V0 + 1
   \   00011B   3400         ADDC    A,#0x0
   \   00011D   F583         MOV     DPH,A
   \   00011F   E0           MOVX    A,@DPTR
   \   000120   FA           MOV     R2,A
   \   000121   A3           INC     DPTR
   \   000122   E0           MOVX    A,@DPTR
   \   000123   FB           MOV     R3,A
   \   000124   EA           MOV     A,R2
   \   000125   7001         JNZ     ??zclSampleLight_event_loop_16
   \   000127   EB           MOV     A,R3
   \                     ??zclSampleLight_event_loop_16:
   \   000128   608B         JZ      ??zclSampleLight_event_loop_7
   \   00012A                ; Setup parameters for call to function osal_mem_free
   \   00012A   12....       LCALL   ??osal_mem_free?relay
   \   00012D   8086         SJMP    ??zclSampleLight_event_loop_7
   \                     ??zclSampleLight_event_loop_9:
   \   00012F   AA..         MOV     R2,?V0 + 2
   \   000131   7480         MOV     A,#-0x80
   \   000133   65..         XRL     A,?V0 + 3
   \   000135   FB           MOV     R3,A
   \   000136   8004         SJMP    ??zclSampleLight_event_loop_5
    242          
    243            // Discard unknown events
    244            return 0;
   \                     ??zclSampleLight_event_loop_2:
   \   000138   7A00         MOV     R2,#0x0
   \   00013A   7B00         MOV     R3,#0x0
   \                     ??zclSampleLight_event_loop_5:
   \   00013C   7409         MOV     A,#0x9
   \   00013E   12....       LCALL   ?DEALLOC_XSTACK8
   \   000141   7F06         MOV     R7,#0x6
   \   000143   02....       LJMP    ?BANKED_LEAVE_XDATA
    245          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   EA           MOV     A,R2
   \   000001   2416         ADD     A,#0x16
   \   000003   F582         MOV     DPL,A
   \   000005   EB           MOV     A,R3
   \   000006   3400         ADDC    A,#0x0
   \   000008   F583         MOV     DPH,A
   \   00000A   E0           MOVX    A,@DPTR
   \   00000B   F8           MOV     R0,A
   \   00000C   A3           INC     DPTR
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   F9           MOV     R1,A
   \   00000F   8882         MOV     DPL,R0
   \   000011   8983         MOV     DPH,R1
   \   000013   7B00         MOV     R3,#0x0
   \   000015   22           RET
    246          
    247          /*********************************************************************
    248           * @fn      zclSampleLight_HandleKeys
    249           *
    250           * @brief   Handles all key events for this device.
    251           *
    252           * @param   shift - true if in shift/alt.
    253           * @param   keys - bit field for key events. Valid entries:
    254           *                 HAL_KEY_SW_4
    255           *                 HAL_KEY_SW_3
    256           *                 HAL_KEY_SW_2
    257           *                 HAL_KEY_SW_1
    258           *
    259           * @return  none
    260           */
    261          static void zclSampleLight_HandleKeys( byte shift, byte keys )
    262          {
    263            zAddrType_t dstAddr;
    264            
    265            
    266            (void)shift;  // Intentionally unreferenced parameter
    267          
    268            if ( keys & HAL_KEY_SW_2 )
    269            {
    270              // Initiate an End Device Bind Request, this bind request will
    271              // only use a cluster list that is important to binding.
    272              dstAddr.addrMode = afAddr16Bit;
    273              dstAddr.addr.shortAddr = 0;   // Coordinator makes the match
    274              ZDP_EndDeviceBindReq( &dstAddr, NLME_GetShortAddr(),
    275                                     SAMPLELIGHT_ENDPOINT,
    276                                     ZCL_HA_PROFILE_ID,
    277                                     ZCLSAMPLELIGHT_BINDINGLIST, bindingInClusters,
    278                                     0, NULL,   // No Outgoing clusters to bind
    279                                     TRUE );
    280            }
    281          
    282            if ( keys & HAL_KEY_SW_3 )
    283            {
    284            }
    285          
    286            if ( keys & HAL_KEY_SW_4 )
    287            {
    288            }
    289          }
    290          
    291          /*********************************************************************
    292           * @fn      zclSampleLight_ProcessIdentifyTimeChange
    293           *
    294           * @brief   Called to process any change to the IdentifyTime attribute.
    295           *
    296           * @param   none
    297           *
    298           * @return  none
    299           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    300          static void zclSampleLight_ProcessIdentifyTimeChange( void )
   \                     zclSampleLight_ProcessIdentifyTimeChange:
    301          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    302            
    303            if ( zclSampleLight_IdentifyTime > 0 )
   \   000004   90....       MOV     DPTR,#zclSampleLight_IdentifyTime
   \   000007   E0           MOVX    A,@DPTR
   \   000008   7002         JNZ     ??zclSampleLight_ProcessIdentifyTimeChange_0
   \   00000A   A3           INC     DPTR
   \   00000B   E0           MOVX    A,@DPTR
   \                     ??zclSampleLight_ProcessIdentifyTimeChange_0:
   \   00000C   601F         JZ      ??zclSampleLight_ProcessIdentifyTimeChange_1
    304            {
    305              osal_start_timerEx( zclSampleLight_TaskID, SAMPLELIGHT_IDENTIFY_TIMEOUT_EVT, 1000 );
   \   00000E                ; Setup parameters for call to function osal_start_timerEx
   \   00000E   7CE8         MOV     R4,#-0x18
   \   000010   7D03         MOV     R5,#0x3
   \   000012   7A01         MOV     R2,#0x1
   \   000014   7B00         MOV     R3,#0x0
   \   000016   90....       MOV     DPTR,#zclSampleLight_TaskID
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   F9           MOV     R1,A
   \   00001B   12....       LCALL   ??osal_start_timerEx?relay
    306              HalLedBlink ( HAL_LED_1, 0xFF, HAL_LED_DEFAULT_DUTY_CYCLE, HAL_LED_DEFAULT_FLASH_TIME );
   \   00001E                ; Setup parameters for call to function HalLedBlink
   \   00001E   7CE8         MOV     R4,#-0x18
   \   000020   7D03         MOV     R5,#0x3
   \   000022   7B05         MOV     R3,#0x5
   \   000024   7AFF         MOV     R2,#-0x1
   \   000026   7901         MOV     R1,#0x1
   \   000028   12....       LCALL   ??HalLedBlink?relay
   \   00002B   8022         SJMP    ??zclSampleLight_ProcessIdentifyTimeChange_2
    307            }
    308            else
    309            {
    310              if ( zclSampleLight_OnOff )
   \                     ??zclSampleLight_ProcessIdentifyTimeChange_1:
   \   00002D   90....       MOV     DPTR,#zclSampleLight_OnOff
   \   000030   E0           MOVX    A,@DPTR
   \   000031   6009         JZ      ??zclSampleLight_ProcessIdentifyTimeChange_3
    311              {
    312                HalLedSet ( HAL_LED_2, HAL_LED_MODE_ON );
   \   000033                ; Setup parameters for call to function HalLedSet
   \   000033   7A01         MOV     R2,#0x1
   \   000035   7902         MOV     R1,#0x2
   \   000037   12....       LCALL   ??HalLedSet?relay
   \   00003A   8013         SJMP    ??zclSampleLight_ProcessIdentifyTimeChange_2
    313              }
    314              else
    315                {
    316                  HalLedSet ( HAL_LED_2, HAL_LED_MODE_OFF );
   \                     ??zclSampleLight_ProcessIdentifyTimeChange_3:
   \   00003C                ; Setup parameters for call to function HalLedSet
   \   00003C   7A00         MOV     R2,#0x0
   \   00003E   7902         MOV     R1,#0x2
   \   000040   12....       LCALL   ??HalLedSet?relay
    317                  osal_stop_timerEx( zclSampleLight_TaskID, SAMPLELIGHT_IDENTIFY_TIMEOUT_EVT );
   \   000043                ; Setup parameters for call to function osal_stop_timerEx
   \   000043   7A01         MOV     R2,#0x1
   \   000045   7B00         MOV     R3,#0x0
   \   000047   90....       MOV     DPTR,#zclSampleLight_TaskID
   \   00004A   E0           MOVX    A,@DPTR
   \   00004B   F9           MOV     R1,A
   \   00004C   12....       LCALL   ??osal_stop_timerEx?relay
    318                }
    319                
    320            }
    321          }
   \                     ??zclSampleLight_ProcessIdentifyTimeChange_2:
   \   00004F   02....       LJMP    ?Subroutine1 & 0xFFFF
    322          
    323          /*********************************************************************
    324           * @fn      zclSampleLight_BasicResetCB
    325           *
    326           * @brief   Callback from the ZCL General Cluster Library
    327           *          to set all the Basic Cluster attributes to default values.
    328           *
    329           * @param   none
    330           *
    331           * @return  none
    332           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    333          static void zclSampleLight_BasicResetCB( void )
   \                     zclSampleLight_BasicResetCB:
    334          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    335            // Reset all attributes to default values
    336          }
   \   000000   02....       LJMP    ?BRET
    337          
    338          /*********************************************************************
    339           * @fn      zclSampleLight_IdentifyCB
    340           *
    341           * @brief   Callback from the ZCL General Cluster Library when
    342           *          it received an Identity Command for this application.
    343           *
    344           * @param   srcAddr - source address and endpoint of the response message
    345           * @param   identifyTime - the number of seconds to identify yourself
    346           *
    347           * @return  none
    348           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    349          static void zclSampleLight_IdentifyCB( zclIdentify_t *pCmd )
   \                     zclSampleLight_IdentifyCB:
    350          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    351            zclSampleLight_IdentifyTime = pCmd->identifyTime;
   \   000004   8A82         MOV     DPL,R2
   \   000006   8B83         MOV     DPH,R3
   \   000008   A3           INC     DPTR
   \   000009   A3           INC     DPTR
   \   00000A   E0           MOVX    A,@DPTR
   \   00000B   F8           MOV     R0,A
   \   00000C   A3           INC     DPTR
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   F9           MOV     R1,A
   \   00000F   90....       MOV     DPTR,#zclSampleLight_IdentifyTime
   \   000012   E8           MOV     A,R0
   \   000013   F0           MOVX    @DPTR,A
   \   000014   A3           INC     DPTR
   \   000015   E9           MOV     A,R1
   \   000016   F0           MOVX    @DPTR,A
    352            zclSampleLight_ProcessIdentifyTimeChange();
   \   000017                ; Setup parameters for call to function zclSampleLight_ProcessIdentifyTimeChange
   \   000017   12....       LCALL   ??zclSampleLight_ProcessIdentifyTimeChange?rela
    353          }
   \   00001A   02....       LJMP    ?Subroutine1 & 0xFFFF
    354          
    355          /*********************************************************************
    356           * @fn      zclSampleLight_IdentifyQueryRspCB
    357           *
    358           * @brief   Callback from the ZCL General Cluster Library when
    359           *          it received an Identity Query Response Command for this application.
    360           *
    361           * @param   srcAddr - requestor's address
    362           * @param   timeout - number of seconds to identify yourself (valid for query response)
    363           *
    364           * @return  none
    365           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    366          static void zclSampleLight_IdentifyQueryRspCB(  zclIdentifyQueryRsp_t *pRsp )
   \                     zclSampleLight_IdentifyQueryRspCB:
    367          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    368            // Query Response (with timeout value)
    369            (void)pRsp;
    370          }
   \   000000   02....       LJMP    ?BRET
    371          
    372          /*********************************************************************
    373           * @fn      zclSampleLight_OnOffCB
    374           *
    375           * @brief   Callback from the ZCL General Cluster Library when
    376           *          it received an On/Off Command for this application.
    377           *
    378           * @param   cmd - COMMAND_ON, COMMAND_OFF or COMMAND_TOGGLE
    379           *
    380           * @return  none
    381           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    382          static void zclSampleLight_OnOffCB( uint8 cmd )
   \                     zclSampleLight_OnOffCB:
    383          { 
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    384            if ( cmd == COMMAND_ON )// Turn on the light
   \   000004   7401         MOV     A,#0x1
   \   000006   69           XRL     A,R1
   \   000007   700F         JNZ     ??zclSampleLight_OnOffCB_0
    385              zclSampleLight_OnOff = LIGHT_ON;
   \                     ??zclSampleLight_OnOffCB_1:
   \   000009   7401         MOV     A,#0x1
   \                     ??zclSampleLight_OnOffCB_2:
   \   00000B   90....       MOV     DPTR,#zclSampleLight_OnOff
   \   00000E   F0           MOVX    @DPTR,A
    386          
    387            else if ( cmd == COMMAND_OFF )// Turn off the light
    388              zclSampleLight_OnOff = LIGHT_OFF;
    389          
    390            else // Toggle the light
    391            {
    392              if ( zclSampleLight_OnOff == LIGHT_OFF )
    393                    zclSampleLight_OnOff = LIGHT_ON;
    394              else
    395                    zclSampleLight_OnOff = LIGHT_OFF;
    396            }
    397          
    398            // In this sample app, we use LED4 to simulate the Light  
    399            if ( zclSampleLight_OnOff == LIGHT_ON )
    400            {
    401              HalLedSet( HAL_LED_2, HAL_LED_MODE_ON ); // setting the LED_1 on
   \   00000F                ; Setup parameters for call to function HalLedSet
   \   00000F   FA           MOV     R2,A
   \   000010   7902         MOV     R1,#0x2
   \   000012   12....       LCALL   ??HalLedSet?relay
    402            }
    403            else
    404              HalLedSet( HAL_LED_2, HAL_LED_MODE_OFF ); // setting the LED_1 off
    405          }
   \   000015   02....       LJMP    ?Subroutine1 & 0xFFFF
   \                     ??zclSampleLight_OnOffCB_0:
   \   000018   E9           MOV     A,R1
   \   000019   7003         JNZ     ??zclSampleLight_OnOffCB_3
   \                     ??zclSampleLight_OnOffCB_4:
   \   00001B   E4           CLR     A
   \   00001C   80ED         SJMP    ??zclSampleLight_OnOffCB_2
   \                     ??zclSampleLight_OnOffCB_3:
   \   00001E   90....       MOV     DPTR,#zclSampleLight_OnOff
   \   000021   E0           MOVX    A,@DPTR
   \   000022   70F7         JNZ     ??zclSampleLight_OnOffCB_4
   \   000024   80E3         SJMP    ??zclSampleLight_OnOffCB_1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for bindingInClusters>`:
   \   000000   06000800     DW 6, 8

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for sampleLight_TestEp>`:
   \   000000   14           DB 20
   \   000001   ....0000     DW zclSampleLight_TaskID, 0H
   \   000005   00           DB 0

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zclSampleLight_CmdCallbacks>`:
   \   000000   ....         DW ??zclSampleLight_BasicResetCB?relay
   \   000002   ....         DW ??zclSampleLight_IdentifyCB?relay
   \   000004   ....         DW ??zclSampleLight_IdentifyQueryRspCB?relay
   \   000006   ....0000     DW ??zclSampleLight_OnOffCB?relay, 0H, 0H, 0H, 0H, 0H, 0H, 0H, 0H, 0H
   \            00000000
   \            00000000
   \            00000000
   \            00000000
   \   00001A   0000         DW 0H
   \   00001C   0000         DB 0, 0

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclSampleLight_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclSampleLight_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclSampleLight_event_loop?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclSampleLight_event_loop

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclSampleLight_ProcessIdentifyTimeChange?rela:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclSampleLight_ProcessIdentifyTimeChange

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclSampleLight_BasicResetCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclSampleLight_BasicResetCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclSampleLight_IdentifyCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclSampleLight_IdentifyCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclSampleLight_IdentifyQueryRspCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclSampleLight_IdentifyQueryRspCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclSampleLight_OnOffCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclSampleLight_OnOffCB
    406          /****************************************************************************** 
    407           * 
    408           *  Functions for processing ZCL Foundation incoming Command/Response messages
    409           *
    410           *****************************************************************************/
    411          
    412          /*********************************************************************
    413           * @fn      zclSampleLight_ProcessIncomingMsg
    414           *
    415           * @brief   Process ZCL Foundation incoming message
    416           *
    417           * @param   pInMsg - pointer to the received message
    418           *
    419           * @return  none
    420           */
    421          static void zclSampleLight_ProcessIncomingMsg( zclIncomingMsg_t *pInMsg)
    422          {
    423            switch ( pInMsg->zclHdr.commandID )
    424            {
    425          #ifdef ZCL_READ
    426              case ZCL_CMD_READ_RSP:
    427                zclSampleLight_ProcessInReadRspCmd( pInMsg );
    428                break;
    429          #endif
    430                
    431          #ifdef ZCL_WRITE    
    432              case ZCL_CMD_WRITE_RSP:
    433                zclSampleLight_ProcessInWriteRspCmd( pInMsg );
    434                break;
    435          #endif
    436                
    437          #ifdef ZCL_REPORT
    438              case ZCL_CMD_CONFIG_REPORT: // See ZCL Test Applicaiton (zcl_testapp.c) for sample code on Attribute Reporting
    439                //zclSampleLight_ProcessInConfigReportCmd( pInMsg );
    440                break;
    441              
    442              case ZCL_CMD_CONFIG_REPORT_RSP:
    443                //zclSampleLight_ProcessInConfigReportRspCmd( pInMsg );
    444                break;
    445              
    446              case ZCL_CMD_READ_REPORT_CFG:
    447                //zclSampleLight_ProcessInReadReportCfgCmd( pInMsg );
    448                break;
    449              
    450              case ZCL_CMD_READ_REPORT_CFG_RSP:
    451                //zclSampleLight_ProcessInReadReportCfgRspCmd( pInMsg );
    452                break;
    453              
    454              case ZCL_CMD_REPORT:
    455                //zclSampleLight_ProcessInReportCmd( pInMsg );
    456                break;
    457          #endif   
    458                
    459              case ZCL_CMD_DEFAULT_RSP:
    460                zclSampleLight_ProcessInDefaultRspCmd( pInMsg );
    461                break;
    462                
    463          #ifdef ZCL_DISCOVER     
    464              case ZCL_CMD_DISCOVER_RSP:
    465                zclSampleLight_ProcessInDiscRspCmd( pInMsg );
    466                break;
    467          #endif
    468                
    469              default:
    470                break;
    471            }
    472            
    473            if ( pInMsg->attrCmd )
    474              osal_mem_free( pInMsg->attrCmd );
    475          }
    476          
    477          #ifdef ZCL_READ
    478          /*********************************************************************
    479           * @fn      zclSampleLight_ProcessInReadRspCmd
    480           *
    481           * @brief   Process the "Profile" Read Response Command
    482           *
    483           * @param   pInMsg - incoming message to process
    484           *
    485           * @return  none
    486           */
    487          static uint8 zclSampleLight_ProcessInReadRspCmd( zclIncomingMsg_t *pInMsg )
    488          {
    489            zclReadRspCmd_t *readRspCmd;
    490            uint8 i;
    491          
    492            readRspCmd = (zclReadRspCmd_t *)pInMsg->attrCmd;
    493            for (i = 0; i < readRspCmd->numAttr; i++)
    494            {
    495              // Notify the originator of the results of the original read attributes 
    496              // attempt and, for each successfull request, the value of the requested 
    497              // attribute
    498            }
    499          
    500            return TRUE; 
    501          }
    502          #endif // ZCL_READ
    503          
    504          #ifdef ZCL_WRITE
    505          /*********************************************************************
    506           * @fn      zclSampleLight_ProcessInWriteRspCmd
    507           *
    508           * @brief   Process the "Profile" Write Response Command
    509           *
    510           * @param   pInMsg - incoming message to process
    511           *
    512           * @return  none
    513           */
    514          static uint8 zclSampleLight_ProcessInWriteRspCmd( zclIncomingMsg_t *pInMsg )
    515          {
    516            zclWriteRspCmd_t *writeRspCmd;
    517            uint8 i;
    518          
    519            writeRspCmd = (zclWriteRspCmd_t *)pInMsg->attrCmd;
    520            for (i = 0; i < writeRspCmd->numAttr; i++)
    521            {
    522              // Notify the device of the results of the its original write attributes
    523              // command.
    524            }
    525          
    526            return TRUE; 
    527          }
    528          #endif // ZCL_WRITE
    529          
    530          /*********************************************************************
    531           * @fn      zclSampleLight_ProcessInDefaultRspCmd
    532           *
    533           * @brief   Process the "Profile" Default Response Command
    534           *
    535           * @param   pInMsg - incoming message to process
    536           *
    537           * @return  none
    538           */
    539          static uint8 zclSampleLight_ProcessInDefaultRspCmd( zclIncomingMsg_t *pInMsg )
    540          {
    541            // zclDefaultRspCmd_t *defaultRspCmd = (zclDefaultRspCmd_t *)pInMsg->attrCmd;
    542             
    543            // Device is notified of the Default Response command.
    544            (void)pInMsg;
    545            
    546            return TRUE; 
    547          }
    548          
    549          #ifdef ZCL_DISCOVER
    550          /*********************************************************************
    551           * @fn      zclSampleLight_ProcessInDiscRspCmd
    552           *
    553           * @brief   Process the "Profile" Discover Response Command
    554           *
    555           * @param   pInMsg - incoming message to process
    556           *
    557           * @return  none
    558           */
    559          static uint8 zclSampleLight_ProcessInDiscRspCmd( zclIncomingMsg_t *pInMsg )
    560          {
    561            zclDiscoverRspCmd_t *discoverRspCmd;
    562            uint8 i;
    563            
    564            discoverRspCmd = (zclDiscoverRspCmd_t *)pInMsg->attrCmd;
    565            for ( i = 0; i < discoverRspCmd->numAttr; i++ )
    566            {
    567              // Device is notified of the result of its attribute discovery command.
    568            }
    569            
    570            return TRUE;
    571          }
    572          #endif // ZCL_DISCOVER
    573          
    574          
    575          /****************************************************************************
    576          ****************************************************************************/
    577          
    578          

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     zclSampleLight_BasicResetCB        0      0      0
     zclSampleLight_IdentifyCB          2      0      0
       -> zclSampleLight_ProcessIdentifyTimeChange
                                        4      0      0
     zclSampleLight_IdentifyQueryRspCB
                                        0      0      0
     zclSampleLight_Init                2      0      0
       -> zclHA_Init                    4      0      0
       -> zclGeneral_RegisterCmdCallbacks
                                        4      0      0
       -> zcl_registerAttrList          4      0      0
       -> zcl_registerForMsg            4      0      0
       -> RegisterForKeys               4      0      0
       -> afRegister                    4      0      0
     zclSampleLight_OnOffCB             2      0      0
       -> HalLedSet                     4      0      0
       -> HalLedSet                     4      0      0
     zclSampleLight_ProcessIdentifyTimeChange
                                        2      0     23
       -> osal_start_timerEx            4      0      0
       -> HalLedBlink                   4      0      0
       -> HalLedSet                     4      0      0
       -> HalLedSet                     4      0      0
       -> osal_stop_timerEx             4      0      0
     zclSampleLight_event_loop          1      0     32
       -> zclSampleLight_ProcessIdentifyTimeChange
                                        0      0     46
       -> NLME_GetShortAddr             0      0     64
       -> ZDP_EndDeviceBindReq          0      0     64
       -> osal_msg_deallocate           0      0     46
       -> osal_msg_receive              0      0     46
       -> osal_mem_free                 0      0     46


   Segment part sizes:

     Function/Label                                  Bytes
     --------------                                  -----
     zclSampleLight_TaskID                              1
     bindingInClusters                                  4
     sampleLight_TestEp                                 6
     zclSampleLight_CmdCallbacks                       30
     zclSampleLight_Init                               59
     ?Subroutine1                                       7
     zclSampleLight_event_loop                        326
     ?Subroutine0                                      22
     zclSampleLight_ProcessIdentifyTimeChange
                                                       82
     zclSampleLight_BasicResetCB                        3
     zclSampleLight_IdentifyCB                         29
     zclSampleLight_IdentifyQueryRspCB
                                                        3
     zclSampleLight_OnOffCB                            38
     ?<Initializer for bindingInClusters>               4
     ?<Initializer for sampleLight_TestEp>              6
     ?<Initializer for zclSampleLight_CmdCallbacks>    30
     ??zclSampleLight_Init?relay                        6
     ??zclSampleLight_event_loop?relay                  6
     ??zclSampleLight_ProcessIdentifyTimeChange?rela    6
     ??zclSampleLight_BasicResetCB?relay                6
     ??zclSampleLight_IdentifyCB?relay                  6
     ??zclSampleLight_IdentifyQueryRspCB?relay          6
     ??zclSampleLight_OnOffCB?relay                     6

 
 569 bytes in segment BANKED_CODE
  42 bytes in segment BANK_RELAYS
  40 bytes in segment XDATA_I
  40 bytes in segment XDATA_ID
   1 byte  in segment XDATA_Z
 
 651 bytes of CODE  memory
  41 bytes of XDATA memory

Errors: none
Warnings: none
