###############################################################################
#                                                                             #
# IAR C/C++ Compiler V7.51A/W32 for 8051                01/Jul/2010  09:58:28 #
# Copyright 2004-2009 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0- #
#                          1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3. #
#                          0-1.4.0\Components\mt\MT_ZDO.c                     #
#    Command line       =  -f "D:\µ{¦¡¶}µo\TI Zigbee                          #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2. #
#                          3.0-1.4.0\ZStack-CC2530-2.3.0-1.4.0\Projects\zstac #
#                          k\Utilities\LocationApp\CC2530DB\..\..\..\Tools\CC #
#                          2530DB\f8wEndev.cfg" (-DCPU32MHZ                   #
#                          -DROOT=__near_func -DBLINK_LEDS) -f                #
#                          "D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3 #
#                          .0-1.4.0\Projects\zstack\Utilities\LocationApp\CC2 #
#                          530DB\..\..\..\Tools\CC2530DB\f8wConfig.cfg"       #
#                          (-DSECURE=0 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR      #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116 "-DCONST=const __code"    #
#                          -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=TRUE      #
#                          -DPOLL_RATE=1000 -DQUEUED_POLL_RATE=100            #
#                          -DRESPONSE_POLL_RATE=100) -DREJOIN_POLL_RATE=440   #
#                          "D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3 #
#                          .0-1.4.0\Components\mt\MT_ZDO.c" -D EndDeviceBB    #
#                          -D NWK_AUTO_POLL -D ZTOOL_P1 -D MT_TASK -D         #
#                          MT_SYS_FUNC -D MT_ZDO_FUNC -D                      #
#                          xLCD_SUPPORTED=DEBUG -lC "D:\µ{¦¡¶}µo\TI Zigbee    #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2. #
#                          3.0-1.4.0\ZStack-CC2530-2.3.0-1.4.0\Projects\zstac #
#                          k\Utilities\LocationApp\CC2530DB\EndDeviceBB\List\ #
#                          " -lA "D:\µ{¦¡¶}µo\TI Zigbee                       #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2. #
#                          3.0-1.4.0\ZStack-CC2530-2.3.0-1.4.0\Projects\zstac #
#                          k\Utilities\LocationApp\CC2530DB\EndDeviceBB\List\ #
#                          " --diag_suppress Pe001,Pa010 -o "D:\µ{¦¡¶}µo\TI   #
#                          Zigbee Z-Stack\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC #
#                          2530-2.3.0-1.4.0\ZStack-CC2530-2.3.0-1.4.0\Project #
#                          s\zstack\Utilities\LocationApp\CC2530DB\EndDeviceB #
#                          B\Obj\" -e --require_prototypes --debug            #
#                          --core=plain --dptr=16,1 --data_model=large        #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I "D:\µ{¦¡¶}µo\TI Zigbee     #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2. #
#                          3.0-1.4.0\ZStack-CC2530-2.3.0-1.4.0\Projects\zstac #
#                          k\Utilities\LocationApp\CC2530DB\" -I              #
#                          "D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3 #
#                          .0-1.4.0\Projects\zstack\Utilities\LocationApp\CC2 #
#                          530DB\..\SOURCE\" -I "D:\µ{¦¡¶}µo\TI Zigbee        #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2. #
#                          3.0-1.4.0\ZStack-CC2530-2.3.0-1.4.0\Projects\zstac #
#                          k\Utilities\LocationApp\CC2530DB\..\..\..\ZMAIN\TI #
#                          2530DB\" -I "D:\µ{¦¡¶}µo\TI Zigbee                 #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2. #
#                          3.0-1.4.0\ZStack-CC2530-2.3.0-1.4.0\Projects\zstac #
#                          k\Utilities\LocationApp\CC2530DB\..\..\..\..\..\CO #
#                          MPONENTS\MT\" -I "D:\µ{¦¡¶}µo\TI Zigbee            #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2. #
#                          3.0-1.4.0\ZStack-CC2530-2.3.0-1.4.0\Projects\zstac #
#                          k\Utilities\LocationApp\CC2530DB\..\..\..\..\..\CO #
#                          MPONENTS\HAL\INCLUDE\" -I "D:\µ{¦¡¶}µo\TI Zigbee   #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2. #
#                          3.0-1.4.0\ZStack-CC2530-2.3.0-1.4.0\Projects\zstac #
#                          k\Utilities\LocationApp\CC2530DB\..\..\..\..\..\CO #
#                          MPONENTS\HAL\TARGET\CC2530EB\" -I "D:\µ{¦¡¶}µo\TI  #
#                          Zigbee Z-Stack\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC #
#                          2530-2.3.0-1.4.0\ZStack-CC2530-2.3.0-1.4.0\Project #
#                          s\zstack\Utilities\LocationApp\CC2530DB\..\..\..\. #
#                          .\..\COMPONENTS\OSAL\MCU\CCSOC\" -I                #
#                          "D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3 #
#                          .0-1.4.0\Projects\zstack\Utilities\LocationApp\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\OSAL\INCLUDE\" -I  #
#                          "D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3 #
#                          .0-1.4.0\Projects\zstack\Utilities\LocationApp\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\STACK\AF\" -I      #
#                          "D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3 #
#                          .0-1.4.0\Projects\zstack\Utilities\LocationApp\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\STACK\NWK\" -I     #
#                          "D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3 #
#                          .0-1.4.0\Projects\zstack\Utilities\LocationApp\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\STACK\SEC\" -I     #
#                          "D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3 #
#                          .0-1.4.0\Projects\zstack\Utilities\LocationApp\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\STACK\SAPI\" -I    #
#                          "D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3 #
#                          .0-1.4.0\Projects\zstack\Utilities\LocationApp\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\STACK\SYS\" -I     #
#                          "D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3 #
#                          .0-1.4.0\Projects\zstack\Utilities\LocationApp\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\STACK\ZDO\" -I     #
#                          "D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3 #
#                          .0-1.4.0\Projects\zstack\Utilities\LocationApp\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\ZMAC\F8W\" -I      #
#                          "D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3 #
#                          .0-1.4.0\Projects\zstack\Utilities\LocationApp\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\ZMAC\" -I          #
#                          "D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3 #
#                          .0-1.4.0\Projects\zstack\Utilities\LocationApp\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\SERVICES\SADDR\"   #
#                          -I "D:\µ{¦¡¶}µo\TI Zigbee                          #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2. #
#                          3.0-1.4.0\ZStack-CC2530-2.3.0-1.4.0\Projects\zstac #
#                          k\Utilities\LocationApp\CC2530DB\..\..\..\..\..\CO #
#                          MPONENTS\SERVICES\SDATA\" -I "D:\µ{¦¡¶}µo\TI       #
#                          Zigbee Z-Stack\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC #
#                          2530-2.3.0-1.4.0\ZStack-CC2530-2.3.0-1.4.0\Project #
#                          s\zstack\Utilities\LocationApp\CC2530DB\..\..\..\. #
#                          .\..\COMPONENTS\MAC\INCLUDE\" -I "D:\µ{¦¡¶}µo\TI   #
#                          Zigbee Z-Stack\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC #
#                          2530-2.3.0-1.4.0\ZStack-CC2530-2.3.0-1.4.0\Project #
#                          s\zstack\Utilities\LocationApp\CC2530DB\..\..\..\. #
#                          .\..\COMPONENTS\MAC\HIGH_LEVEL\" -I                #
#                          "D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3 #
#                          .0-1.4.0\Projects\zstack\Utilities\LocationApp\CC2 #
#                          530DB\..\..\..\..\..\COMPONENTS\MAC\LOW_LEVEL\srf0 #
#                          4\" -I "D:\µ{¦¡¶}µo\TI Zigbee                      #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2. #
#                          3.0-1.4.0\ZStack-CC2530-2.3.0-1.4.0\Projects\zstac #
#                          k\Utilities\LocationApp\CC2530DB\..\..\..\..\..\CO #
#                          MPONENTS\MAC\LOW_LEVEL\srf04\SINGLE_CHIP\" -I      #
#                          "C:\IAR Systems\Embedded Workbench 5.3\8051\INC\"  #
#                          -I "C:\IAR Systems\Embedded Workbench              #
#                          5.3\8051\INC\CLIB\" -Ohz                           #
#    List file          =  D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0- #
#                          1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3. #
#                          0-1.4.0\Projects\zstack\Utilities\LocationApp\CC25 #
#                          30DB\EndDeviceBB\List\MT_ZDO.lst                   #
#    Object file        =  D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0- #
#                          1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3. #
#                          0-1.4.0\Projects\zstack\Utilities\LocationApp\CC25 #
#                          30DB\EndDeviceBB\Obj\MT_ZDO.r51                    #
#                                                                             #
#                                                                             #
###############################################################################

D:\µ{¦¡¶}µo\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3.0-1.4.0\ZStack-CC2530-2.3.0-1.4.0\Components\mt\MT_ZDO.c
      1          /**************************************************************************************************
      2            Filename:       MT_ZDO.c
      3            Revised:        $Date: 2009-12-29 11:40:43 -0800 (Tue, 29 Dec 2009) $
      4            Revision:       $Revision: 21414 $
      5          
      6            Description:    MonitorTest functions for the ZDO layer.
      7          
      8          
      9            Copyright 2004-2009 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED “AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          #ifdef MT_ZDO_FUNC
     41          
     42          /**************************************************************************************************
     43           * INCLUDES
     44           **************************************************************************************************/
     45          #include "ZComDef.h"
     46          #include "OSAL.h"
     47          #include "MT.h"
     48          #include "MT_ZDO.h"
     49          #include "APSMEDE.h"
     50          #include "ZDConfig.h"
     51          #include "ZDProfile.h"
     52          #include "ZDObject.h"
     53          #include "ZDApp.h"
     54          
     55          #if !defined( WIN32 )
     56            #include "OnBoard.h"
     57          #endif
     58          
     59          #if defined(ZDO_LINK_KEY_MANAGEMENT)
     60            #include "ZDSecMgr.h"
     61          #endif
     62          
     63          #include "nwk_util.h"
     64          #include "hal_lcd.h"
     65          
     66          /**************************************************************************************************
     67           * CONSTANTS
     68           **************************************************************************************************/
     69          #define MT_ZDO_END_DEVICE_ANNCE_IND_LEN   0x0D
     70          #define MT_ZDO_ADDR_RSP_LEN               0x0D
     71          #define MT_ZDO_BIND_UNBIND_RSP_LEN        0x03
     72          
     73          #define MTZDO_RESPONSE_BUFFER_LEN   100
     74          
     75          #define MTZDO_MAX_MATCH_CLUSTERS    16
     76          #define MTZDO_MAX_ED_BIND_CLUSTERS  15
     77          
     78          // Conversion from ZDO Cluster Id to the RPC AREQ Id is direct as follows:
     79          #define MT_ZDO_CID_TO_AREQ_ID(CId)  ((uint8)(CId) | 0x80)
     80          
     81          /**************************************************************************************************
     82           * GLOBAL VARIABLES
     83           **************************************************************************************************/

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     84          uint32 _zdoCallbackSub;
   \                     _zdoCallbackSub:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z
     85          
     86          /**************************************************************************************************
     87           * LOCAL VARIABLES
     88           **************************************************************************************************/
     89          
     90          /**************************************************************************************************
     91           * LOCAL FUNCTIONS
     92           **************************************************************************************************/
     93          #if defined (MT_ZDO_FUNC)
     94          void MT_ZdoNWKAddressRequest(uint8 *pBuf);
     95          void MT_ZdoIEEEAddrRequest(uint8 *pBuf);
     96          void MT_ZdoNodeDescRequest(uint8 *pBuf);
     97          void MT_ZdoPowerDescRequest(uint8 *pBuf);
     98          void MT_ZdoSimpleDescRequest(uint8 *pBuf);
     99          void MT_ZdoActiveEpRequest(uint8 *pBuf);
    100          void MT_ZdoMatchDescRequest(uint8 *pBuf);
    101          void MT_ZdoComplexDescRequest(uint8 *pBuf);
    102          void MT_ZdoUserDescRequest(uint8 *pBuf);
    103          void MT_ZdoEndDevAnnce(uint8 *pBuf);
    104          void MT_ZdoUserDescSet(uint8 *pBuf);
    105          void MT_ZdoServiceDiscRequest(uint8 *pBuf);
    106          void MT_ZdoEndDevBindRequest(uint8 *pBuf);
    107          void MT_ZdoBindRequest(uint8 *pBuf);
    108          void MT_ZdoUnbindRequest(uint8 *pBuf);
    109          void MT_ZdoMgmtNwkDiscRequest(uint8 *pBuf);
    110          void MT_ZdoSetLinkKey(uint8 *pBuf);
    111          void MT_ZdoRemoveLinkKey(uint8 *pBuf);
    112          void MT_ZdoGetLinkKey(uint8 *pBuf);
    113          #if defined (MT_ZDO_MGMT)
    114          void MT_ZdoMgmtLqiRequest(uint8 *pBuf);
    115          void MT_ZdoMgmtRtgRequest(uint8 *pBuf);
    116          void MT_ZdoMgmtBindRequest(uint8 *pBuf);
    117          void MT_ZdoMgmtLeaveRequest(uint8 *pBuf);
    118          void MT_ZdoMgmtDirectJoinRequest(uint8 *pBuf);
    119          void MT_ZdoMgmtPermitJoinRequest(uint8 *pBuf);
    120          void MT_ZdoMgmtNwkUpdateRequest(uint8 *pBuf);
    121          #endif /* MT_ZDO_MGMT */
    122          void MT_ZdoStartupFromApp(uint8 *pBuf);
    123          void MT_ZdoRegisterForZDOMsg(uint8 *pBuf);
    124          void MT_ZdoRemoveRegisteredCB(uint8 *pBuf);
    125          #endif /* MT_ZDO_FUNC */
    126          
    127          #if defined (MT_ZDO_CB_FUNC)
    128          uint8 MT_ZdoHandleExceptions( afIncomingMSGPacket_t *pData, zdoIncomingMsg_t *inMsg );
    129          void MT_ZdoAddrRspCB( ZDO_NwkIEEEAddrResp_t *pMsg, uint16 clusterID );
    130          void MT_ZdoEndDevAnnceCB( ZDO_DeviceAnnce_t *pMsg, uint16 srcAddr );
    131          void MT_ZdoBindUnbindRspCB( uint16 clusterID, uint16 srcAddr, uint8 status );
    132          void* MT_ZdoSrcRtgCB( void *pStr );
    133          #endif /* MT_ZDO_CB_FUNC */
    134          
    135          #if defined (MT_ZDO_FUNC)
    136          /***************************************************************************************************
    137           * @fn      MT_ZdoInit
    138           *
    139           * @brief   MT ZDO initialization
    140           *
    141           * @param   none
    142           *
    143           * @return  none
    144           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    145          void MT_ZdoInit(void)
   \                     MT_ZdoInit:
    146          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    147          #ifdef MT_ZDO_CB_FUNC
    148            /* Register with ZDO for indication callbacks */
    149            ZDO_RegisterForZdoCB(ZDO_SRC_RTG_IND_CBID, &MT_ZdoSrcRtgCB);
    150          #endif
    151          }
   \   000000   02....       LJMP    ?BRET
    152          
    153          /***************************************************************************************************
    154           * @fn      MT_ZdoCommandProcessing
    155           *
    156           * @brief
    157           *
    158           *   Process all the ZDO commands that are issued by test tool
    159           *
    160           * @param   pBuf - pointer to the msg buffer
    161           *
    162           *          | LEN  | CMD0  | CMD1  |  DATA  |
    163           *          |  1   |   1   |   1   |  0-255 |
    164           *
    165           * @return  status
    166           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    167          uint8 MT_ZdoCommandProcessing(uint8* pBuf)
   \                     MT_ZdoCommandProcessing:
    168          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
    169            uint8 status = MT_RPC_SUCCESS;
   \   000005   7E00         MOV     R6,#0x0
    170          
    171            switch (pBuf[MT_RPC_POS_CMD1])
   \   000007   8A82         MOV     DPL,R2
   \   000009   8B83         MOV     DPH,R3
   \   00000B   A3           INC     DPTR
   \   00000C   A3           INC     DPTR
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   12....       LCALL   ?UC_SWITCH_SPARSE
   \                     `?<Jumptable for MT_ZdoCommandProcessing>_0`:
   \   000011   00           DB        0
   \   000012   15           DB        21
   \   000013   00           DB        0
   \   000014   ....         DW        ??MT_ZdoCommandProcessing_0
   \   000016   01           DB        1
   \   000017   ....         DW        ??MT_ZdoCommandProcessing_1
   \   000019   02           DB        2
   \   00001A   ....         DW        ??MT_ZdoCommandProcessing_2
   \   00001C   03           DB        3
   \   00001D   ....         DW        ??MT_ZdoCommandProcessing_3
   \   00001F   04           DB        4
   \   000020   ....         DW        ??MT_ZdoCommandProcessing_4
   \   000022   05           DB        5
   \   000023   ....         DW        ??MT_ZdoCommandProcessing_5
   \   000025   06           DB        6
   \   000026   ....         DW        ??MT_ZdoCommandProcessing_6
   \   000028   07           DB        7
   \   000029   ....         DW        ??MT_ZdoCommandProcessing_7
   \   00002B   08           DB        8
   \   00002C   ....         DW        ??MT_ZdoCommandProcessing_8
   \   00002E   0A           DB        10
   \   00002F   ....         DW        ??MT_ZdoCommandProcessing_9
   \   000031   0B           DB        11
   \   000032   ....         DW        ??MT_ZdoCommandProcessing_10
   \   000034   0C           DB        12
   \   000035   ....         DW        ??MT_ZdoCommandProcessing_11
   \   000037   20           DB        32
   \   000038   ....         DW        ??MT_ZdoCommandProcessing_12
   \   00003A   21           DB        33
   \   00003B   ....         DW        ??MT_ZdoCommandProcessing_13
   \   00003D   22           DB        34
   \   00003E   ....         DW        ??MT_ZdoCommandProcessing_14
   \   000040   23           DB        35
   \   000041   ....         DW        ??MT_ZdoCommandProcessing_15
   \   000043   24           DB        36
   \   000044   ....         DW        ??MT_ZdoCommandProcessing_16
   \   000046   25           DB        37
   \   000047   ....         DW        ??MT_ZdoCommandProcessing_17
   \   000049   3E           DB        62
   \   00004A   ....         DW        ??MT_ZdoCommandProcessing_18
   \   00004C   3F           DB        63
   \   00004D   ....         DW        ??MT_ZdoCommandProcessing_19
   \   00004F   40           DB        64
   \   000050   ....         DW        ??MT_ZdoCommandProcessing_20
   \   000052   ....         DW        ??MT_ZdoCommandProcessing_21
    172            {
    173          #if defined ( ZDO_NWKADDR_REQUEST )
    174              case MT_ZDO_NWK_ADDR_REQ:
    175                MT_ZdoNWKAddressRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_0:
   \   000054                ; Setup parameters for call to function MT_ZdoNWKAddressRequest
   \   000054   12....       LCALL   ??MT_ZdoNWKAddressRequest?relay
   \   000057   8066         SJMP    ??MT_ZdoCommandProcessing_22
    176                break;
    177          #endif
    178          
    179          #if defined ( ZDO_IEEEADDR_REQUEST )
    180              case MT_ZDO_IEEE_ADDR_REQ:
    181                MT_ZdoIEEEAddrRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_1:
   \   000059                ; Setup parameters for call to function MT_ZdoIEEEAddrRequest
   \   000059   12....       LCALL   ??MT_ZdoIEEEAddrRequest?relay
   \   00005C   8061         SJMP    ??MT_ZdoCommandProcessing_22
    182                break;
    183          #endif
    184          
    185          #if defined ( ZDO_NODEDESC_REQUEST )
    186              case MT_ZDO_NODE_DESC_REQ:
    187                MT_ZdoNodeDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_2:
   \   00005E                ; Setup parameters for call to function MT_ZdoNodeDescRequest
   \   00005E   12....       LCALL   ??MT_ZdoNodeDescRequest?relay
   \   000061   805C         SJMP    ??MT_ZdoCommandProcessing_22
    188                break;
    189          #endif
    190          
    191          #if defined ( ZDO_POWERDESC_REQUEST )
    192              case MT_ZDO_POWER_DESC_REQ:
    193                MT_ZdoPowerDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_3:
   \   000063                ; Setup parameters for call to function MT_ZdoPowerDescRequest
   \   000063   12....       LCALL   ??MT_ZdoPowerDescRequest?relay
   \   000066   8057         SJMP    ??MT_ZdoCommandProcessing_22
    194                break;
    195          #endif
    196          
    197          #if defined ( ZDO_SIMPLEDESC_REQUEST )
    198              case MT_ZDO_SIMPLE_DESC_REQ:
    199                MT_ZdoSimpleDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_4:
   \   000068                ; Setup parameters for call to function MT_ZdoSimpleDescRequest
   \   000068   12....       LCALL   ??MT_ZdoSimpleDescRequest?relay
   \   00006B   8052         SJMP    ??MT_ZdoCommandProcessing_22
    200                break;
    201          #endif
    202          
    203          #if defined ( ZDO_ACTIVEEP_REQUEST )
    204              case MT_ZDO_ACTIVE_EP_REQ:
    205                MT_ZdoActiveEpRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_5:
   \   00006D                ; Setup parameters for call to function MT_ZdoActiveEpRequest
   \   00006D   12....       LCALL   ??MT_ZdoActiveEpRequest?relay
   \   000070   804D         SJMP    ??MT_ZdoCommandProcessing_22
    206                break;
    207          #endif
    208          
    209          #if defined ( ZDO_MATCH_REQUEST )
    210              case MT_ZDO_MATCH_DESC_REQ:
    211                MT_ZdoMatchDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_6:
   \   000072                ; Setup parameters for call to function MT_ZdoMatchDescRequest
   \   000072   12....       LCALL   ??MT_ZdoMatchDescRequest?relay
   \   000075   8048         SJMP    ??MT_ZdoCommandProcessing_22
    212                break;
    213          #endif
    214          
    215          #if defined ( ZDO_COMPLEXDESC_REQUEST )
    216              case MT_ZDO_COMPLEX_DESC_REQ:
    217                MT_ZdoComplexDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_7:
   \   000077                ; Setup parameters for call to function MT_ZdoComplexDescRequest
   \   000077   12....       LCALL   ??MT_ZdoComplexDescRequest?relay
   \   00007A   8043         SJMP    ??MT_ZdoCommandProcessing_22
    218                break;
    219          #endif
    220          
    221          #if defined ( ZDO_USERDESC_REQUEST )
    222              case MT_ZDO_USER_DESC_REQ:
    223                MT_ZdoUserDescRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_8:
   \   00007C                ; Setup parameters for call to function MT_ZdoUserDescRequest
   \   00007C   12....       LCALL   ??MT_ZdoUserDescRequest?relay
   \   00007F   803E         SJMP    ??MT_ZdoCommandProcessing_22
    224                break;
    225          #endif
    226          
    227          #if defined ( ZDO_ENDDEVICE_ANNCE )
    228              case MT_ZDO_END_DEV_ANNCE:
    229                MT_ZdoEndDevAnnce(pBuf);
   \                     ??MT_ZdoCommandProcessing_9:
   \   000081                ; Setup parameters for call to function MT_ZdoEndDevAnnce
   \   000081   12....       LCALL   ??MT_ZdoEndDevAnnce?relay
   \   000084   8039         SJMP    ??MT_ZdoCommandProcessing_22
    230                break;
    231          #endif      
    232          
    233          #if defined ( ZDO_USERDESCSET_REQUEST )
    234              case MT_ZDO_USER_DESC_SET:
    235                MT_ZdoUserDescSet(pBuf);
   \                     ??MT_ZdoCommandProcessing_10:
   \   000086                ; Setup parameters for call to function MT_ZdoUserDescSet
   \   000086   12....       LCALL   ??MT_ZdoUserDescSet?relay
   \   000089   8034         SJMP    ??MT_ZdoCommandProcessing_22
    236                break;
    237          #endif
    238          
    239          #if defined ( ZDO_SERVERDISC_REQUEST )
    240              case MT_ZDO_SERVICE_DISC_REQ:
    241                MT_ZdoServiceDiscRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_11:
   \   00008B                ; Setup parameters for call to function MT_ZdoServiceDiscRequest
   \   00008B   12....       LCALL   ??MT_ZdoServiceDiscRequest?relay
   \   00008E   802F         SJMP    ??MT_ZdoCommandProcessing_22
    242                break;
    243          #endif
    244          
    245          #if defined ( ZDO_ENDDEVICEBIND_REQUEST )
    246              case MT_ZDO_END_DEV_BIND_REQ:
    247                MT_ZdoEndDevBindRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_12:
   \   000090                ; Setup parameters for call to function MT_ZdoEndDevBindRequest
   \   000090   12....       LCALL   ??MT_ZdoEndDevBindRequest?relay
   \   000093   802A         SJMP    ??MT_ZdoCommandProcessing_22
    248                break;
    249          #endif
    250          
    251          #if defined ( ZDO_BIND_UNBIND_REQUEST )
    252              case MT_ZDO_BIND_REQ:
    253                MT_ZdoBindRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_13:
   \   000095                ; Setup parameters for call to function MT_ZdoBindRequest
   \   000095   12....       LCALL   ??MT_ZdoBindRequest?relay
   \   000098   8025         SJMP    ??MT_ZdoCommandProcessing_22
    254                break;
    255          #endif
    256          
    257          #if defined ( ZDO_BIND_UNBIND_REQUEST )
    258              case MT_ZDO_UNBIND_REQ:
    259                MT_ZdoUnbindRequest(pBuf);
   \                     ??MT_ZdoCommandProcessing_14:
   \   00009A                ; Setup parameters for call to function MT_ZdoUnbindRequest
   \   00009A   12....       LCALL   ??MT_ZdoUnbindRequest?relay
   \   00009D   8020         SJMP    ??MT_ZdoCommandProcessing_22
    260                break;
    261          #endif
    262                
    263          #if defined ( ZDO_LINK_KEY_MANAGEMENT )
    264              case MT_ZDO_SET_LINK_KEY:
    265                MT_ZdoSetLinkKey(pBuf);
   \                     ??MT_ZdoCommandProcessing_15:
   \   00009F                ; Setup parameters for call to function MT_ZdoSetLinkKey
   \   00009F   12....       LCALL   ??MT_ZdoSetLinkKey?relay
   \   0000A2   801B         SJMP    ??MT_ZdoCommandProcessing_22
    266                break;
    267          
    268              case MT_ZDO_REMOVE_LINK_KEY:
    269                MT_ZdoRemoveLinkKey(pBuf);
   \                     ??MT_ZdoCommandProcessing_16:
   \   0000A4                ; Setup parameters for call to function MT_ZdoRemoveLinkKey
   \   0000A4   12....       LCALL   ??MT_ZdoRemoveLinkKey?relay
   \   0000A7   8016         SJMP    ??MT_ZdoCommandProcessing_22
    270                break;
    271          
    272              case MT_ZDO_GET_LINK_KEY:
    273                MT_ZdoGetLinkKey(pBuf);
   \                     ??MT_ZdoCommandProcessing_17:
   \   0000A9                ; Setup parameters for call to function MT_ZdoGetLinkKey
   \   0000A9   12....       LCALL   ??MT_ZdoGetLinkKey?relay
   \   0000AC   8011         SJMP    ??MT_ZdoCommandProcessing_22
    274                break;
    275          #endif      
    276          
    277          #if defined ( ZDO_MGMT_NWKDISC_REQUEST )
    278              case MT_ZDO_MGMT_NWKDISC_REQ:
    279                MT_ZdoMgmtNwkDiscRequest(pBuf);
    280                break;
    281          #endif
    282          
    283          #if defined ( ZDO_MGMT_LQI_REQUEST )
    284              case MT_ZDO_MGMT_LQI_REQ:
    285                MT_ZdoMgmtLqiRequest(pBuf);
    286                break;
    287          #endif
    288          
    289          #if defined ( ZDO_MGMT_RTG_REQUEST )
    290              case MT_ZDO_MGMT_RTG_REQ:
    291                MT_ZdoMgmtRtgRequest(pBuf);
    292                break;
    293          #endif
    294          
    295          #if defined ( ZDO_MGMT_BIND_REQUEST )
    296              case MT_ZDO_MGMT_BIND_REQ:
    297                MT_ZdoMgmtBindRequest(pBuf);
    298                break;
    299          #endif
    300          
    301          #if defined ( ZDO_MGMT_LEAVE_REQUEST )
    302              case MT_ZDO_MGMT_LEAVE_REQ:
    303                MT_ZdoMgmtLeaveRequest(pBuf);
    304                break;
    305          #endif
    306          
    307          #if defined ( ZDO_MGMT_JOINDIRECT_REQUEST )
    308              case MT_ZDO_MGMT_DIRECT_JOIN_REQ:
    309                MT_ZdoMgmtDirectJoinRequest(pBuf);
    310                break;
    311          #endif
    312          
    313          #if defined ( ZDO_MGMT_PERMIT_JOIN_REQUEST )
    314              case MT_ZDO_MGMT_PERMIT_JOIN_REQ:
    315                MT_ZdoMgmtPermitJoinRequest(pBuf);
    316                break;
    317          #endif
    318          
    319          #if defined ( ZDO_MGMT_NWKUPDATE_REQUEST )
    320              case MT_ZDO_MGMT_NWK_UPDATE_REQ:
    321                MT_ZdoMgmtNwkUpdateRequest(pBuf);
    322                break;
    323          #endif 
    324          
    325          #if defined ( ZDO_NETWORKSTART_REQUEST )
    326              case MT_ZDO_STARTUP_FROM_APP:
    327                MT_ZdoStartupFromApp(pBuf);
   \                     ??MT_ZdoCommandProcessing_20:
   \   0000AE                ; Setup parameters for call to function MT_ZdoStartupFromApp
   \   0000AE   12....       LCALL   ??MT_ZdoStartupFromApp?relay
   \   0000B1   800C         SJMP    ??MT_ZdoCommandProcessing_22
    328                break;
    329          #endif
    330          
    331              case MT_ZDO_MSG_CB_REGISTER:
    332                MT_ZdoRegisterForZDOMsg(pBuf);
   \                     ??MT_ZdoCommandProcessing_18:
   \   0000B3                ; Setup parameters for call to function MT_ZdoRegisterForZDOMsg
   \   0000B3   12....       LCALL   ??MT_ZdoRegisterForZDOMsg?relay
   \   0000B6   8007         SJMP    ??MT_ZdoCommandProcessing_22
    333                break;
    334          
    335              case MT_ZDO_MSG_CB_REMOVE:
    336                MT_ZdoRemoveRegisteredCB(pBuf);
   \                     ??MT_ZdoCommandProcessing_19:
   \   0000B8                ; Setup parameters for call to function MT_ZdoRemoveRegisteredCB
   \   0000B8   12....       LCALL   ??MT_ZdoRemoveRegisteredCB?relay
   \   0000BB   8002         SJMP    ??MT_ZdoCommandProcessing_22
    337                break;
    338          
    339              default:
    340                status = MT_RPC_ERR_COMMAND_ID;
   \                     ??MT_ZdoCommandProcessing_21:
   \   0000BD   0E           INC     R6
   \   0000BE   0E           INC     R6
    341                break;
    342            }
    343          
    344            return status;
   \                     ??MT_ZdoCommandProcessing_22:
   \   0000BF   EE           MOV     A,R6
   \   0000C0   F9           MOV     R1,A
   \   0000C1   80..         SJMP    ??Subroutine56_0
    345          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine56_0:
   \   000000   7F01         MOV     R7,#0x1
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    346          
    347          /***************************************************************************************************
    348           * @fn      MT_ZdoNwkAddrReq
    349           *
    350           * @brief   Handle a nwk address request.
    351           *
    352           * @param   pData  - MT message data
    353           *
    354           * @return  void
    355           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    356          void MT_ZdoNWKAddressRequest(uint8 *pBuf)
   \                     MT_ZdoNWKAddressRequest:
    357          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    358            uint8 cmdId;
    359            uint8 retValue;
    360            uint8 reqType;
    361            uint8 startIndex;
    362            uint8 *pExtAddr;
    363          
    364            /* parse header */
    365            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   F5..         MOV     ?V0 + 0,A
    366            pBuf += MT_RPC_FRAME_HDR_SZ;
    367          
    368            /* parse parameters */
    369            pExtAddr = pBuf;
   \   000013   EA           MOV     A,R2
   \   000014   2403         ADD     A,#0x3
   \   000016   FE           MOV     R6,A
   \   000017   EB           MOV     A,R3
   \   000018   3400         ADDC    A,#0x0
   \   00001A   FF           MOV     R7,A
    370            pBuf += Z_EXTADDR_LEN;
   \   00001B   EE           MOV     A,R6
   \   00001C   2408         ADD     A,#0x8
   \   00001E   FA           MOV     R2,A
   \   00001F   EF           MOV     A,R7
   \   000020   3400         ADDC    A,#0x0
   \   000022   FB           MOV     R3,A
    371          
    372            /* Request type */
    373            reqType = *pBuf++;
   \   000023   12....       LCALL   ?Subroutine12 & 0xFFFF
    374          
    375            /* Start index */
    376            startIndex = *pBuf;
    377          
    378            retValue = (uint8)ZDP_NwkAddrReq(pExtAddr, reqType, startIndex, 0);
   \                     ??CrossCallReturnLabel_21:
   \   000026   12....       LCALL   ??ZDP_NwkAddrReq?relay
   \   000029                REQUIRE ?Subroutine50
   \   000029                ; // Fall through to label ?Subroutine50
    379          
    380            /* Build and send back the response */
    381            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    382          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine50:
   \   000000   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_68:
   \   000003   80..         SJMP    ??Subroutine55_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine55_0:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003                REQUIRE ??Subroutine56_0
   \   000003                ; // Fall through to label ??Subroutine56_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine20:
   \   000000   12....       LCALL   ?Subroutine34 & 0xFFFF
   \                     ??CrossCallReturnLabel_76:
   \   000003   7401         MOV     A,#0x1
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004   E0           MOVX    A,@DPTR
   \   000005   F9           MOV     R1,A
   \   000006   A3           INC     DPTR
   \   000007                ; Setup parameters for call to function ZDP_NwkAddrReq
   \   000007                ; Setup parameters for call to function ZDP_IEEEAddrReq
   \   000007   7D00         MOV     R5,#0x0
   \   000009   E0           MOVX    A,@DPTR
   \   00000A   FC           MOV     R4,A
   \   00000B   EE           MOV     A,R6
   \   00000C   FA           MOV     R2,A
   \   00000D   EF           MOV     A,R7
   \   00000E   FB           MOV     R3,A
   \   00000F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine46:
   \   000000   7965         MOV     R1,#0x65
   \   000002   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine42:
   \   000000   E9           MOV     A,R1
   \   000001   85..82       MOV     DPL,?XSP + 0
   \   000004   85..83       MOV     DPH,?XSP + 1
   \   000007   F0           MOVX    @DPTR,A
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000008   AC82         MOV     R4,DPL
   \   00000A   AD83         MOV     R5,DPH
   \   00000C   7B01         MOV     R3,#0x1
   \   00000E   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine34:
   \   000000   12....       LCALL   ?Subroutine42 & 0xFFFF
   \                     ??CrossCallReturnLabel_75:
   \   000003   AA..         MOV     R2,?V0 + 0
   \   000005   02....       LJMP    ?Subroutine46 & 0xFFFF
    383          
    384          /***************************************************************************************************
    385           * @fn      MT_ZdoIEEEAddrRequest
    386           *
    387           * @brief   Handle a IEEE address request.
    388           *
    389           * @param   pData  - MT message data
    390           *
    391           * @return  void
    392           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    393          void MT_ZdoIEEEAddrRequest (uint8 *pBuf)
   \                     MT_ZdoIEEEAddrRequest:
    394          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    395            uint8 cmdId;
    396            uint8 retValue;
    397            uint16 shortAddr;
    398            uint8 reqType;
    399            uint8 startIndex;
    400          
    401            /* parse header */
    402            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ?Subroutine5 & 0xFFFF
    403            pBuf += MT_RPC_FRAME_HDR_SZ;
    404          
    405            /* Dev address */
    406            shortAddr = BUILD_UINT16(pBuf[0], pBuf[1]);
    407            pBuf += 2;
    408          
    409            /* request type */
    410            reqType = *pBuf++;
   \                     ??CrossCallReturnLabel_13:
   \   00000D   12....       LCALL   ?Subroutine12 & 0xFFFF
    411          
    412            /* start index */
    413            startIndex = *pBuf;
    414          
    415            retValue = (uint8)ZDP_IEEEAddrReq(shortAddr, reqType, startIndex, 0);
   \                     ??CrossCallReturnLabel_22:
   \   000010   12....       LCALL   ??ZDP_IEEEAddrReq?relay
   \   000013   80..         SJMP    ?Subroutine50
    416            
    417            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    418          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine40:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004   E0           MOVX    A,@DPTR
   \   000005   FC           MOV     R4,A
   \   000006   A3           INC     DPTR
   \   000007   E0           MOVX    A,@DPTR
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004   A3           INC     DPTR
   \   000005   A3           INC     DPTR
   \   000006   E0           MOVX    A,@DPTR
   \   000007   F5..         MOV     ?V0 + 0,A
   \   000009   12....       LCALL   ?Subroutine28 & 0xFFFF
   \                     ??CrossCallReturnLabel_42:
   \   00000C   FE           MOV     R6,A
   \   00000D   E9           MOV     A,R1
   \   00000E   FF           MOV     R7,A
   \   00000F   12....       LCALL   ?Subroutine41 & 0xFFFF
   \                     ??CrossCallReturnLabel_104:
   \   000012   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine41:
   \   000000   EA           MOV     A,R2
   \   000001                REQUIRE ?Subroutine45
   \   000001                REQUIRE ??Subroutine62_0
   \   000001                ; // Fall through to label ??Subroutine62_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine62_0:
   \   000000   2402         ADD     A,#0x2
   \   000002                REQUIRE ?Subroutine45
   \   000002                ; // Fall through to label ?Subroutine45

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine45:
   \   000000   0A           INC     R2
   \   000001   0A           INC     R2
   \   000002   EB           MOV     A,R3
   \   000003   3400         ADDC    A,#0x0
   \   000005   FB           MOV     R3,A
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine39:
   \   000000   EA           MOV     A,R2
   \   000001   2403         ADD     A,#0x3
   \   000003   0A           INC     R2
   \   000004   80..         SJMP    ?Subroutine45

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine28:
   \   000000   12....       LCALL   ?Subroutine39 & 0xFFFF
   \                     ??CrossCallReturnLabel_101:
   \   000003                ; Setup parameters for call to function ZDO_RegisterForZDOMsg
   \   000003                ; Setup parameters for call to function ZDO_RemoveRegisteredCB
   \   000003   12....       LCALL   ?Subroutine40 & 0xFFFF
   \                     ??CrossCallReturnLabel_61:
   \   000006   F9           MOV     R1,A
   \   000007   EC           MOV     A,R4
   \   000008   22           RET
    419          
    420          /***************************************************************************************************
    421           * @fn      MT_ZdoNodeDescRequest
    422           *
    423           * @brief   Handle a Node Descriptor request.
    424           *
    425           * @param   pData  - MT message data
    426           *
    427           * @return  void
    428           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine53_0:
   \   000000   12....       LCALL   ?XSTACK_DISP0_8
   \   000003   12....       LCALL   ?Subroutine26 & 0xFFFF
   \                     ??CrossCallReturnLabel_71:
   \   000006                REQUIRE ??Subroutine54_0
   \   000006                ; // Fall through to label ??Subroutine54_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine54_0:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_72:
   \   000006                REQUIRE ??Subroutine55_0
   \   000006                ; // Fall through to label ??Subroutine55_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    429          void MT_ZdoNodeDescRequest (uint8 *pBuf)
   \                     MT_ZdoNodeDescRequest:
    430          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    431            uint8 cmdId;
    432            uint8 retValue;
    433            zAddrType_t destAddr;
    434            uint16 shortAddr;
    435          
    436            /* parse header */
    437            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ??Subroutine59_0 & 0xFFFF
    438            pBuf += MT_RPC_FRAME_HDR_SZ;
    439          
    440            /* Destination address */
    441            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_89:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine1 & 0xFFFF
    442            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_0:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine15 & 0xFFFF
    443            pBuf += 2;
    444          
    445            /* Network address of interest */
    446            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    447            pBuf += 2;
    448          
    449            retValue = (uint8)ZDP_NodeDescReq( &destAddr, shortAddr, 0);
   \                     ??CrossCallReturnLabel_27:
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00001C   7902         MOV     R1,#0x2
   \   00001E   12....       LCALL   ?Subroutine40 & 0xFFFF
   \                     ??CrossCallReturnLabel_57:
   \   000021   FD           MOV     R5,A
   \   000022   E9           MOV     A,R1
   \   000023   80..         SJMP    ??Subroutine53_0
    450          
    451            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    452          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine26:
   \   000000   AA82         MOV     R2,DPL
   \   000002   AB83         MOV     R3,DPH
   \   000004   12....       LCALL   ??ZDP_NWKAddrOfInterestReq?relay
   \   000007   7401         MOV     A,#0x1
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine19:
   \   000000   12....       LCALL   ?Subroutine35 & 0xFFFF
   \                     ??CrossCallReturnLabel_78:
   \   000003   740A         MOV     A,#0xa
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   12....       LCALL   ?Subroutine33 & 0xFFFF
   \                     ??CrossCallReturnLabel_84:
   \   000003                ; Setup parameters for call to function ZDP_NWKAddrOfInterestReq
   \   000003                ; Setup parameters for call to function ZDP_NWKAddrOfInterestReq
   \   000003                ; Setup parameters for call to function ZDP_SimpleDescReq
   \   000003                ; Setup parameters for call to function ZDP_NWKAddrOfInterestReq
   \   000003                ; Setup parameters for call to function ZDP_NWKAddrOfInterestReq
   \   000003                ; Setup parameters for call to function ZDP_NWKAddrOfInterestReq
   \   000003   75..00       MOV     ?V0 + 0,#0x0
   \   000006   78..         MOV     R0,#?V0 + 0
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine33:
   \   000000   E8           MOV     A,R0
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   E9           MOV     A,R1
   \   000004                REQUIRE ??Subroutine57_0
   \   000004                ; // Fall through to label ??Subroutine57_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine57_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   12....       LCALL   ?Subroutine41 & 0xFFFF
   \                     ??CrossCallReturnLabel_105:
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   7402         MOV     A,#0x2
   \   000002   F0           MOVX    @DPTR,A
   \   000003   12....       LCALL   ?Subroutine40 & 0xFFFF
   \                     ??CrossCallReturnLabel_59:
   \   000006   F9           MOV     R1,A
   \   000007   EC           MOV     A,R4
   \   000008   F8           MOV     R0,A
   \   000009   7401         MOV     A,#0x1
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine59_0:
   \   000000   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_95:
   \   000003   7409         MOV     A,#0x9
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine35:
   \   000000   12....       LCALL   ?Subroutine42 & 0xFFFF
   \                     ??CrossCallReturnLabel_74:
   \   000003   EE           MOV     A,R6
   \   000004   FA           MOV     R2,A
   \   000005                REQUIRE ?Subroutine46
   \   000005                ; // Fall through to label ?Subroutine46

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine29:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004   A3           INC     DPTR
   \   000005   A3           INC     DPTR
   \   000006   E0           MOVX    A,@DPTR
   \   000007   FE           MOV     R6,A
   \   000008                ; Setup parameters for call to function ZDSecMgrDeviceRemoveByExtAddr
   \   000008   12....       LCALL   ?Subroutine39 & 0xFFFF
   \                     ??CrossCallReturnLabel_102:
   \   00000B   22           RET
    453          
    454          /***************************************************************************************************
    455           * @fn      MT_ZdoPowerDescRequest
    456           *
    457           * @brief   Handle a Power Descriptor request.
    458           *
    459           * @param   pData  - MT message data
    460           *
    461           * @return  void
    462           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine43:
   \   000000   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_56:
   \   000003                REQUIRE ??Subroutine53_0
   \   000003                ; // Fall through to label ??Subroutine53_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    463          void MT_ZdoPowerDescRequest(uint8 *pBuf)
   \                     MT_ZdoPowerDescRequest:
    464          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    465            uint8 cmdId;
    466            uint8 retValue;
    467            zAddrType_t destAddr;
    468            uint16 shortAddr;
    469          
    470            /* parse header */
    471            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ??Subroutine59_0 & 0xFFFF
    472            pBuf += MT_RPC_FRAME_HDR_SZ;
    473          
    474            /* Dev address */
    475            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_90:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine1 & 0xFFFF
    476            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_1:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine15 & 0xFFFF
    477            pBuf += 2;
    478          
    479            /* Network address of interest */
    480            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    481            pBuf += 2;
    482          
    483            retValue = (uint8)ZDP_PowerDescReq( &destAddr, shortAddr, 0);
   \                     ??CrossCallReturnLabel_28:
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00001C   7903         MOV     R1,#0x3
   \   00001E   80..         SJMP    ?Subroutine43
    484          
    485            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    486          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   12....       LCALL   ?Subroutine40 & 0xFFFF
   \                     ??CrossCallReturnLabel_62:
   \   000003   FD           MOV     R5,A
   \   000004   7402         MOV     A,#0x2
   \   000006   22           RET
    487          
    488          /***************************************************************************************************
    489           * @fn      MT_ZdoSimpleDescRequest
    490           *
    491           * @brief   Handle a Simple Descriptor request.
    492           *
    493           * @param   pBuf  - MT message data
    494           *
    495           * @return  void
    496           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    497          void MT_ZdoSimpleDescRequest(uint8 *pBuf)
   \                     MT_ZdoSimpleDescRequest:
    498          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    499            uint8 cmdId;
    500            uint8 retValue;
    501            uint8 epInt;
    502            zAddrType_t destAddr;
    503            uint16 shortAddr;
    504          
    505            /* parse header */
    506            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ??Subroutine59_0 & 0xFFFF
    507            pBuf += MT_RPC_FRAME_HDR_SZ;
    508          
    509            /* Dev address */
    510            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_91:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine1 & 0xFFFF
    511            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_2:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine15 & 0xFFFF
    512            pBuf += 2;
    513          
    514            /* Network address of interest */
    515            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    516            pBuf += 2;
    517          
    518            /* endpoint/interface */
    519            epInt = *pBuf++;
    520          
    521            retValue = (uint8)ZDP_SimpleDescReq( &destAddr, shortAddr, epInt, 0);
   \                     ??CrossCallReturnLabel_29:
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00001C   8A82         MOV     DPL,R2
   \   00001E   8B83         MOV     DPH,R3
   \   000020   A3           INC     DPTR
   \   000021   A3           INC     DPTR
   \   000022   E0           MOVX    A,@DPTR
   \   000023   F9           MOV     R1,A
   \   000024   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_55:
   \   000027   12....       LCALL   ?XSTACK_DISP0_8
   \   00002A   AA82         MOV     R2,DPL
   \   00002C   AB83         MOV     R3,DPH
   \   00002E   12....       LCALL   ??ZDP_SimpleDescReq?relay
   \   000031   7401         MOV     A,#0x1
   \   000033   02....       LJMP    ??Subroutine54_0 & 0xFFFF
    522          
    523            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    524          }
    525          
    526          /***************************************************************************************************
    527           * @fn      MT_ZdoActiveEpRequest
    528           *
    529           * @brief   Handle a Active EP request.
    530           *
    531           * @param   pBuf  - MT message data
    532           *
    533           * @return  void
    534           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    535          void MT_ZdoActiveEpRequest(uint8 *pBuf)
   \                     MT_ZdoActiveEpRequest:
    536          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    537            uint8 cmdId;
    538            uint8 retValue;
    539            zAddrType_t destAddr;
    540            uint16 shortAddr;
    541          
    542            /* parse header */
    543            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ??Subroutine59_0 & 0xFFFF
    544            pBuf += MT_RPC_FRAME_HDR_SZ;
    545          
    546            /* Dev address */
    547            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_92:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine1 & 0xFFFF
    548            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_3:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine15 & 0xFFFF
    549            pBuf += 2;
    550          
    551            /* Network address of interest */
    552            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    553            pBuf += 2;
    554          
    555            retValue = (uint8)ZDP_ActiveEPReq( &destAddr, shortAddr, 0);
   \                     ??CrossCallReturnLabel_30:
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00001C   7905         MOV     R1,#0x5
   \   00001E   02....       LJMP    ?Subroutine43 & 0xFFFF
    556          
    557            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    558          }
    559          
    560          /***************************************************************************************************
    561           * @fn      MT_ZdoMatchDescRequest
    562           *
    563           * @brief   Handle a Match Descriptor request.
    564           *
    565           * @param   pBuf  - MT message data
    566           *
    567           * @return  void
    568           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    569          void MT_ZdoMatchDescRequest(uint8 *pBuf)
   \                     MT_ZdoMatchDescRequest:
    570          {
   \   000000   74F1         MOV     A,#-0xf
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 15
   \   000005                ; Auto size: 74
   \   000005   74B6         MOV     A,#-0x4a
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    571            uint8 cmdId;
    572            uint8 retValue = 0;
   \   00000A   12....       LCALL   ?Subroutine0 & 0xFFFF
    573            uint8 i, numInClusters, numOutClusters;
    574            uint16 profileId;
    575            zAddrType_t destAddr;
    576            uint16 shortAddr;
    577            uint16 inClusters[MTZDO_MAX_MATCH_CLUSTERS], outClusters[MTZDO_MAX_MATCH_CLUSTERS];
    578          
    579            /* parse header */
    580            cmdId = pBuf[MT_RPC_POS_CMD1];
    581            pBuf += MT_RPC_FRAME_HDR_SZ;
    582          
    583            /* Dev address */
    584            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_87:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine1 & 0xFFFF
    585            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_4:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine16 & 0xFFFF
    586            pBuf += 2;
    587          
    588            /* Network address of interest */
    589            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    590            pBuf += 2;
   \                     ??CrossCallReturnLabel_33:
   \   000019   12....       LCALL   ?Subroutine36 & 0xFFFF
    591          
    592            /* Profile ID */
    593            profileId = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_49:
   \   00001C   12....       LCALL   ?Subroutine6 & 0xFFFF
    594            pBuf += 2;
    595          
    596            /* NumInClusters */
    597            numInClusters = *pBuf++;
   \                     ??CrossCallReturnLabel_15:
   \   00001F   FF           MOV     R7,A
   \   000020   A3           INC     DPTR
   \   000021   AA82         MOV     R2,DPL
   \   000023   AB83         MOV     R3,DPH
    598            if ( numInClusters <= MTZDO_MAX_MATCH_CLUSTERS )
   \   000025   C3           CLR     C
   \   000026   9411         SUBB    A,#0x11
   \   000028   5015         JNC     ??MT_ZdoMatchDescRequest_0
    599            {
    600              /* IN clusters */
    601              for ( i = 0; i < numInClusters; i++ )
   \   00002A   88..         MOV     ?V0 + 2,R0
   \                     ??MT_ZdoMatchDescRequest_1:
   \   00002C   E5..         MOV     A,?V0 + 2
   \   00002E   C3           CLR     C
   \   00002F   9F           SUBB    A,R7
   \   000030   5016         JNC     ??MT_ZdoMatchDescRequest_2
    602              {
    603                inClusters[i] = BUILD_UINT16( pBuf[0], pBuf[1]);
   \   000032   12....       LCALL   ?Subroutine8 & 0xFFFF
    604                pBuf += 2;
    605              }
    606            }
   \                     ??CrossCallReturnLabel_63:
   \   000035   742A         MOV     A,#0x2a
   \   000037   12....       LCALL   ?XSTACK_DISP0_8
   \   00003A   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_80:
   \   00003D   80ED         SJMP    ??MT_ZdoMatchDescRequest_1
    607            else
    608            {
    609              retValue = ZDP_INVALID_REQTYPE;
   \                     ??MT_ZdoMatchDescRequest_0:
   \   00003F   7480         MOV     A,#-0x80
   \   000041   85..82       MOV     DPL,?XSP + 0
   \   000044   85..83       MOV     DPH,?XSP + 1
   \   000047   F0           MOVX    @DPTR,A
    610            }
    611          
    612            /* NumOutClusters */
    613            numOutClusters = *pBuf++;
   \                     ??MT_ZdoMatchDescRequest_2:
   \   000048   8A82         MOV     DPL,R2
   \   00004A   8B83         MOV     DPH,R3
   \   00004C   E0           MOVX    A,@DPTR
   \   00004D   F5..         MOV     ?V0 + 6,A
   \   00004F   A3           INC     DPTR
   \   000050   AA82         MOV     R2,DPL
   \   000052   AB83         MOV     R3,DPH
    614            if ( numOutClusters <= MTZDO_MAX_MATCH_CLUSTERS )
   \   000054   C3           CLR     C
   \   000055   9411         SUBB    A,#0x11
   \   000057   5017         JNC     ??MT_ZdoMatchDescRequest_3
    615            {
    616              /* OUT Clusters */
    617              for ( i = 0; i < numOutClusters; i++ )
   \   000059   75..00       MOV     ?V0 + 2,#0x0
   \                     ??MT_ZdoMatchDescRequest_4:
   \   00005C   E5..         MOV     A,?V0 + 2
   \   00005E   C3           CLR     C
   \   00005F   95..         SUBB    A,?V0 + 6
   \   000061   5011         JNC     ??MT_ZdoMatchDescRequest_5
    618              {
    619                outClusters[i] = BUILD_UINT16( pBuf[0], pBuf[1]);
   \   000063   12....       LCALL   ?Subroutine8 & 0xFFFF
    620                pBuf += 2;
    621              }
    622            }
   \                     ??CrossCallReturnLabel_64:
   \   000066   740A         MOV     A,#0xa
   \   000068   12....       LCALL   ?XSTACK_DISP0_8
   \   00006B   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_81:
   \   00006E   80EC         SJMP    ??MT_ZdoMatchDescRequest_4
    623            else
    624            {
    625              retValue = ZDP_INVALID_REQTYPE;
   \                     ??MT_ZdoMatchDescRequest_3:
   \   000070   7480         MOV     A,#-0x80
   \   000072   8053         SJMP    ??MT_ZdoMatchDescRequest_6
    626            }
    627          
    628            if ( retValue == 0 )
   \                     ??MT_ZdoMatchDescRequest_5:
   \   000074   85..82       MOV     DPL,?XSP + 0
   \   000077   85..83       MOV     DPH,?XSP + 1
   \   00007A   E0           MOVX    A,@DPTR
   \   00007B   7051         JNZ     ??MT_ZdoMatchDescRequest_7
    629            {
    630              retValue = (uint8)ZDP_MatchDescReq( &destAddr, shortAddr, profileId, numInClusters,
    631                                                 inClusters, numOutClusters, outClusters, 0);
   \   00007D                ; Setup parameters for call to function ZDP_MatchDescReq
   \   00007D   75..00       MOV     ?V0 + 2,#0x0
   \   000080   78..         MOV     R0,#?V0 + 2
   \   000082   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000085   740B         MOV     A,#0xb
   \   000087   12....       LCALL   ?XSTACK_DISP0_8
   \   00008A   8582..       MOV     ?V0 + 2,DPL
   \   00008D   8583..       MOV     ?V0 + 3,DPH
   \   000090   78..         MOV     R0,#?V0 + 2
   \   000092   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000095   E5..         MOV     A,?V0 + 6
   \   000097   F5..         MOV     ?V0 + 2,A
   \   000099   78..         MOV     R0,#?V0 + 2
   \   00009B   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00009E   742E         MOV     A,#0x2e
   \   0000A0   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A3   8582..       MOV     ?V0 + 2,DPL
   \   0000A6   8583..       MOV     ?V0 + 3,DPH
   \   0000A9   78..         MOV     R0,#?V0 + 2
   \   0000AB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000AE   78..         MOV     R0,#?V0 + 0
   \   0000B0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000B3   EF           MOV     A,R7
   \   0000B4   F9           MOV     R1,A
   \   0000B5   7409         MOV     A,#0x9
   \   0000B7   12....       LCALL   ?XSTACK_DISP0_8
   \   0000BA   AA82         MOV     R2,DPL
   \   0000BC   AB83         MOV     R3,DPH
   \   0000BE   12....       LCALL   ??ZDP_MatchDescReq?relay
   \   0000C1   7408         MOV     A,#0x8
   \   0000C3   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000C6   E9           MOV     A,R1
   \                     ??MT_ZdoMatchDescRequest_6:
   \   0000C7   85..82       MOV     DPL,?XSP + 0
   \   0000CA   85..83       MOV     DPH,?XSP + 1
   \   0000CD   F0           MOVX    @DPTR,A
    632            }
    633          
    634            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \                     ??MT_ZdoMatchDescRequest_7:
   \   0000CE                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   0000CE   AC82         MOV     R4,DPL
   \   0000D0   AD83         MOV     R5,DPH
   \   0000D2   7B01         MOV     R3,#0x1
   \   0000D4   EE           MOV     A,R6
   \   0000D5   FA           MOV     R2,A
   \   0000D6   7965         MOV     R1,#0x65
   \   0000D8   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    635          }
   \   0000DB   744A         MOV     A,#0x4a
   \   0000DD                REQUIRE ?Subroutine47
   \   0000DD                ; // Fall through to label ?Subroutine47

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine47:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   7F07         MOV     R7,#0x7
   \   000005   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine18:
   \   000000   12....       LCALL   ?Subroutine38 & 0xFFFF
   \                     ??CrossCallReturnLabel_53:
   \   000003   E5..         MOV     A,?V0 + 4
   \   000005   F0           MOVX    @DPTR,A
   \   000006   A3           INC     DPTR
   \   000007   E5..         MOV     A,?V0 + 5
   \   000009                REQUIRE ??Subroutine58_0
   \   000009                ; // Fall through to label ??Subroutine58_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine58_0:
   \   000000   12....       LCALL   ??Subroutine57_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_86:
   \   000003   05..         INC     ?V0 + 2
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004   E0           MOVX    A,@DPTR
   \   000005   F5..         MOV     ?V0 + 4,A
   \   000007   A3           INC     DPTR
   \   000008   E0           MOVX    A,@DPTR
   \   000009   F9           MOV     R1,A
   \   00000A   E4           CLR     A
   \   00000B   25..         ADD     A,?V0 + 4
   \   00000D   E9           MOV     A,R1
   \   00000E   F5..         MOV     ?V0 + 5,A
   \   000010                REQUIRE ?Subroutine44
   \   000010                ; // Fall through to label ?Subroutine44

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine44:
   \   000000   E5..         MOV     A,?V0 + 2
   \   000002   33           RLC     A
   \   000003   F8           MOV     R0,A
   \   000004   E4           CLR     A
   \   000005   33           RLC     A
   \   000006   F9           MOV     R1,A
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   E4           CLR     A
   \   000001   85..82       MOV     DPL,?XSP + 0
   \   000004   85..83       MOV     DPH,?XSP + 1
   \   000007   F0           MOVX    @DPTR,A
   \   000008                REQUIRE ??Subroutine59_0
   \   000008                ; // Fall through to label ??Subroutine59_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine38:
   \   000000   E582         MOV     A,DPL
   \   000002   28           ADD     A,R0
   \   000003   F582         MOV     DPL,A
   \   000005   E583         MOV     A,DPH
   \   000007   39           ADDC    A,R1
   \   000008   F583         MOV     DPH,A
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   12....       LCALL   ?Subroutine33 & 0xFFFF
   \                     ??CrossCallReturnLabel_85:
   \   000003   12....       LCALL   ?Subroutine40 & 0xFFFF
   \                     ??CrossCallReturnLabel_60:
   \   000006   FD           MOV     R5,A
   \   000007   EA           MOV     A,R2
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F5..         MOV     ?V0 + 0,A
   \   000003   A3           INC     DPTR
   \   000004   E0           MOVX    A,@DPTR
   \   000005   F8           MOV     R0,A
   \   000006   E4           CLR     A
   \   000007   C8           XCH     A,R0
   \   000008   F5..         MOV     ?V0 + 1,A
   \   00000A   EA           MOV     A,R2
   \   00000B   12....       LCALL   ?Subroutine36 & 0xFFFF
   \                     ??CrossCallReturnLabel_50:
   \   00000E   E0           MOVX    A,@DPTR
   \   00000F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine36:
   \   000000   12....       LCALL   ??Subroutine62_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_103:
   \   000003   8A82         MOV     DPL,R2
   \   000005   8B83         MOV     DPH,R3
   \   000007   22           RET
    636          
    637          /***************************************************************************************************
    638           * @fn      MT_ZdoComplexDescRequest
    639           *
    640           * @brief   Handle a Complex Descriptor request.
    641           *
    642           * @param   pBuf  - MT message data
    643           *
    644           * @return  void
    645           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    646          void MT_ZdoComplexDescRequest(uint8 *pBuf)
   \                     MT_ZdoComplexDescRequest:
    647          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    648            uint8 cmdId;
    649            uint8 retValue;
    650            zAddrType_t destAddr;
    651            uint16 shortAddr;
    652          
    653            /* parse header */
    654            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ??Subroutine59_0 & 0xFFFF
    655            pBuf += MT_RPC_FRAME_HDR_SZ;
    656          
    657            /* Dev address */
    658            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_93:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine1 & 0xFFFF
    659            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_5:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine15 & 0xFFFF
    660            pBuf += 2;
    661          
    662            /* Network address of interest */
    663            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    664            pBuf += 2;
    665          
    666            retValue = (uint8)ZDP_ComplexDescReq( &destAddr, shortAddr, 0);
   \                     ??CrossCallReturnLabel_31:
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00001C   7910         MOV     R1,#0x10
   \   00001E   02....       LJMP    ?Subroutine43 & 0xFFFF
    667          
    668            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    669          }
    670          
    671          /***************************************************************************************************
    672           * @fn      MT_ZdoUserDescRequest
    673           *
    674           * @brief   Handle a User Descriptor request.
    675           *
    676           * @param   pBuf  - MT message data
    677           *
    678           * @return  void
    679           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    680          void MT_ZdoUserDescRequest(uint8 *pBuf)
   \                     MT_ZdoUserDescRequest:
    681          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    682            uint8 cmdId;
    683            uint8 retValue;
    684            zAddrType_t destAddr;
    685            uint16 shortAddr;
    686          
    687            /* parse header */
    688            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ??Subroutine59_0 & 0xFFFF
    689            pBuf += MT_RPC_FRAME_HDR_SZ;
    690          
    691            /* Dev address */
    692            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_94:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine1 & 0xFFFF
    693            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1]);
   \                     ??CrossCallReturnLabel_6:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine15 & 0xFFFF
    694            pBuf += 2;
    695          
    696            /* Network address of interest */
    697            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1]);
    698            pBuf += 2;
    699          
    700            retValue = (uint8)ZDP_UserDescReq( &destAddr, shortAddr, 0);
   \                     ??CrossCallReturnLabel_32:
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00001C   7911         MOV     R1,#0x11
   \   00001E   02....       LJMP    ?Subroutine43 & 0xFFFF
    701          
    702            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    703          }
    704          
    705          /***************************************************************************************************
    706           * @fn      MT_ZdoEndDevAnnce
    707           *
    708           * @brief   Handle a End Device Announce Descriptor request.
    709           *
    710           * @param   pBuf  - MT message data
    711           *
    712           * @return  void
    713           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    714          void MT_ZdoEndDevAnnce(uint8 *pBuf)
   \                     MT_ZdoEndDevAnnce:
    715          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FC           MOV     R4,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FD           MOV     R5,A
    716            uint8 cmdId;
    717            uint8 retValue;
    718            uint16 shortAddr;
    719            uint8 *pIEEEAddr;
    720          
    721            /* parse header */
    722            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000E   8C82         MOV     DPL,R4
   \   000010   8D83         MOV     DPH,R5
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   E0           MOVX    A,@DPTR
   \   000015   FE           MOV     R6,A
    723            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000016   EC           MOV     A,R4
   \   000017   2403         ADD     A,#0x3
   \   000019   0C           INC     R4
   \   00001A   0C           INC     R4
   \   00001B   0C           INC     R4
   \   00001C   ED           MOV     A,R5
   \   00001D   3400         ADDC    A,#0x0
   \   00001F   FD           MOV     R5,A
    724          
    725            /* network address */
    726            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   000020   8C82         MOV     DPL,R4
   \   000022   8D83         MOV     DPH,R5
   \   000024   E0           MOVX    A,@DPTR
   \   000025   FA           MOV     R2,A
   \   000026   A3           INC     DPTR
   \   000027   E0           MOVX    A,@DPTR
   \   000028   F8           MOV     R0,A
   \   000029   E4           CLR     A
   \   00002A   C8           XCH     A,R0
   \   00002B   FB           MOV     R3,A
    727            pBuf += 2;
   \   00002C   EC           MOV     A,R4
   \   00002D   2402         ADD     A,#0x2
   \   00002F   0C           INC     R4
   \   000030   0C           INC     R4
   \   000031   ED           MOV     A,R5
   \   000032   3400         ADDC    A,#0x0
   \   000034   FD           MOV     R5,A
    728          
    729            /* extended address */
    730            pIEEEAddr = pBuf;
    731            pBuf += Z_EXTADDR_LEN;
    732          
    733            retValue = (uint8)ZDP_DeviceAnnce( shortAddr, pIEEEAddr, *pBuf, 0);
   \   000035                ; Setup parameters for call to function ZDP_DeviceAnnce
   \   000035   88..         MOV     ?V0 + 0,R0
   \   000037   78..         MOV     R0,#?V0 + 0
   \   000039   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00003C   8C82         MOV     DPL,R4
   \   00003E   8D83         MOV     DPH,R5
   \   000040   A3           INC     DPTR
   \   000041   A3           INC     DPTR
   \   000042   A3           INC     DPTR
   \   000043   A3           INC     DPTR
   \   000044   A3           INC     DPTR
   \   000045   A3           INC     DPTR
   \   000046   A3           INC     DPTR
   \   000047   A3           INC     DPTR
   \   000048   E0           MOVX    A,@DPTR
   \   000049   F9           MOV     R1,A
   \   00004A   12....       LCALL   ??ZDP_DeviceAnnce?relay
   \   00004D   7401         MOV     A,#0x1
   \   00004F   12....       LCALL   ?DEALLOC_XSTACK8
   \   000052                REQUIRE ?Subroutine51
   \   000052                ; // Fall through to label ?Subroutine51
    734          
    735            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    736          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine51:
   \   000000   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_70:
   \   000003   02....       LJMP    ??Subroutine55_0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine21:
   \   000000   12....       LCALL   ?Subroutine35 & 0xFFFF
   \                     ??CrossCallReturnLabel_79:
   \   000003   7401         MOV     A,#0x1
   \   000005   22           RET
    737          
    738          /***************************************************************************************************
    739           * @fn      MT_ZdoUserDescSet
    740           *
    741           * @brief   Handle a User Descriptor Set.
    742           *
    743           * @param   pBuf  - MT message data
    744           *
    745           * @return  void
    746           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    747          void MT_ZdoUserDescSet(uint8 *pBuf)
   \                     MT_ZdoUserDescSet:
    748          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 27
   \   000005   74E5         MOV     A,#-0x1b
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    749            uint8 cmdId;
    750            uint8 retValue;
    751            zAddrType_t destAddr;
    752            uint16 shortAddr;
    753            UserDescriptorFormat_t userDesc;
    754          
    755            /* parse header */
    756            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   F5..         MOV     ?V0 + 3,A
    757            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000013   12....       LCALL   ?Subroutine39 & 0xFFFF
    758          
    759            /* Dev address */
    760            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_100:
   \   000016   7409         MOV     A,#0x9
   \   000018   12....       LCALL   ?XSTACK_DISP0_8
   \   00001B   12....       LCALL   ?Subroutine1 & 0xFFFF
    761            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_7:
   \   00001E   12....       LCALL   ?XSTACK_DISP0_8
   \   000021   E8           MOV     A,R0
   \   000022   F0           MOVX    @DPTR,A
   \   000023   A3           INC     DPTR
   \   000024   E9           MOV     A,R1
   \   000025   F0           MOVX    @DPTR,A
    762            pBuf += 2;
   \   000026   12....       LCALL   ?Subroutine17 & 0xFFFF
    763          
    764            /* Network address of interest */
    765            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_97:
   \   000029   FC           MOV     R4,A
   \   00002A   A3           INC     DPTR
   \   00002B   E0           MOVX    A,@DPTR
   \   00002C   F8           MOV     R0,A
   \   00002D   E4           CLR     A
   \   00002E   C8           XCH     A,R0
   \   00002F   F9           MOV     R1,A
   \   000030   EC           MOV     A,R4
   \   000031   FE           MOV     R6,A
   \   000032   E9           MOV     A,R1
   \   000033   FF           MOV     R7,A
    766            pBuf += 2;
   \   000034   12....       LCALL   ?Subroutine17 & 0xFFFF
    767          
    768            /* User descriptor */
    769            userDesc.len = *pBuf++;
   \                     ??CrossCallReturnLabel_98:
   \   000037   C0E0         PUSH    A
   \   000039   740A         MOV     A,#0xa
   \   00003B   12....       LCALL   ?XSTACK_DISP0_8
   \   00003E   D0E0         POP     A
   \   000040   F0           MOVX    @DPTR,A
   \   000041   8A82         MOV     DPL,R2
   \   000043   8B83         MOV     DPH,R3
   \   000045   A3           INC     DPTR
   \   000046   AA82         MOV     R2,DPL
   \   000048   AB83         MOV     R3,DPH
    770            osal_memcpy( userDesc.desc, pBuf, userDesc.len );
   \   00004A                ; Setup parameters for call to function osal_memcpy
   \   00004A   8A..         MOV     ?V0 + 0,R2
   \   00004C   8B..         MOV     ?V0 + 1,R3
   \   00004E   88..         MOV     ?V0 + 2,R0
   \   000050   78..         MOV     R0,#?V0 + 0
   \   000052   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000055   740D         MOV     A,#0xd
   \   000057   12....       LCALL   ?XSTACK_DISP0_8
   \   00005A   E0           MOVX    A,@DPTR
   \   00005B   FC           MOV     R4,A
   \   00005C   7D00         MOV     R5,#0x0
   \   00005E   740E         MOV     A,#0xe
   \   000060   12....       LCALL   ?XSTACK_DISP0_8
   \   000063   AA82         MOV     R2,DPL
   \   000065   AB83         MOV     R3,DPH
   \   000067   12....       LCALL   ??Subroutine63_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_108:
   \   00006A   12....       LCALL   ?DEALLOC_XSTACK8
    771            pBuf += 16;
    772          
    773            retValue = (uint8)ZDP_UserDescSet( &destAddr, shortAddr, &userDesc, 0);
   \   00006D                ; Setup parameters for call to function ZDP_UserDescSet
   \   00006D   740A         MOV     A,#0xa
   \   00006F   12....       LCALL   ?XSTACK_DISP0_8
   \   000072   8582..       MOV     ?V0 + 0,DPL
   \   000075   8583..       MOV     ?V0 + 1,DPH
   \   000078   78..         MOV     R0,#?V0 + 0
   \   00007A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00007D   7900         MOV     R1,#0x0
   \   00007F   EE           MOV     A,R6
   \   000080   FC           MOV     R4,A
   \   000081   EF           MOV     A,R7
   \   000082   FD           MOV     R5,A
   \   000083   7403         MOV     A,#0x3
   \   000085   12....       LCALL   ?XSTACK_DISP0_8
   \   000088   AA82         MOV     R2,DPL
   \   00008A   AB83         MOV     R3,DPH
   \   00008C   12....       LCALL   ??ZDP_UserDescSet?relay
   \   00008F   7402         MOV     A,#0x2
   \   000091   12....       LCALL   ?DEALLOC_XSTACK8
   \   000094   12....       LCALL   ?Subroutine42 & 0xFFFF
    774          
    775            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \                     ??CrossCallReturnLabel_73:
   \   000097   AA..         MOV     R2,?V0 + 3
   \   000099   7965         MOV     R1,#0x65
   \   00009B   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    776          }
   \   00009E   741B         MOV     A,#0x1b
   \   0000A0                REQUIRE ?Subroutine48
   \   0000A0                ; // Fall through to label ?Subroutine48

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine48:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   7F04         MOV     R7,#0x4
   \   000005   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine17:
   \   000000   EA           MOV     A,R2
   \   000001   2402         ADD     A,#0x2
   \   000003   0A           INC     R2
   \   000004   0A           INC     R2
   \   000005                REQUIRE ??Subroutine60_0
   \   000005                ; // Fall through to label ??Subroutine60_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine60_0:
   \   000000   EB           MOV     A,R3
   \   000001   3400         ADDC    A,#0x0
   \   000003   FB           MOV     R3,A
   \   000004   8A82         MOV     DPL,R2
   \   000006   8B83         MOV     DPH,R3
   \   000008   E0           MOVX    A,@DPTR
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine63_0:
   \   000000   12....       LCALL   ??osal_memcpy?relay
   \   000003   7403         MOV     A,#0x3
   \   000005   22           RET
    777          
    778          /***************************************************************************************************
    779           * @fn      MT_ZdoServiceDiscRequest
    780           *
    781           * @brief   Handle a Server Discovery request.
    782           *
    783           * @param   pBuf  - MT message data
    784           *
    785           * @return  void
    786           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    787          void MT_ZdoServiceDiscRequest(uint8 *pBuf)
   \                     MT_ZdoServiceDiscRequest:
    788          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    789            uint8 cmdId;
    790            uint8 retValue;
    791            uint16 serviceMask;
    792          
    793            /* parse header */
    794            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ?Subroutine11 & 0xFFFF
    795            pBuf += MT_RPC_FRAME_HDR_SZ;
    796          
    797            /* Service Mask */
    798            serviceMask = BUILD_UINT16( pBuf[0], pBuf[1]);
    799            pBuf += 2;
    800          
    801            retValue = (uint8)ZDP_ServerDiscReq( serviceMask, 0);
   \                     ??CrossCallReturnLabel_19:
   \   00000D                ; Setup parameters for call to function ZDP_ServerDiscReq
   \   00000D   7900         MOV     R1,#0x0
   \   00000F   12....       LCALL   ?Subroutine40 & 0xFFFF
   \                     ??CrossCallReturnLabel_58:
   \   000012   FB           MOV     R3,A
   \   000013   EC           MOV     A,R4
   \   000014   FA           MOV     R2,A
   \   000015   12....       LCALL   ??ZDP_ServerDiscReq?relay
   \   000018   02....       LJMP    ?Subroutine51 & 0xFFFF
    802          
    803            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    804          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_96:
   \   000003   22           RET
    805          
    806          /***************************************************************************************************
    807           * @fn      MT_ZdoEndDevBindRequest
    808           *
    809           * @brief   Handle a End Device Bind request.
    810           *
    811           * @param   pBuf  - MT message data
    812           *
    813           * @return  void
    814           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    815          void MT_ZdoEndDevBindRequest(uint8 *pBuf)
   \                     MT_ZdoEndDevBindRequest:
    816          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 70
   \   000005   74BA         MOV     A,#-0x46
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    817            uint8 cmdId;
    818            uint8 retValue = 0;
   \   00000A   12....       LCALL   ?Subroutine0 & 0xFFFF
    819            uint8 i, epInt, numInClusters, numOutClusters;
    820            zAddrType_t destAddr;
    821            uint16 shortAddr;
    822            uint16 profileID, inClusters[MTZDO_MAX_ED_BIND_CLUSTERS], outClusters[MTZDO_MAX_ED_BIND_CLUSTERS];
    823          
    824            /* parse header */
    825            cmdId = pBuf[MT_RPC_POS_CMD1];
    826            pBuf += MT_RPC_FRAME_HDR_SZ;
    827          
    828            /* Dev address */
    829            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_88:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine1 & 0xFFFF
    830            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_8:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine16 & 0xFFFF
    831            pBuf += 2;
    832          
    833            /* Local coordinator of the binding */
    834            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
    835            pBuf += 2;
    836            
    837            /* For now, skip past the extended address */
    838            pBuf += Z_EXTADDR_LEN;
   \                     ??CrossCallReturnLabel_34:
   \   000019   240A         ADD     A,#0xa
   \   00001B   FA           MOV     R2,A
   \   00001C   12....       LCALL   ??Subroutine60_0 & 0xFFFF
    839          
    840            /* Endpoint */
    841            epInt = *pBuf++;
   \                     ??CrossCallReturnLabel_99:
   \   00001F   FF           MOV     R7,A
   \   000020   A3           INC     DPTR
   \   000021   AA82         MOV     R2,DPL
   \   000023   AB83         MOV     R3,DPH
    842          
    843            /* Profile ID */
    844            profileID = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   000025   12....       LCALL   ?Subroutine6 & 0xFFFF
    845            pBuf += 2;
    846          
    847            /* NumInClusters */
    848            numInClusters = *pBuf++;
   \                     ??CrossCallReturnLabel_16:
   \   000028   F5..         MOV     ?V0 + 4,A
   \   00002A   A3           INC     DPTR
   \   00002B   0A           INC     R2
   \   00002C   AB83         MOV     R3,DPH
    849            if ( numInClusters <= MTZDO_MAX_ED_BIND_CLUSTERS )
   \   00002E   C3           CLR     C
   \   00002F   9410         SUBB    A,#0x10
   \   000031   5019         JNC     ??MT_ZdoEndDevBindRequest_0
    850            {
    851              for ( i = 0; i < numInClusters; i++ )
   \   000033   88..         MOV     ?V0 + 2,R0
   \                     ??MT_ZdoEndDevBindRequest_1:
   \   000035   E5..         MOV     A,?V0 + 2
   \   000037   C3           CLR     C
   \   000038   95..         SUBB    A,?V0 + 4
   \   00003A   5019         JNC     ??MT_ZdoEndDevBindRequest_2
    852              {
    853                inClusters[i] = BUILD_UINT16(pBuf[0], pBuf[1]);
   \   00003C   12....       LCALL   ?Subroutine9 & 0xFFFF
    854                pBuf += 2;
    855              }
    856            }
   \                     ??CrossCallReturnLabel_65:
   \   00003F   7428         MOV     A,#0x28
   \   000041   12....       LCALL   ?XSTACK_DISP0_8
   \   000044   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_40:
   \   000047   12....       LCALL   ??Subroutine58_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_82:
   \   00004A   80E9         SJMP    ??MT_ZdoEndDevBindRequest_1
    857            else
    858              retValue = ZDP_INVALID_REQTYPE;
   \                     ??MT_ZdoEndDevBindRequest_0:
   \   00004C   7480         MOV     A,#-0x80
   \   00004E   85..82       MOV     DPL,?XSP + 0
   \   000051   85..83       MOV     DPH,?XSP + 1
   \   000054   F0           MOVX    @DPTR,A
    859          
    860            /* NumOutClusters */
    861            numOutClusters = *pBuf++;
   \                     ??MT_ZdoEndDevBindRequest_2:
   \   000055   8A82         MOV     DPL,R2
   \   000057   8B83         MOV     DPH,R3
   \   000059   E0           MOVX    A,@DPTR
   \   00005A   F5..         MOV     ?V0 + 5,A
   \   00005C   A3           INC     DPTR
   \   00005D   AA82         MOV     R2,DPL
   \   00005F   AB83         MOV     R3,DPH
    862            if ( numOutClusters <= MTZDO_MAX_ED_BIND_CLUSTERS )
   \   000061   C3           CLR     C
   \   000062   9410         SUBB    A,#0x10
   \   000064   501A         JNC     ??MT_ZdoEndDevBindRequest_3
    863            {
    864              for ( i = 0; i < numOutClusters; i++ )
   \   000066   75..00       MOV     ?V0 + 2,#0x0
   \                     ??MT_ZdoEndDevBindRequest_4:
   \   000069   E5..         MOV     A,?V0 + 2
   \   00006B   C3           CLR     C
   \   00006C   95..         SUBB    A,?V0 + 5
   \   00006E   5014         JNC     ??MT_ZdoEndDevBindRequest_5
    865              {
    866                outClusters[i] = BUILD_UINT16(pBuf[0], pBuf[1]);
   \   000070   12....       LCALL   ?Subroutine9 & 0xFFFF
    867                pBuf += 2;
    868              }
    869            }
   \                     ??CrossCallReturnLabel_66:
   \   000073   740A         MOV     A,#0xa
   \   000075   12....       LCALL   ?XSTACK_DISP0_8
   \   000078   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_41:
   \   00007B   12....       LCALL   ??Subroutine58_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_83:
   \   00007E   80E9         SJMP    ??MT_ZdoEndDevBindRequest_4
    870            else
    871              retValue = ZDP_INVALID_REQTYPE;
   \                     ??MT_ZdoEndDevBindRequest_3:
   \   000080   7480         MOV     A,#-0x80
   \   000082   805C         SJMP    ??MT_ZdoEndDevBindRequest_6
    872            
    873            if ( retValue == 0 )
   \                     ??MT_ZdoEndDevBindRequest_5:
   \   000084   85..82       MOV     DPL,?XSP + 0
   \   000087   85..83       MOV     DPH,?XSP + 1
   \   00008A   E0           MOVX    A,@DPTR
   \   00008B   705A         JNZ     ??MT_ZdoEndDevBindRequest_7
    874            {
    875              retValue = (uint8)ZDP_EndDeviceBindReq( &destAddr, shortAddr, epInt, profileID,
    876                                                    numInClusters, inClusters, numOutClusters, outClusters, 0);
   \   00008D                ; Setup parameters for call to function ZDP_EndDeviceBindReq
   \   00008D   75..00       MOV     ?V0 + 2,#0x0
   \   000090   78..         MOV     R0,#?V0 + 2
   \   000092   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000095   740B         MOV     A,#0xb
   \   000097   12....       LCALL   ?XSTACK_DISP0_8
   \   00009A   8582..       MOV     ?V0 + 2,DPL
   \   00009D   8583..       MOV     ?V0 + 3,DPH
   \   0000A0   78..         MOV     R0,#?V0 + 2
   \   0000A2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000A5   E5..         MOV     A,?V0 + 5
   \   0000A7   F5..         MOV     ?V0 + 2,A
   \   0000A9   78..         MOV     R0,#?V0 + 2
   \   0000AB   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000AE   742C         MOV     A,#0x2c
   \   0000B0   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B3   8582..       MOV     ?V0 + 2,DPL
   \   0000B6   8583..       MOV     ?V0 + 3,DPH
   \   0000B9   78..         MOV     R0,#?V0 + 2
   \   0000BB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000BE   E5..         MOV     A,?V0 + 4
   \   0000C0   F5..         MOV     ?V0 + 2,A
   \   0000C2   78..         MOV     R0,#?V0 + 2
   \   0000C4   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000C7   78..         MOV     R0,#?V0 + 0
   \   0000C9   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000CC   EF           MOV     A,R7
   \   0000CD   F9           MOV     R1,A
   \   0000CE   740A         MOV     A,#0xa
   \   0000D0   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D3   AA82         MOV     R2,DPL
   \   0000D5   AB83         MOV     R3,DPH
   \   0000D7   12....       LCALL   ??ZDP_EndDeviceBindReq?relay
   \   0000DA   7409         MOV     A,#0x9
   \   0000DC   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000DF   E9           MOV     A,R1
   \                     ??MT_ZdoEndDevBindRequest_6:
   \   0000E0   85..82       MOV     DPL,?XSP + 0
   \   0000E3   85..83       MOV     DPH,?XSP + 1
   \   0000E6   F0           MOVX    @DPTR,A
    877            }
    878          
    879            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   \                     ??MT_ZdoEndDevBindRequest_7:
   \   0000E7                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   0000E7   AC82         MOV     R4,DPL
   \   0000E9   AD83         MOV     R5,DPH
   \   0000EB   7B01         MOV     R3,#0x1
   \   0000ED   EE           MOV     A,R6
   \   0000EE   FA           MOV     R2,A
   \   0000EF   7965         MOV     R1,#0x65
   \   0000F1   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    880          }
   \   0000F4   7446         MOV     A,#0x46
   \   0000F6   02....       LJMP    ??Subroutine61_0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine25:
   \   000000   12....       LCALL   ?Subroutine38 & 0xFFFF
   \                     ??CrossCallReturnLabel_54:
   \   000003   E5..         MOV     A,?V0 + 6
   \   000005   F0           MOVX    @DPTR,A
   \   000006   A3           INC     DPTR
   \   000007   E5..         MOV     A,?V0 + 7
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004   E0           MOVX    A,@DPTR
   \   000005   F5..         MOV     ?V0 + 6,A
   \   000007   A3           INC     DPTR
   \   000008   E0           MOVX    A,@DPTR
   \   000009   F9           MOV     R1,A
   \   00000A   E4           CLR     A
   \   00000B   25..         ADD     A,?V0 + 6
   \   00000D   E9           MOV     A,R1
   \   00000E   F5..         MOV     ?V0 + 7,A
   \   000010   02....       LJMP    ?Subroutine44 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine61_0:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   7F08         MOV     R7,#0x8
   \   000005   02....       LJMP    ?BANKED_LEAVE_XDATA
    881          
    882          /***************************************************************************************************
    883           * @fn      MT_ZdoBindRequest
    884           *
    885           * @brief   Handle a Bind request.
    886           *
    887           * @param   pBuf  - MT message data
    888           *
    889           * @return  void
    890           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    891          void MT_ZdoBindRequest(uint8 *pBuf)
   \                     MT_ZdoBindRequest:
    892          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 19
   \   000005   74ED         MOV     A,#-0x13
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   12....       LCALL   ?Subroutine10 & 0xFFFF
    893            uint8 cmdId;
    894            uint8 retValue;
    895            zAddrType_t destAddr, devAddr;
    896            uint8 *pSrcAddr, *ptr;
    897            uint8 srcEPInt, dstEPInt;
    898            uint16 clusterID;
    899          
    900            /* parse header */
    901            cmdId = pBuf[MT_RPC_POS_CMD1];
    902            pBuf += MT_RPC_FRAME_HDR_SZ;
    903          
    904            /* Dev address */
    905            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_17:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine13 & 0xFFFF
    906            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_23:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine4 & 0xFFFF
    907            pBuf += 2;
    908          
    909            /* SrcAddress */
    910            pSrcAddr = pBuf;
    911            pBuf += Z_EXTADDR_LEN;
    912          
    913            /* SrcEPInt */
    914            srcEPInt = *pBuf++;
    915          
    916            /* ClusterID */
    917            clusterID = BUILD_UINT16( pBuf[0], pBuf[1]);
    918            pBuf += 2;
    919          
    920            /* Destination Address mode */
    921            devAddr.addrMode = *pBuf++;
   \                     ??CrossCallReturnLabel_11:
   \   000019   12....       LCALL   ?XSTACK_DISP0_8
   \   00001C   12....       LCALL   ?Subroutine23 & 0xFFFF
    922          
    923            /* Destination Address */
    924            if ( devAddr.addrMode == Addr64Bit )
   \                     ??CrossCallReturnLabel_35:
   \   00001F   7012         JNZ     ??MT_ZdoBindRequest_0
    925            {
    926              ptr = pBuf;
    927              osal_cpyExtAddr( devAddr.addr.extAddr, ptr );
   \   000021                ; Setup parameters for call to function sAddrExtCpy
   \   000021   EE           MOV     A,R6
   \   000022   FC           MOV     R4,A
   \   000023   EF           MOV     A,R7
   \   000024   FD           MOV     R5,A
   \   000025   7401         MOV     A,#0x1
   \   000027   12....       LCALL   ?XSTACK_DISP0_8
   \   00002A   AA82         MOV     R2,DPL
   \   00002C   AB83         MOV     R3,DPH
   \   00002E   12....       LCALL   ??sAddrExtCpy?relay
   \   000031   800B         SJMP    ??MT_ZdoBindRequest_1
    928            }
    929            else
    930            {
    931              devAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??MT_ZdoBindRequest_0:
   \   000033   12....       LCALL   ?Subroutine14 & 0xFFFF
    932            }
   \                     ??CrossCallReturnLabel_25:
   \   000036   12....       LCALL   ?XSTACK_DISP0_8
   \   000039   E8           MOV     A,R0
   \   00003A   F0           MOVX    @DPTR,A
   \   00003B   A3           INC     DPTR
   \   00003C   E9           MOV     A,R1
   \   00003D   F0           MOVX    @DPTR,A
    933            /* The short address occupies LSB two bytes */
    934            pBuf += Z_EXTADDR_LEN;
    935          
    936            /* DstEPInt */
    937            dstEPInt = *pBuf;
    938          
    939            retValue = (uint8)ZDP_BindReq( &destAddr, pSrcAddr, srcEPInt, clusterID, &devAddr, dstEPInt, 0);
   \                     ??MT_ZdoBindRequest_1:
   \   00003E                ; Setup parameters for call to function ZDP_BindUnbindReq
   \   00003E   75..00       MOV     ?V0 + 4,#0x0
   \   000041   78..         MOV     R0,#?V0 + 4
   \   000043   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000046   8E82         MOV     DPL,R6
   \   000048   8F83         MOV     DPH,R7
   \   00004A   A3           INC     DPTR
   \   00004B   A3           INC     DPTR
   \   00004C   A3           INC     DPTR
   \   00004D   A3           INC     DPTR
   \   00004E   A3           INC     DPTR
   \   00004F   A3           INC     DPTR
   \   000050   A3           INC     DPTR
   \   000051   A3           INC     DPTR
   \   000052   E0           MOVX    A,@DPTR
   \   000053   F5..         MOV     ?V0 + 4,A
   \   000055   78..         MOV     R0,#?V0 + 4
   \   000057   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00005A   7403         MOV     A,#0x3
   \   00005C   12....       LCALL   ?XSTACK_DISP0_8
   \   00005F   8582..       MOV     ?V0 + 4,DPL
   \   000062   8583..       MOV     ?V0 + 5,DPH
   \   000065   78..         MOV     R0,#?V0 + 4
   \   000067   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006A   78..         MOV     R0,#?V0 + 6
   \   00006C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006F   78..         MOV     R0,#?V0 + 2
   \   000071   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000074   A9..         MOV     R1,?V0 + 1
   \   000076   7412         MOV     A,#0x12
   \   000078   12....       LCALL   ?XSTACK_DISP0_8
   \   00007B   AC82         MOV     R4,DPL
   \   00007D   AD83         MOV     R5,DPH
   \   00007F   7A21         MOV     R2,#0x21
   \   000081                REQUIRE ?Subroutine49
   \   000081                ; // Fall through to label ?Subroutine49
    940          
    941            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
    942          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine49:
   \   000000   7B00         MOV     R3,#0x0
   \   000002   12....       LCALL   ??ZDP_BindUnbindReq?relay
   \   000005   7408         MOV     A,#0x8
   \   000007   12....       LCALL   ?DEALLOC_XSTACK8
   \   00000A   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_67:
   \   00000D                REQUIRE ??Subroutine61_0
   \   00000D                ; // Fall through to label ??Subroutine61_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine23:
   \   000000   EA           MOV     A,R2
   \   000001   F0           MOVX    @DPTR,A
   \   000002   8E82         MOV     DPL,R6
   \   000004   8F83         MOV     DPH,R7
   \   000006   A3           INC     DPTR
   \   000007   0E           INC     R6
   \   000008   AF83         MOV     R7,DPH
   \   00000A   7403         MOV     A,#0x3
   \   00000C   6A           XRL     A,R2
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine22:
   \   000000   12....       LCALL   ?Subroutine34 & 0xFFFF
   \                     ??CrossCallReturnLabel_77:
   \   000003   7413         MOV     A,#0x13
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_48:
   \   000003   F8           MOV     R0,A
   \   000004   7401         MOV     A,#0x1
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   7402         MOV     A,#0x2
   \   000002   F0           MOVX    @DPTR,A
   \   000003   8E82         MOV     DPL,R6
   \   000005   8F83         MOV     DPH,R7
   \   000007   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_47:
   \   00000A   F8           MOV     R0,A
   \   00000B   740A         MOV     A,#0xa
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine31:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F9           MOV     R1,A
   \   000005   EA           MOV     A,R2
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   EA           MOV     A,R2
   \   000001   FE           MOV     R6,A
   \   000002   EB           MOV     A,R3
   \   000003   FF           MOV     R7,A
   \   000004   8E82         MOV     DPL,R6
   \   000006   8F83         MOV     DPH,R7
   \   000008   A3           INC     DPTR
   \   000009   A3           INC     DPTR
   \   00000A   E0           MOVX    A,@DPTR
   \   00000B   F5..         MOV     ?V0 + 0,A
   \   00000D   EE           MOV     A,R6
   \   00000E   2403         ADD     A,#0x3
   \   000010   0E           INC     R6
   \   000011   0E           INC     R6
   \   000012   0E           INC     R6
   \   000013   EF           MOV     A,R7
   \   000014   3400         ADDC    A,#0x0
   \   000016   FF           MOV     R7,A
   \   000017   7412         MOV     A,#0x12
   \   000019   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   E8           MOV     A,R0
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   E9           MOV     A,R1
   \   000004   F0           MOVX    @DPTR,A
   \   000005   EE           MOV     A,R6
   \   000006   2402         ADD     A,#0x2
   \   000008   F5..         MOV     ?V0 + 2,A
   \   00000A   EF           MOV     A,R7
   \   00000B   3400         ADDC    A,#0x0
   \   00000D   F5..         MOV     ?V0 + 3,A
   \   00000F   E5..         MOV     A,?V0 + 2
   \   000011   2408         ADD     A,#0x8
   \   000013   FE           MOV     R6,A
   \   000014   E5..         MOV     A,?V0 + 3
   \   000016   12....       LCALL   ?Subroutine37 & 0xFFFF
   \                     ??CrossCallReturnLabel_51:
   \   000019   F5..         MOV     ?V0 + 1,A
   \   00001B   A3           INC     DPTR
   \   00001C   AE82         MOV     R6,DPL
   \   00001E   AF83         MOV     R7,DPH
   \   000020   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_46:
   \   000023   F5..         MOV     ?V0 + 6,A
   \   000025   E9           MOV     A,R1
   \   000026   F5..         MOV     ?V0 + 7,A
   \   000028   EE           MOV     A,R6
   \   000029   2402         ADD     A,#0x2
   \   00002B   0E           INC     R6
   \   00002C   0E           INC     R6
   \   00002D   EF           MOV     A,R7
   \   00002E   12....       LCALL   ?Subroutine37 & 0xFFFF
   \                     ??CrossCallReturnLabel_52:
   \   000031   FA           MOV     R2,A
   \   000032   7409         MOV     A,#0x9
   \   000034   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine37:
   \   000000   3400         ADDC    A,#0x0
   \   000002   FF           MOV     R7,A
   \   000003   8E82         MOV     DPL,R6
   \   000005   8F83         MOV     DPH,R7
   \   000007   E0           MOVX    A,@DPTR
   \   000008   22           RET
    943          
    944          /***************************************************************************************************
    945           * @fn      MT_ZdoUnbindRequest
    946           *
    947           * @brief   Handle a Unbind request.
    948           *
    949           * @param   pBuf  - MT message data
    950           *
    951           * @return  void
    952           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    953          void MT_ZdoUnbindRequest(uint8 *pBuf)
   \                     MT_ZdoUnbindRequest:
    954          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 19
   \   000005   74ED         MOV     A,#-0x13
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   12....       LCALL   ?Subroutine10 & 0xFFFF
    955            uint8 cmdId;
    956            uint8 retValue;
    957            zAddrType_t destAddr, devAddr;
    958            uint8 *pSrcAddr, *ptr;
    959            uint8 srcEPInt, dstEPInt;
    960            uint16 clusterID;
    961          
    962            /* parse header */
    963            cmdId = pBuf[MT_RPC_POS_CMD1];
    964            pBuf += MT_RPC_FRAME_HDR_SZ;
    965          
    966            /* dev address */
    967            destAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_18:
   \   00000D   12....       LCALL   ?XSTACK_DISP0_8
   \   000010   12....       LCALL   ?Subroutine13 & 0xFFFF
    968            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??CrossCallReturnLabel_24:
   \   000013   12....       LCALL   ?XSTACK_DISP0_8
   \   000016   12....       LCALL   ?Subroutine4 & 0xFFFF
    969            pBuf += 2;
    970          
    971            /* SrcAddress */
    972            pSrcAddr = pBuf;
    973            pBuf += Z_EXTADDR_LEN;
    974          
    975            /* SrcEPInt */
    976            srcEPInt = *pBuf++;
    977          
    978            /* ClusterID */
    979            clusterID = BUILD_UINT16( pBuf[0], pBuf[1]);
    980            pBuf += 2;
    981          
    982            /* Destination Address mode */
    983            devAddr.addrMode = *pBuf++;
   \                     ??CrossCallReturnLabel_12:
   \   000019   12....       LCALL   ?XSTACK_DISP0_8
   \   00001C   12....       LCALL   ?Subroutine23 & 0xFFFF
    984          
    985            /* Destination Address */
    986            if ( devAddr.addrMode == Addr64Bit )
   \                     ??CrossCallReturnLabel_36:
   \   00001F   7012         JNZ     ??MT_ZdoUnbindRequest_0
    987            {
    988              ptr = pBuf;
    989              osal_cpyExtAddr( devAddr.addr.extAddr, ptr );
   \   000021                ; Setup parameters for call to function sAddrExtCpy
   \   000021   EE           MOV     A,R6
   \   000022   FC           MOV     R4,A
   \   000023   EF           MOV     A,R7
   \   000024   FD           MOV     R5,A
   \   000025   7401         MOV     A,#0x1
   \   000027   12....       LCALL   ?XSTACK_DISP0_8
   \   00002A   AA82         MOV     R2,DPL
   \   00002C   AB83         MOV     R3,DPH
   \   00002E   12....       LCALL   ??sAddrExtCpy?relay
   \   000031   800B         SJMP    ??MT_ZdoUnbindRequest_1
    990            }
    991            else
    992            {
    993              devAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   \                     ??MT_ZdoUnbindRequest_0:
   \   000033   12....       LCALL   ?Subroutine14 & 0xFFFF
    994            }
   \                     ??CrossCallReturnLabel_26:
   \   000036   12....       LCALL   ?XSTACK_DISP0_8
   \   000039   E8           MOV     A,R0
   \   00003A   F0           MOVX    @DPTR,A
   \   00003B   A3           INC     DPTR
   \   00003C   E9           MOV     A,R1
   \   00003D   F0           MOVX    @DPTR,A
    995            /* The short address occupies LSB two bytes */
    996            pBuf += Z_EXTADDR_LEN;
    997          
    998            /* dstEPInt */
    999            dstEPInt = *pBuf;
   1000          
   1001            retValue = (uint8)ZDP_UnbindReq( &destAddr, pSrcAddr, srcEPInt, clusterID, &devAddr, dstEPInt, 0);
   \                     ??MT_ZdoUnbindRequest_1:
   \   00003E                ; Setup parameters for call to function ZDP_BindUnbindReq
   \   00003E   75..00       MOV     ?V0 + 4,#0x0
   \   000041   78..         MOV     R0,#?V0 + 4
   \   000043   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000046   8E82         MOV     DPL,R6
   \   000048   8F83         MOV     DPH,R7
   \   00004A   A3           INC     DPTR
   \   00004B   A3           INC     DPTR
   \   00004C   A3           INC     DPTR
   \   00004D   A3           INC     DPTR
   \   00004E   A3           INC     DPTR
   \   00004F   A3           INC     DPTR
   \   000050   A3           INC     DPTR
   \   000051   A3           INC     DPTR
   \   000052   E0           MOVX    A,@DPTR
   \   000053   F5..         MOV     ?V0 + 4,A
   \   000055   78..         MOV     R0,#?V0 + 4
   \   000057   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00005A   7403         MOV     A,#0x3
   \   00005C   12....       LCALL   ?XSTACK_DISP0_8
   \   00005F   8582..       MOV     ?V0 + 4,DPL
   \   000062   8583..       MOV     ?V0 + 5,DPH
   \   000065   78..         MOV     R0,#?V0 + 4
   \   000067   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006A   78..         MOV     R0,#?V0 + 6
   \   00006C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006F   78..         MOV     R0,#?V0 + 2
   \   000071   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000074   A9..         MOV     R1,?V0 + 1
   \   000076   7412         MOV     A,#0x12
   \   000078   12....       LCALL   ?XSTACK_DISP0_8
   \   00007B   AC82         MOV     R4,DPL
   \   00007D   AD83         MOV     R5,DPH
   \   00007F   7A22         MOV     R2,#0x22
   \   000081   02....       LJMP    ?Subroutine49 & 0xFFFF
   1002          
   1003            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1004          }
   1005          
   1006          /***************************************************************************************************
   1007           * @fn      MT_ZdoSetLinkKey
   1008           *
   1009           * @brief   Set an application or trust center link key.
   1010           *
   1011           * @param   pBuf  - MT message data
   1012           *
   1013           * @return  void
   1014           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1015          void MT_ZdoSetLinkKey(uint8 *pBuf)
   \                     MT_ZdoSetLinkKey:
   1016          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1017            uint8 cmdId;
   1018            uint8 retValue;
   1019            uint8 *pExtAddr;
   1020            uint8 *pKey;
   1021            uint16 shortAddr;
   1022            
   1023            /* parse header */
   1024            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ?Subroutine5 & 0xFFFF
   1025            pBuf += MT_RPC_FRAME_HDR_SZ;
   1026          
   1027            /* ShortAddr */
   1028            shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1029            pBuf += 2;
   1030            
   1031            /* Extended Addr */
   1032            pExtAddr = pBuf;
   1033            pBuf += Z_EXTADDR_LEN;
   1034            
   1035            /* Key data */
   1036            pKey = pBuf;
   1037          
   1038            retValue = (uint8)ZDSecMgrAddLinkKey( shortAddr, pExtAddr, pKey);
   \                     ??CrossCallReturnLabel_14:
   \   00000D                ; Setup parameters for call to function ZDSecMgrAddLinkKey
   \   00000D   EA           MOV     A,R2
   \   00000E   2408         ADD     A,#0x8
   \   000010   F5..         MOV     ?V0 + 2,A
   \   000012   EB           MOV     A,R3
   \   000013   3400         ADDC    A,#0x0
   \   000015   F5..         MOV     ?V0 + 3,A
   \   000017   78..         MOV     R0,#?V0 + 2
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00001C   EA           MOV     A,R2
   \   00001D   FC           MOV     R4,A
   \   00001E   EB           MOV     A,R3
   \   00001F   FD           MOV     R5,A
   \   000020   EE           MOV     A,R6
   \   000021   FA           MOV     R2,A
   \   000022   EF           MOV     A,R7
   \   000023   FB           MOV     R3,A
   \   000024   12....       LCALL   ??ZDSecMgrAddLinkKey?relay
   \   000027   7402         MOV     A,#0x2
   \   000029   12....       LCALL   ?DEALLOC_XSTACK8
   \   00002C   12....       LCALL   ?Subroutine20 & 0xFFFF
   1039          
   1040            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1041          }
   \                     ??CrossCallReturnLabel_69:
   \   00002F   02....       LJMP    ?Subroutine48 & 0xFFFF
   1042          
   1043          /***************************************************************************************************
   1044           * @fn      MT_ZdoRemoveLinkKey
   1045           *
   1046           * @brief   Remove an application or trust center link key.
   1047           *
   1048           * @param   pBuf  - MT message data
   1049           *
   1050           * @return  void
   1051           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1052          void MT_ZdoRemoveLinkKey(uint8 *pBuf)
   \                     MT_ZdoRemoveLinkKey:
   1053          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1054            uint8 cmdId;
   1055            uint8 retValue;
   1056            uint8 *pExtAddr;
   1057              
   1058            /* parse header */
   1059            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   12....       LCALL   ?Subroutine11 & 0xFFFF
   1060            pBuf += MT_RPC_FRAME_HDR_SZ;
   1061            
   1062            /* ShortAddr */
   1063            pExtAddr = pBuf;
   1064          
   1065            retValue = ZDSecMgrDeviceRemoveByExtAddr( pExtAddr );
   \                     ??CrossCallReturnLabel_20:
   \   00000D   12....       LCALL   ??ZDSecMgrDeviceRemoveByExtAddr?relay
   \   000010   02....       LJMP    ?Subroutine51 & 0xFFFF
   1066          
   1067            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1068          }
   1069          
   1070          /***************************************************************************************************
   1071           * @fn      MT_ZdoGetLinkKey
   1072           *
   1073           * @brief   Get the application or trust center link key.
   1074           *
   1075           * @param   pBuf  - MT message data
   1076           *
   1077           * @return  void
   1078           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1079          void MT_ZdoGetLinkKey(uint8 *pBuf)
   \                     MT_ZdoGetLinkKey:
   1080          {
   \   000000   74F1         MOV     A,#-0xf
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 15
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1081            uint8 cmdId;
   1082            uint8 retValue;
   1083            uint8 *pExtAddr;
   1084            uint8 *retBuf;
   1085            uint8 len;
   1086            APSME_LinkKeyData_t *pLinkKey;
   1087              
   1088            /* parse header */
   1089            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   F5..         MOV     ?V0 + 2,A
   1090            pBuf += MT_RPC_FRAME_HDR_SZ;
   1091            
   1092            /* Extended Address */
   1093            pExtAddr = pBuf;
   \   000013   EA           MOV     A,R2
   \   000014   2403         ADD     A,#0x3
   \   000016   F5..         MOV     ?V0 + 0,A
   \   000018   EB           MOV     A,R3
   \   000019   3400         ADDC    A,#0x0
   \   00001B   F5..         MOV     ?V0 + 1,A
   1094          
   1095            /* Fetch the key data */
   1096            retValue = APSME_LinkKeyDataGet( pExtAddr, &pLinkKey );
   \   00001D                ; Setup parameters for call to function APSME_LinkKeyDataGet
   \   00001D   85..82       MOV     DPL,?XSP + 0
   \   000020   85..83       MOV     DPH,?XSP + 1
   \   000023   AC82         MOV     R4,DPL
   \   000025   AD83         MOV     R5,DPH
   \   000027   0A           INC     R2
   \   000028   0A           INC     R2
   \   000029   0A           INC     R2
   \   00002A   FB           MOV     R3,A
   \   00002B   12....       LCALL   ??APSME_LinkKeyDataGet?relay
   \   00002E   E9           MOV     A,R1
   \   00002F   F5..         MOV     ?V0 + 3,A
   1097            
   1098            /* Construct the response message */
   1099            len = 1 + Z_EXTADDR_LEN + SEC_KEY_LEN; // status + extAddr + key
   1100            if ( ( retBuf = osal_mem_alloc( len ) ) == NULL )
   \   000031                ; Setup parameters for call to function osal_mem_alloc
   \   000031   7A19         MOV     R2,#0x19
   \   000033   7B00         MOV     R3,#0x0
   \   000035   12....       LCALL   ??osal_mem_alloc?relay
   \   000038   8A..         MOV     ?V0 + 4,R2
   \   00003A   8B..         MOV     ?V0 + 5,R3
   \   00003C   AE..         MOV     R6,?V0 + 4
   \   00003E   AF..         MOV     R7,?V0 + 5
   \   000040   8E82         MOV     DPL,R6
   \   000042   8F83         MOV     DPH,R7
   \   000044   A3           INC     DPTR
   \   000045   AA82         MOV     R2,DPL
   \   000047   AB83         MOV     R3,DPH
   \   000049   EE           MOV     A,R6
   \   00004A   7001         JNZ     ??MT_ZdoGetLinkKey_0
   \   00004C   EF           MOV     A,R7
   \                     ??MT_ZdoGetLinkKey_0:
   \   00004D   7025         JNZ     ??MT_ZdoGetLinkKey_1
   1101            {
   1102              retValue = ZMemError;
   \   00004F   75..10       MOV     ?V0 + 3,#0x10
   1103            }
   1104            else
   1105            {  
   1106              if( retValue == ZSuccess )
   1107              {
   1108                /* Extended Address */
   1109                osal_memcpy( &(retBuf[1]), pExtAddr, Z_EXTADDR_LEN );
   1110                
   1111                /* Key data */
   1112                osal_memcpy( &(retBuf[1 + Z_EXTADDR_LEN]), pLinkKey->key, SEC_KEY_LEN );      
   1113              }
   1114            }
   1115              
   1116            if( retValue != ZSuccess )
   1117            {
   1118              /* Failed case - set the rest fields to all FF */
   1119              osal_memset( &(retBuf[1]), 0xFF, Z_EXTADDR_LEN + SEC_KEY_LEN );   
   \                     ??MT_ZdoGetLinkKey_2:
   \   000052                ; Setup parameters for call to function osal_memset
   \   000052   7C18         MOV     R4,#0x18
   \   000054   7D00         MOV     R5,#0x0
   \   000056   79FF         MOV     R1,#-0x1
   \   000058   12....       LCALL   ??osal_memset?relay
   1120            }    
   1121            
   1122            retBuf[0] = retValue;  /* Status */
   \                     ??MT_ZdoGetLinkKey_3:
   \   00005B   8E82         MOV     DPL,R6
   \   00005D   8F83         MOV     DPH,R7
   \   00005F   E5..         MOV     A,?V0 + 3
   \   000061   F0           MOVX    @DPTR,A
   1123            
   1124            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, len, retBuf);
   \   000062                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000062   EE           MOV     A,R6
   \   000063   FC           MOV     R4,A
   \   000064   EF           MOV     A,R7
   \   000065   FD           MOV     R5,A
   \   000066   7B19         MOV     R3,#0x19
   \   000068   AA..         MOV     R2,?V0 + 2
   \   00006A   7965         MOV     R1,#0x65
   \   00006C   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1125            
   1126            return;
   \   00006F   7402         MOV     A,#0x2
   \   000071   02....       LJMP    ?Subroutine47 & 0xFFFF
   \                     ??MT_ZdoGetLinkKey_1:
   \   000074   E5..         MOV     A,?V0 + 3
   \   000076   70DA         JNZ     ??MT_ZdoGetLinkKey_2
   \   000078                ; Setup parameters for call to function osal_memcpy
   \   000078   85....       MOV     ?V0 + 4,?V0 + 0
   \   00007B   85....       MOV     ?V0 + 5,?V0 + 1
   \   00007E   75..00       MOV     ?V0 + 6,#0x0
   \   000081   78..         MOV     R0,#?V0 + 4
   \   000083   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000086   7C08         MOV     R4,#0x8
   \   000088   12....       LCALL   ?Subroutine27 & 0xFFFF
   \                     ??CrossCallReturnLabel_106:
   \   00008B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00008E                ; Setup parameters for call to function osal_memcpy
   \   00008E   85..82       MOV     DPL,?XSP + 0
   \   000091   85..83       MOV     DPH,?XSP + 1
   \   000094   E0           MOVX    A,@DPTR
   \   000095   F8           MOV     R0,A
   \   000096   A3           INC     DPTR
   \   000097   E0           MOVX    A,@DPTR
   \   000098   F583         MOV     DPH,A
   \   00009A   8882         MOV     DPL,R0
   \   00009C   E0           MOVX    A,@DPTR
   \   00009D   F5..         MOV     ?V0 + 0,A
   \   00009F   A3           INC     DPTR
   \   0000A0   E0           MOVX    A,@DPTR
   \   0000A1   85....       MOV     ?V0 + 4,?V0 + 0
   \   0000A4   F5..         MOV     ?V0 + 5,A
   \   0000A6   78..         MOV     R0,#?V0 + 4
   \   0000A8   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000AB   7C10         MOV     R4,#0x10
   \   0000AD   7D00         MOV     R5,#0x0
   \   0000AF   EE           MOV     A,R6
   \   0000B0   2409         ADD     A,#0x9
   \   0000B2   FA           MOV     R2,A
   \   0000B3   EF           MOV     A,R7
   \   0000B4   3400         ADDC    A,#0x0
   \   0000B6   FB           MOV     R3,A
   \   0000B7   12....       LCALL   ??Subroutine63_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_109:
   \   0000BA   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000BD   809C         SJMP    ??MT_ZdoGetLinkKey_3
   1127          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine27:
   \   000000   7D00         MOV     R5,#0x0
   \   000002                REQUIRE ??Subroutine63_0
   \   000002                ; // Fall through to label ??Subroutine63_0
   1128          
   1129          #if defined (MT_ZDO_MGMT)
   1130          /***************************************************************************************************
   1131           * @fn      MT_ZdoMgmtNwkDiscRequest
   1132           *
   1133           * @brief   Handle a Mgmt Nwk Discovery request.
   1134           *
   1135           * @param   pBuf  - MT message data
   1136           *
   1137           * @return  void
   1138           ***************************************************************************************************/
   1139          void MT_ZdoMgmtNwkDiscRequest(uint8 *pBuf)
   1140          {
   1141            uint8 cmdId;
   1142            uint8 retValue;
   1143            zAddrType_t destAddr;
   1144            uint32 scanChannels;
   1145            uint8 scanDuration, startIndex;
   1146          
   1147            /* parse header */
   1148            cmdId = pBuf[MT_RPC_POS_CMD1];
   1149            pBuf += MT_RPC_FRAME_HDR_SZ;
   1150          
   1151            /* Dev address */
   1152            destAddr.addrMode = Addr16Bit;
   1153            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1154            pBuf += 2;
   1155          
   1156            /* Scan Channels */
   1157            scanChannels = BUILD_UINT32( pBuf[0], pBuf[1], pBuf[2], pBuf[3] );
   1158            pBuf += 4;
   1159          
   1160            /* Scan Duration */
   1161            scanDuration = *pBuf++;
   1162          
   1163            /* Start Index */
   1164            startIndex = *pBuf;
   1165          
   1166            retValue = (uint8)ZDP_MgmtNwkDiscReq( &destAddr, scanChannels, scanDuration, startIndex, 0);
   1167          
   1168            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1169          }
   1170          
   1171          /***************************************************************************************************
   1172           * @fn      MT_ZdoMgmtLqiRequest
   1173           *
   1174           * @brief   Handle a Mgmt Lqi request.
   1175           *
   1176           * @param   pBuf  - MT message data
   1177           *
   1178           * @return  void
   1179           ***************************************************************************************************/
   1180          void MT_ZdoMgmtLqiRequest(uint8 *pBuf)
   1181          {
   1182            uint8 cmdId;
   1183            uint8 retValue;
   1184            zAddrType_t destAddr;
   1185            uint8 startIndex;
   1186          
   1187            /* parse header */
   1188            cmdId = pBuf[MT_RPC_POS_CMD1];
   1189            pBuf += MT_RPC_FRAME_HDR_SZ;
   1190          
   1191            /* Dev address */
   1192            destAddr.addrMode = Addr16Bit;
   1193            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1194            pBuf += 2;
   1195          
   1196            /* Start Index */
   1197            startIndex = *pBuf;
   1198          
   1199            retValue = (uint8)ZDP_MgmtLqiReq( &destAddr, startIndex, 0);
   1200          
   1201            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1202          }
   1203          
   1204          /***************************************************************************************************
   1205           * @fn      MT_ZdoMgmtRtgRequest
   1206           *
   1207           * @brief   Handle a Mgmt Rtg request.
   1208           *
   1209           * @param   pBuf  - MT message data
   1210           *
   1211           * @return  void
   1212           ***************************************************************************************************/
   1213          void MT_ZdoMgmtRtgRequest(uint8 *pBuf)
   1214          {
   1215            uint8 cmdId;
   1216            uint8 retValue;
   1217            zAddrType_t destAddr;
   1218            uint8 startIndex;
   1219          
   1220            /* parse header */
   1221            cmdId = pBuf[MT_RPC_POS_CMD1];
   1222            pBuf += MT_RPC_FRAME_HDR_SZ;
   1223          
   1224            /* Dev Address */
   1225            destAddr.addrMode = Addr16Bit;
   1226            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1]);
   1227            pBuf += 2;
   1228          
   1229            /* Start Index */
   1230            startIndex = *pBuf;
   1231          
   1232            retValue = (byte)ZDP_MgmtRtgReq( &destAddr, startIndex, 0);
   1233          
   1234            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1235          }
   1236          
   1237          /***************************************************************************************************
   1238           * @fn      MT_ZdoMgmtBindRequest
   1239           *
   1240           * @brief   Handle a Mgmt Bind request.
   1241           *
   1242           * @param   pBuf  - MT message data
   1243           *
   1244           * @return  void
   1245           ***************************************************************************************************/
   1246          void MT_ZdoMgmtBindRequest(uint8 *pBuf)
   1247          {
   1248            uint8 cmdId;
   1249            uint8 retValue;
   1250            zAddrType_t destAddr;
   1251            uint8 startIndex;
   1252          
   1253            /* parse header */
   1254            cmdId = pBuf[MT_RPC_POS_CMD1];
   1255            pBuf += MT_RPC_FRAME_HDR_SZ;
   1256          
   1257            /* Dev Address */
   1258            destAddr.addrMode = Addr16Bit;
   1259            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1260            pBuf += 2;
   1261          
   1262            /* Start Index */
   1263            startIndex = *pBuf;
   1264          
   1265            retValue = (uint8)ZDP_MgmtBindReq( &destAddr, startIndex, 0);
   1266          
   1267            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1268          }
   1269          
   1270          /***************************************************************************************************
   1271           * @fn      MT_ZdoMgmtLeaveRequest
   1272           *
   1273           * @brief   Handle a Mgmt Leave request.
   1274           *
   1275           * @param   pBuf  - MT message data
   1276           *
   1277           * @return  void
   1278           ***************************************************************************************************/
   1279          void MT_ZdoMgmtLeaveRequest(uint8 *pBuf)
   1280          {
   1281            uint8 cmdId;
   1282            uint8 retValue;
   1283            zAddrType_t destAddr;
   1284            uint8 *pIEEEAddr;
   1285            uint8 removeChildren, rejoin;
   1286          
   1287            /* parse header */
   1288            cmdId = pBuf[MT_RPC_POS_CMD1];
   1289            pBuf += MT_RPC_FRAME_HDR_SZ;
   1290          
   1291            /* Destination Address */
   1292            destAddr.addrMode = Addr16Bit;
   1293            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1294            pBuf += 2;
   1295          
   1296            /* IEEE address */
   1297            pIEEEAddr = pBuf;
   1298            pBuf += Z_EXTADDR_LEN;
   1299          
   1300            /* Remove Children */
   1301            removeChildren = *pBuf++;
   1302          
   1303            /* Rejoin */
   1304            rejoin = *pBuf;
   1305          
   1306            retValue = (byte)ZDP_MgmtLeaveReq( &destAddr, pIEEEAddr, removeChildren, rejoin, 0);
   1307          
   1308            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1309          }
   1310          
   1311          
   1312          /***************************************************************************************************
   1313           * @fn      MT_ZdoMgmtDirectJoinRequest
   1314           *
   1315           * @brief   Handle a Mgmt Direct Join request.
   1316           *
   1317           * @param   pBuf  - MT message data
   1318           *
   1319           * @return  void
   1320           ***************************************************************************************************/
   1321          void MT_ZdoMgmtDirectJoinRequest(uint8 *pBuf)
   1322          {
   1323            uint8 cmdId;
   1324            uint8 retValue;
   1325            zAddrType_t destAddr;
   1326            uint8 *deviceAddr;
   1327            uint8 capInfo;
   1328          
   1329            /* parse header */
   1330            cmdId = pBuf[MT_RPC_POS_CMD1];
   1331            pBuf += MT_RPC_FRAME_HDR_SZ;
   1332          
   1333            /* Destination Address */
   1334            destAddr.addrMode = Addr16Bit;
   1335            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1336            pBuf += 2;
   1337          
   1338            /* Device Address */
   1339            deviceAddr = pBuf;
   1340            pBuf += Z_EXTADDR_LEN;
   1341          
   1342            /* Capability information */
   1343            capInfo = *pBuf;
   1344          
   1345            retValue = (uint8)ZDP_MgmtDirectJoinReq( &destAddr, deviceAddr, capInfo, 0);
   1346          
   1347            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1348          }
   1349          
   1350          /***************************************************************************************************
   1351           * @fn      MT_ZdoMgmtPermitJoinRequest
   1352           *
   1353           * @brief   Handle a Mgmt Permit Join request.
   1354           *
   1355           * @param   pBuf  - MT message data
   1356           *
   1357           * @return  void
   1358           ***************************************************************************************************/
   1359          void MT_ZdoMgmtPermitJoinRequest(uint8 *pBuf)
   1360          {
   1361            uint8 cmdId;
   1362            uint8 retValue;
   1363            zAddrType_t destAddr;
   1364            uint8 duration, tcSignificance;
   1365          
   1366            /* parse header */
   1367            cmdId = pBuf[MT_RPC_POS_CMD1];
   1368            pBuf += MT_RPC_FRAME_HDR_SZ;
   1369          
   1370            /* Destination Address */
   1371            destAddr.addrMode = Addr16Bit;
   1372            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1373            pBuf += 2;
   1374          
   1375            /* Duration */
   1376            duration = *pBuf++;
   1377          
   1378            /* Trust center significance */
   1379            tcSignificance = *pBuf;
   1380          
   1381            retValue = (byte)ZDP_MgmtPermitJoinReq( &destAddr, duration, tcSignificance, 0);
   1382          
   1383            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1384          }
   1385          
   1386          /***************************************************************************************************
   1387           * @fn      MT_ZdoMgmtNwkUpdateRequest
   1388           *
   1389           * @brief   Handle a Mgmt Nwk Update request.
   1390           *
   1391           * @param   pBuf  - MT message data
   1392           *
   1393           * @return  void
   1394           ***************************************************************************************************/
   1395          void MT_ZdoMgmtNwkUpdateRequest(uint8 *pBuf)
   1396          {
   1397            uint8 cmdId;
   1398            uint8 retValue;
   1399            zAddrType_t destAddr;
   1400            uint32 channelMask;
   1401            uint8 scanDuration, scanCount;
   1402            uint16 nwkManagerAddr;
   1403          
   1404              /* parse header */
   1405            cmdId = pBuf[MT_RPC_POS_CMD1];
   1406            pBuf += MT_RPC_FRAME_HDR_SZ;
   1407          
   1408            /* Destination address */
   1409            destAddr.addr.shortAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1410            pBuf += 2;
   1411          
   1412            /* Destination address mode */
   1413            destAddr.addrMode = *pBuf++;
   1414          
   1415            channelMask = BUILD_UINT32( pBuf[0], pBuf[1], pBuf[2], pBuf[3]);
   1416            pBuf += 4;
   1417          
   1418            /* Scan duration */
   1419            scanDuration = *pBuf++;
   1420          
   1421            /* Scan count */
   1422            scanCount = *pBuf++;
   1423          
   1424            /* NWK manager address */
   1425            nwkManagerAddr = BUILD_UINT16( pBuf[0], pBuf[1] );
   1426          
   1427            /* Send the Management Network Update request */
   1428            retValue = (uint8)ZDP_MgmtNwkUpdateReq( &destAddr, channelMask, scanDuration,
   1429                                                    scanCount, _NIB.nwkUpdateId+1, nwkManagerAddr );
   1430          
   1431            /*
   1432              Since we don't recevied our own broadcast messages, we should
   1433              send a unicast copy of the message to ourself.
   1434            */
   1435            if ( destAddr.addrMode == AddrBroadcast )
   1436            {
   1437              destAddr.addrMode = Addr16Bit;
   1438              destAddr.addr.shortAddr = _NIB.nwkDevAddress;
   1439              retValue = (uint8) ZDP_MgmtNwkUpdateReq( &destAddr, channelMask, scanDuration,
   1440                                                       scanCount, _NIB.nwkUpdateId+1, nwkManagerAddr );
   1441            }
   1442          
   1443            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_ZDO), cmdId, 1, &retValue);
   1444          }
   1445          #endif /* MT_ZDO_MGMT */
   1446          
   1447          /***************************************************************************************************
   1448           * @fn      MT_ZdoStartupFromApp
   1449           *
   1450           * @brief   Handle a Startup from App request.
   1451           *
   1452           * @param   pBuf  - MT message data
   1453           *
   1454           * @return  void
   1455           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1456          void MT_ZdoStartupFromApp(uint8 *pBuf)
   \                     MT_ZdoStartupFromApp:
   1457          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1458            uint8 cmd0, cmd1, retValue;
   1459          
   1460            /* parse header */
   1461            cmd0 = pBuf[MT_RPC_POS_CMD0];
   \   00000A   12....       LCALL   ?Subroutine30 & 0xFFFF
   1462            cmd1 = pBuf[MT_RPC_POS_CMD1];
   1463            pBuf += MT_RPC_FRAME_HDR_SZ;
   1464          
   1465            retValue = ZDOInitDevice(100);
   \                     ??CrossCallReturnLabel_44:
   \   00000D                ; Setup parameters for call to function ZDOInitDevice
   \   00000D   7A64         MOV     R2,#0x64
   \   00000F   7B00         MOV     R3,#0x0
   \   000011   12....       LCALL   ??ZDOInitDevice?relay
   \   000014   12....       LCALL   ?Subroutine24 & 0xFFFF
   1466          
   1467            if (MT_RPC_CMD_SREQ == (cmd0 & MT_RPC_CMD_TYPE_MASK))
   \                     ??CrossCallReturnLabel_37:
   \   000017   700D         JNZ     ??MT_ZdoStartupFromApp_0
   1468            {
   1469              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP|(uint8)MT_RPC_SYS_ZDO), cmd1,1, &retValue);
   \   000019                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000019   AC82         MOV     R4,DPL
   \   00001B   AD83         MOV     R5,DPH
   \   00001D   7B01         MOV     R3,#0x1
   \   00001F   EF           MOV     A,R7
   \   000020   FA           MOV     R2,A
   \   000021   7965         MOV     R1,#0x65
   \   000023   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1470            }
   1471          }
   \                     ??MT_ZdoStartupFromApp_0:
   \   000026                REQUIRE ?Subroutine52
   \   000026                ; // Fall through to label ?Subroutine52

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine52:
   \   000000   7401         MOV     A,#0x1
   \   000002   02....       LJMP    ??Subroutine55_0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine24:
   \   000000   E9           MOV     A,R1
   \   000001   85..82       MOV     DPL,?XSP + 0
   \   000004   85..83       MOV     DPH,?XSP + 1
   \   000007   F0           MOVX    @DPTR,A
   \   000008   74E0         MOV     A,#-0x20
   \   00000A   5E           ANL     A,R6
   \   00000B   6420         XRL     A,#0x20
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine30:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004   A3           INC     DPTR
   \   000005   E0           MOVX    A,@DPTR
   \   000006   FE           MOV     R6,A
   \   000007   8A82         MOV     DPL,R2
   \   000009   8B83         MOV     DPH,R3
   \   00000B   A3           INC     DPTR
   \   00000C   A3           INC     DPTR
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   FF           MOV     R7,A
   \   00000F   22           RET
   1472          
   1473          /*************************************************************************************************
   1474           * @fn      MT_ZdoRegisterForZDOMsg(pBuf);
   1475           *
   1476           * @brief   MT proxy for ZDO_RegisterForZDOMsg.
   1477           *
   1478           * @param   pBuf  - MT message data
   1479           *
   1480           * @return  void
   1481           *************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1482          void MT_ZdoRegisterForZDOMsg(uint8 *pBuf)
   \                     MT_ZdoRegisterForZDOMsg:
   1483          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1484            uint8 cmd0, cmd1, tmp;
   1485            uint16 cId;
   1486          
   1487            /* parse header */
   1488            cmd0 = pBuf[MT_RPC_POS_CMD0];
   \   00000A   12....       LCALL   ?Subroutine3 & 0xFFFF
   1489            cmd1 = pBuf[MT_RPC_POS_CMD1];
   1490            pBuf += MT_RPC_FRAME_HDR_SZ;
   1491          
   1492            cId = BUILD_UINT16(pBuf[0], pBuf[1]);
   1493            tmp = ZDO_RegisterForZDOMsg(MT_TaskID, cId);
   \                     ??CrossCallReturnLabel_9:
   \   00000D   12....       LCALL   ??ZDO_RegisterForZDOMsg?relay
   \   000010   12....       LCALL   ?Subroutine24 & 0xFFFF
   1494          
   1495            if (MT_RPC_CMD_SREQ == (cmd0 & MT_RPC_CMD_TYPE_MASK))
   \                     ??CrossCallReturnLabel_38:
   \   000013   700D         JNZ     ??MT_ZdoRegisterForZDOMsg_0
   1496            {
   1497              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP|(uint8)MT_RPC_SYS_ZDO), cmd1, 1, &tmp);
   \   000015                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000015   AC82         MOV     R4,DPL
   \   000017   AD83         MOV     R5,DPH
   \   000019   7B01         MOV     R3,#0x1
   \   00001B   EF           MOV     A,R7
   \   00001C   FA           MOV     R2,A
   \   00001D   7965         MOV     R1,#0x65
   \   00001F   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1498            }
   1499          }
   \                     ??MT_ZdoRegisterForZDOMsg_0:
   \   000022   80..         SJMP    ?Subroutine52

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_45:
   \   000003   12....       LCALL   ?Subroutine28 & 0xFFFF
   \                     ??CrossCallReturnLabel_43:
   \   000006   FA           MOV     R2,A
   \   000007   E9           MOV     A,R1
   \   000008   FB           MOV     R3,A
   \   000009   90....       MOV     DPTR,#MT_TaskID
   \   00000C   E0           MOVX    A,@DPTR
   \   00000D   F9           MOV     R1,A
   \   00000E   22           RET
   1500          
   1501          /*************************************************************************************************
   1502           * @fn      MT_ZdoRemoveRegisteredCB(pBuf);
   1503           *
   1504           * @brief   MT proxy for ZDO_RemoveRegisteredCB.
   1505           *
   1506           * @param   pBuf  - MT message data
   1507           *
   1508           * @return  void
   1509           *************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1510          void MT_ZdoRemoveRegisteredCB(uint8 *pBuf)
   \                     MT_ZdoRemoveRegisteredCB:
   1511          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1512            uint8 cmd0, cmd1, tmp;
   1513            uint16 cId;
   1514          
   1515            /* parse header */
   1516            cmd0 = pBuf[MT_RPC_POS_CMD0];
   \   00000A   12....       LCALL   ?Subroutine3 & 0xFFFF
   1517            cmd1 = pBuf[MT_RPC_POS_CMD1];
   1518            pBuf += MT_RPC_FRAME_HDR_SZ;
   1519          
   1520            cId = BUILD_UINT16(pBuf[0], pBuf[1]);
   1521            tmp = ZDO_RemoveRegisteredCB(MT_TaskID, cId);
   \                     ??CrossCallReturnLabel_10:
   \   00000D   12....       LCALL   ??ZDO_RemoveRegisteredCB?relay
   \   000010   12....       LCALL   ?Subroutine24 & 0xFFFF
   1522          
   1523            if (MT_RPC_CMD_SREQ == (cmd0 & MT_RPC_CMD_TYPE_MASK))
   \                     ??CrossCallReturnLabel_39:
   \   000013   700D         JNZ     ??MT_ZdoRemoveRegisteredCB_0
   1524            {
   1525              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP|(uint8)MT_RPC_SYS_ZDO), cmd1, 1, &tmp);
   \   000015                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000015   AC82         MOV     R4,DPL
   \   000017   AD83         MOV     R5,DPH
   \   000019   7B01         MOV     R3,#0x1
   \   00001B   EF           MOV     A,R7
   \   00001C   FA           MOV     R2,A
   \   00001D   7965         MOV     R1,#0x65
   \   00001F   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1526            }
   1527          }
   \                     ??MT_ZdoRemoveRegisteredCB_0:
   \   000022   80..         SJMP    ?Subroutine52
   1528          
   1529          #endif /* MT_ZDO_FUNC */
   1530          
   1531          
   1532          /***************************************************************************************************
   1533           * Callback handling function
   1534           ***************************************************************************************************/
   1535          
   1536          #if defined (MT_ZDO_CB_FUNC)
   1537          
   1538          /***************************************************************************************************
   1539           * @fn      MT_ZdoStateChangeCB
   1540           *
   1541           * @brief   Handle state change OSAL message from ZDO.
   1542           *
   1543           * @param   pMsg  - Message data
   1544           *
   1545           * @return  void
   1546           */
   1547          void MT_ZdoStateChangeCB(osal_event_hdr_t *pMsg)
   1548          {
   1549            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO),
   1550                                                 MT_ZDO_STATE_CHANGE_IND, 1, &pMsg->status);
   1551          }
   1552          
   1553          /***************************************************************************************************
   1554           * @fn     MT_ZdoDirectCB()
   1555           *
   1556           * @brief  ZDO direct callback.  Build an MT message directly from the
   1557           *         over-the-air ZDO message.
   1558           *
   1559           * @param  pData - Incoming AF frame.
   1560           *
   1561           * @return  none
   1562           ***************************************************************************************************/
   1563          void MT_ZdoDirectCB( afIncomingMSGPacket_t *pData,  zdoIncomingMsg_t *inMsg )
   1564          {
   1565            uint8 len, *pBuf;
   1566            
   1567            // Is the message an exception or not a response?
   1568            if ( MT_ZdoHandleExceptions( pData, inMsg ) || ( (pData->clusterId & ZDO_RESPONSE_BIT) == 0 ) )
   1569            {
   1570              return;  // Handled somewhere else or not needed.
   1571            }
   1572          
   1573            /* ZDO data starts after one-byte sequence number and the msg buffer length includes
   1574             * two bytes for srcAddr.
   1575             */
   1576            len = pData->cmd.DataLength - 1 + sizeof(uint16);
   1577          
   1578            if (NULL != (pBuf = (uint8 *)osal_mem_alloc(len)))
   1579            {
   1580              uint8 id = MT_ZDO_CID_TO_AREQ_ID(pData->clusterId);
   1581          
   1582              pBuf[0] = LO_UINT16(pData->srcAddr.addr.shortAddr);
   1583              pBuf[1] = HI_UINT16(pData->srcAddr.addr.shortAddr);
   1584          
   1585              /* copy ZDO data, skipping one-byte sequence number */
   1586              osal_memcpy(pBuf+2, (pData->cmd.Data + 1), pData->cmd.DataLength-1);
   1587          
   1588              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO), id, len, pBuf);
   1589              osal_mem_free(pBuf);
   1590            }
   1591          }
   1592          
   1593          /***************************************************************************************************
   1594           * @fn     MT_ZdoHandleExceptions()
   1595           *
   1596           * @brief  Handles all messages that are an expection to the generic MT ZDO Response.
   1597           *
   1598           * @param  pData - Incoming AF frame.
   1599           *
   1600           * @return  TRUE if handled by this function, FALSE if not
   1601           ***************************************************************************************************/
   1602          uint8 MT_ZdoHandleExceptions( afIncomingMSGPacket_t *pData, zdoIncomingMsg_t *inMsg )
   1603          {
   1604            uint8 ret = TRUE;
   1605            ZDO_NwkIEEEAddrResp_t *nwkRsp = NULL;
   1606            ZDO_DeviceAnnce_t devAnnce;
   1607            uint8 doDefault = FALSE;
   1608            
   1609            switch ( inMsg->clusterID )
   1610            {
   1611              case NWK_addr_rsp:
   1612              case IEEE_addr_rsp:
   1613                nwkRsp = ZDO_ParseAddrRsp( inMsg );
   1614                MT_ZdoAddrRspCB( nwkRsp, inMsg->clusterID );
   1615                if ( nwkRsp )
   1616                  osal_mem_free( nwkRsp );
   1617                break;
   1618                
   1619              case Device_annce:
   1620                ZDO_ParseDeviceAnnce( inMsg, &devAnnce );
   1621                MT_ZdoEndDevAnnceCB( &devAnnce, inMsg->srcAddr.addr.shortAddr );
   1622                break;
   1623                
   1624              case Simple_Desc_rsp:
   1625                if ( pData->cmd.DataLength > 5 )
   1626                  ret = FALSE;
   1627                else
   1628                  doDefault = TRUE;        
   1629                break;  
   1630                
   1631              default:
   1632                ret = FALSE;
   1633                break;
   1634            }
   1635            
   1636            if ( doDefault )
   1637            {
   1638              ret = FALSE;
   1639              pData->clusterId = MtZdoDef_rsp;
   1640              pData->cmd.DataLength = 2;
   1641            }
   1642          
   1643            return ( ret );
   1644          }
   1645          
   1646          /***************************************************************************************************
   1647           * @fn      MT_ZdoAddrRspCB
   1648           *
   1649           * @brief   Handle IEEE or nwk address response OSAL message from ZDO.
   1650           *
   1651           * @param   pMsg  - Message data
   1652           *
   1653           * @return  void
   1654           */
   1655          void MT_ZdoAddrRspCB( ZDO_NwkIEEEAddrResp_t *pMsg, uint16 clusterID )
   1656          {
   1657            uint8   listLen, len, *pBuf;
   1658          
   1659            /* both ZDO_NwkAddrResp_t and ZDO_IEEEAddrResp_t must be the same */
   1660          
   1661            /* get length, sanity check length */
   1662            listLen = pMsg->numAssocDevs;
   1663            
   1664            /* calculate msg length */
   1665            len = MT_ZDO_ADDR_RSP_LEN + (listLen * sizeof(uint16));
   1666          
   1667            /* get buffer */
   1668            if (NULL != (pBuf = (uint8 *)osal_mem_alloc(len)))
   1669            {
   1670              uint8 id = MT_ZDO_CID_TO_AREQ_ID(clusterID);
   1671              uint8 *pTmp = pBuf;
   1672          
   1673              *pTmp++ = pMsg->status;
   1674          
   1675              osal_cpyExtAddr(pTmp, pMsg->extAddr);
   1676              pTmp += Z_EXTADDR_LEN;
   1677          
   1678              *pTmp++ = LO_UINT16(pMsg->nwkAddr);
   1679              *pTmp++ = HI_UINT16(pMsg->nwkAddr);
   1680          
   1681              *pTmp++ = pMsg->startIndex;
   1682              *pTmp++ = listLen;
   1683          
   1684              MT_Word2Buf(pTmp, pMsg->devList, listLen);
   1685          
   1686              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO), id, len, pBuf);
   1687              osal_mem_free(pBuf);
   1688            }
   1689          }
   1690          
   1691          /***************************************************************************************************
   1692           * @fn      MT_ZdoEndDevAnnceCB
   1693           *
   1694           * @brief   Handle end device announce OSAL message from ZDO.
   1695           *
   1696           * @param   pMsg  - Message data
   1697           *
   1698           * @return  void
   1699           */
   1700          void MT_ZdoEndDevAnnceCB( ZDO_DeviceAnnce_t *pMsg, uint16 srcAddr )
   1701          {
   1702            uint8 *pBuf;
   1703          
   1704            if (NULL != (pBuf = (uint8 *)osal_mem_alloc(MT_ZDO_END_DEVICE_ANNCE_IND_LEN)))
   1705            {
   1706              uint8 *pTmp = pBuf;
   1707          
   1708              *pTmp++ = LO_UINT16(srcAddr);
   1709              *pTmp++ = HI_UINT16(srcAddr);
   1710          
   1711              *pTmp++ = LO_UINT16(pMsg->nwkAddr);
   1712              *pTmp++ = HI_UINT16(pMsg->nwkAddr);
   1713          
   1714              osal_cpyExtAddr(pTmp, pMsg->extAddr);
   1715              pTmp += Z_EXTADDR_LEN;
   1716          
   1717              *pTmp = pMsg->capabilities;
   1718          
   1719              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO), 
   1720                                                   MT_ZDO_END_DEVICE_ANNCE_IND, 
   1721                                                   MT_ZDO_END_DEVICE_ANNCE_IND_LEN, pBuf);
   1722              osal_mem_free(pBuf);
   1723            }
   1724          }
   1725          
   1726          /***************************************************************************************************
   1727           * @fn      MT_ZdoSrcRtgCB
   1728           *
   1729           * @brief   Handle Src Route from ZDO.
   1730           *
   1731           * @param   pStr  - pointer to the data structure for the src route
   1732           *
   1733           * @return  void* 
   1734           */
   1735          void* MT_ZdoSrcRtgCB( void *pStr )
   1736          {
   1737            uint8 len, *pBuf;
   1738            zdoSrcRtg_t *pSrcRtg = pStr;
   1739            
   1740            // srcAddr (2) + relayCnt (1) + relayList( relaycnt * 2 )
   1741            len = 2 + 1 + pSrcRtg->relayCnt * sizeof(uint16);
   1742          
   1743            if (NULL != (pBuf = (uint8 *)osal_mem_alloc(len)))
   1744            {
   1745              uint8 idx, *pTmp = pBuf;
   1746              uint16 *pRelay;
   1747          
   1748              // Packet payload
   1749              *pTmp++ = LO_UINT16(pSrcRtg->srcAddr);
   1750              *pTmp++ = HI_UINT16(pSrcRtg->srcAddr);
   1751              *pTmp++ = pSrcRtg->relayCnt;
   1752              
   1753              // Relay List
   1754              if( ( pRelay = pSrcRtg->pRelayList ) != NULL )
   1755              {
   1756                for( idx = 0; idx < pSrcRtg->relayCnt; idx ++ )
   1757                {
   1758                  *pTmp++ = LO_UINT16(*pRelay);
   1759                  *pTmp++ = HI_UINT16(*pRelay);
   1760                  pRelay++;
   1761                }
   1762              }
   1763              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO),
   1764                                                   MT_ZDO_SRC_RTG_IND, len, pBuf);
   1765              osal_mem_free(pBuf);
   1766            }
   1767            
   1768            return NULL;
   1769          }
   1770          #endif // MT_ZDO_CB_FUNC
   1771          
   1772          /***************************************************************************************************
   1773           * @fn      MT_ZdoSendMsgCB
   1774           *
   1775           * @brief   Proxy the ZDO_SendMsgCBs one message at a time.
   1776           *
   1777           * @param   pMsg  - Message data
   1778           *
   1779           * @return  void
   1780           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1781          void MT_ZdoSendMsgCB(zdoIncomingMsg_t *pMsg)
   \                     MT_ZdoSendMsgCB:
   1782          {
   \   000000   74ED         MOV     A,#-0x13
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 19
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
   1783            uint8 len = pMsg->asduLen + 9;
   \   000009   EE           MOV     A,R6
   \   00000A   2410         ADD     A,#0x10
   \   00000C   F8           MOV     R0,A
   \   00000D   EF           MOV     A,R7
   \   00000E   3400         ADDC    A,#0x0
   \   000010   F9           MOV     R1,A
   \   000011   88..         MOV     ?V0 + 2,R0
   \   000013   89..         MOV     ?V0 + 3,R1
   \   000015   8882         MOV     DPL,R0
   \   000017   F583         MOV     DPH,A
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   2409         ADD     A,#0x9
   \   00001C   F5..         MOV     ?V0 + 4,A
   1784            uint8 *pBuf = (uint8 *)osal_mem_alloc(len);
   \   00001E                ; Setup parameters for call to function osal_mem_alloc
   \   00001E   FA           MOV     R2,A
   \   00001F   7B00         MOV     R3,#0x0
   \   000021   12....       LCALL   ??osal_mem_alloc?relay
   \   000024   8A..         MOV     ?V0 + 0,R2
   \   000026   8B..         MOV     ?V0 + 1,R3
   1785          
   1786            if (pBuf != NULL)
   \   000028   EA           MOV     A,R2
   \   000029   7001         JNZ     ??MT_ZdoSendMsgCB_0
   \   00002B   EB           MOV     A,R3
   \                     ??MT_ZdoSendMsgCB_0:
   \   00002C   6079         JZ      ??MT_ZdoSendMsgCB_1
   1787            {
   1788              uint8 *pTmp = pBuf;
   1789          
   1790              // Assuming exclusive use of network short addresses.
   1791              *pTmp++ = LO_UINT16(pMsg->srcAddr.addr.shortAddr);
   \   00002E   EE           MOV     A,R6
   \   00002F   2402         ADD     A,#0x2
   \   000031   F8           MOV     R0,A
   \   000032   EF           MOV     A,R7
   \   000033   3400         ADDC    A,#0x0
   \   000035   F9           MOV     R1,A
   \   000036   8882         MOV     DPL,R0
   \   000038   8983         MOV     DPH,R1
   \   00003A   E0           MOVX    A,@DPTR
   \   00003B   8A82         MOV     DPL,R2
   \   00003D   8B83         MOV     DPH,R3
   \   00003F   F0           MOVX    @DPTR,A
   \   000040   A3           INC     DPTR
   \   000041   AA82         MOV     R2,DPL
   \   000043   12....       LCALL   ??Subroutine64_0 & 0xFFFF
   1792              *pTmp++ = HI_UINT16(pMsg->srcAddr.addr.shortAddr);
   1793              *pTmp++ = pMsg->wasBroadcast;
   \                     ??CrossCallReturnLabel_112:
   \   000046   240B         ADD     A,#0xb
   \   000048   F582         MOV     DPL,A
   \   00004A   EF           MOV     A,R7
   \   00004B   3400         ADDC    A,#0x0
   \   00004D   F583         MOV     DPH,A
   \   00004F   12....       LCALL   ??Subroutine65_0 & 0xFFFF
   1794              *pTmp++ = LO_UINT16(pMsg->clusterID);
   \                     ??CrossCallReturnLabel_113:
   \   000052   240C         ADD     A,#0xc
   \   000054   12....       LCALL   ?Subroutine2 & 0xFFFF
   1795              *pTmp++ = HI_UINT16(pMsg->clusterID);
   1796              *pTmp++ = pMsg->SecurityUse;
   \                     ??CrossCallReturnLabel_110:
   \   000057   240E         ADD     A,#0xe
   \   000059   F582         MOV     DPL,A
   \   00005B   EF           MOV     A,R7
   \   00005C   3400         ADDC    A,#0x0
   \   00005E   F583         MOV     DPH,A
   \   000060   12....       LCALL   ??Subroutine65_0 & 0xFFFF
   1797              *pTmp++ = pMsg->TransSeq;
   \                     ??CrossCallReturnLabel_114:
   \   000063   240F         ADD     A,#0xf
   \   000065   F582         MOV     DPL,A
   \   000067   EF           MOV     A,R7
   \   000068   3400         ADDC    A,#0x0
   \   00006A   F583         MOV     DPH,A
   \   00006C   12....       LCALL   ??Subroutine65_0 & 0xFFFF
   1798              // Skipping asduLen since it can be deduced from the RPC packet length.
   1799              *pTmp++ = LO_UINT16(pMsg->macDestAddr);
   \                     ??CrossCallReturnLabel_115:
   \   00006F   2411         ADD     A,#0x11
   \   000071   12....       LCALL   ?Subroutine2 & 0xFFFF
   1800              *pTmp++ = HI_UINT16(pMsg->macDestAddr);
   1801              (void)osal_memcpy(pTmp, pMsg->asdu, pMsg->asduLen);
   \                     ??CrossCallReturnLabel_111:
   \   000074   2413         ADD     A,#0x13
   \   000076   F582         MOV     DPL,A
   \   000078   EF           MOV     A,R7
   \   000079   3400         ADDC    A,#0x0
   \   00007B   F583         MOV     DPH,A
   \   00007D   E0           MOVX    A,@DPTR
   \   00007E   F5..         MOV     ?V0 + 8,A
   \   000080   A3           INC     DPTR
   \   000081   E0           MOVX    A,@DPTR
   \   000082   F5..         MOV     ?V0 + 9,A
   \   000084   75..00       MOV     ?V0 + 10,#0x0
   \   000087   78..         MOV     R0,#?V0 + 8
   \   000089   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00008C   85..82       MOV     DPL,?V0 + 2
   \   00008F   85..83       MOV     DPH,?V0 + 3
   \   000092   E0           MOVX    A,@DPTR
   \   000093   FC           MOV     R4,A
   \   000094   12....       LCALL   ?Subroutine27 & 0xFFFF
   \                     ??CrossCallReturnLabel_107:
   \   000097   12....       LCALL   ?DEALLOC_XSTACK8
   1802          
   1803              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_ZDO),
   1804                                                   MT_ZDO_MSG_CB_INCOMING, len, pBuf);
   \   00009A                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   00009A   AC..         MOV     R4,?V0 + 0
   \   00009C   AD..         MOV     R5,?V0 + 1
   \   00009E   AB..         MOV     R3,?V0 + 4
   \   0000A0   7AFF         MOV     R2,#-0x1
   \   0000A2   7945         MOV     R1,#0x45
   \   0000A4   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
   1805            }
   1806          }
   \                     ??MT_ZdoSendMsgCB_1:
   \   0000A7   7F0B         MOV     R7,#0xb
   \   0000A9   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   F8           MOV     R0,A
   \   000001   EF           MOV     A,R7
   \   000002   3400         ADDC    A,#0x0
   \   000004   F9           MOV     R1,A
   \   000005   8882         MOV     DPL,R0
   \   000007   8983         MOV     DPH,R1
   \   000009   12....       LCALL   ?Subroutine32 & 0xFFFF
   \                     ??CrossCallReturnLabel_116:
   \   00000C                REQUIRE ??Subroutine64_0
   \   00000C                ; // Fall through to label ??Subroutine64_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine64_0:
   \   000000   AB83         MOV     R3,DPH
   \   000002   8882         MOV     DPL,R0
   \   000004   8983         MOV     DPH,R1
   \   000006   A3           INC     DPTR
   \   000007                REQUIRE ??Subroutine65_0
   \   000007                ; // Fall through to label ??Subroutine65_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine65_0:
   \   000000   12....       LCALL   ?Subroutine32 & 0xFFFF
   \                     ??CrossCallReturnLabel_117:
   \   000003   AB83         MOV     R3,DPH
   \   000005                ; Setup parameters for call to function osal_memcpy
   \   000005   EE           MOV     A,R6
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine32:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   8A82         MOV     DPL,R2
   \   000003   8B83         MOV     DPH,R3
   \   000005   F0           MOVX    @DPTR,A
   \   000006   A3           INC     DPTR
   \   000007   0A           INC     R2
   \   000008   22           RET

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoInit?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoInit

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoCommandProcessing?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoCommandProcessing

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoNWKAddressRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoNWKAddressRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoIEEEAddrRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoIEEEAddrRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoNodeDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoNodeDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoPowerDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoPowerDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoSimpleDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoSimpleDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoActiveEpRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoActiveEpRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoMatchDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoMatchDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoComplexDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoComplexDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoUserDescRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoUserDescRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoEndDevAnnce?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoEndDevAnnce

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoUserDescSet?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoUserDescSet

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoServiceDiscRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoServiceDiscRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoEndDevBindRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoEndDevBindRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoBindRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoBindRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoUnbindRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoUnbindRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoSetLinkKey?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoSetLinkKey

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoRemoveLinkKey?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoRemoveLinkKey

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoGetLinkKey?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoGetLinkKey

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoStartupFromApp?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoStartupFromApp

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoRegisterForZDOMsg?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoRegisterForZDOMsg

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoRemoveRegisteredCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoRemoveRegisteredCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_ZdoSendMsgCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_ZdoSendMsgCB
   1807          
   1808          #endif   /*ZDO Command Processing in MT*/
   1809          /***************************************************************************************************
   1810          ***************************************************************************************************/

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     MT_ZdoActiveEpRequest              1      0     29
       -> ZDP_NWKAddrOfInterestReq      0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoBindRequest                  1      0     52
       -> sAddrExtCpy                   0      0     70
       -> ZDP_BindUnbindReq             0      0     86
       -> MT_BuildAndSendZToolResponse
                                        0      0     70
     MT_ZdoCommandProcessing            0      0      9
       -> MT_ZdoNWKAddressRequest       0      0     18
       -> MT_ZdoIEEEAddrRequest         0      0     18
       -> MT_ZdoNodeDescRequest         0      0     18
       -> MT_ZdoPowerDescRequest        0      0     18
       -> MT_ZdoSimpleDescRequest       0      0     18
       -> MT_ZdoActiveEpRequest         0      0     18
       -> MT_ZdoMatchDescRequest        0      0     18
       -> MT_ZdoComplexDescRequest      0      0     18
       -> MT_ZdoUserDescRequest         0      0     18
       -> MT_ZdoEndDevAnnce             0      0     18
       -> MT_ZdoUserDescSet             0      0     18
       -> MT_ZdoServiceDiscRequest      0      0     18
       -> MT_ZdoEndDevBindRequest       0      0     18
       -> MT_ZdoBindRequest             0      0     18
       -> MT_ZdoUnbindRequest           0      0     18
       -> MT_ZdoSetLinkKey              0      0     18
       -> MT_ZdoRemoveLinkKey           0      0     18
       -> MT_ZdoGetLinkKey              0      0     18
       -> MT_ZdoStartupFromApp          0      0     18
       -> MT_ZdoRegisterForZDOMsg       0      0     18
       -> MT_ZdoRemoveRegisteredCB      0      0     18
     MT_ZdoComplexDescRequest           1      0     29
       -> ZDP_NWKAddrOfInterestReq      0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoEndDevAnnce                  1      0     20
       -> ZDP_DeviceAnnce               0      0     22
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoEndDevBindRequest            1      0    104
       -> ZDP_EndDeviceBindReq          0      0    190
       -> MT_BuildAndSendZToolResponse
                                        0      0    172
     MT_ZdoGetLinkKey                   1      0     29
       -> APSME_LinkKeyDataGet          0      0     34
       -> osal_mem_alloc                0      0     34
       -> osal_memset                   0      0     34
       -> MT_BuildAndSendZToolResponse
                                        0      0     34
       -> osal_memcpy                   0      0     40
       -> osal_memcpy                   0      0     40
     MT_ZdoIEEEAddrRequest              1      0     19
       -> ZDP_IEEEAddrReq               0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoInit                         0      0      0
     MT_ZdoMatchDescRequest             1      0    106
       -> ZDP_MatchDescReq              0      0    194
       -> MT_BuildAndSendZToolResponse
                                        0      0    178
     MT_ZdoNWKAddressRequest            1      0     19
       -> ZDP_NwkAddrReq                0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoNodeDescRequest              1      0     29
       -> ZDP_NWKAddrOfInterestReq      0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoPowerDescRequest             1      0     29
       -> ZDP_NWKAddrOfInterestReq      0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoRegisterForZDOMsg            1      0     19
       -> ZDO_RegisterForZDOMsg         0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoRemoveLinkKey                1      0     19
       -> ZDSecMgrDeviceRemoveByExtAddr
                                        0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoRemoveRegisteredCB           1      0     19
       -> ZDO_RemoveRegisteredCB        0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoSendMsgCB                    1      0     22
       -> osal_mem_alloc                0      0     38
       -> osal_memcpy                   0      0     44
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoServiceDiscRequest           1      0     19
       -> ZDP_ServerDiscReq             0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoSetLinkKey                   1      0     24
       -> ZDSecMgrAddLinkKey            0      0     30
       -> MT_BuildAndSendZToolResponse
                                        0      0     26
     MT_ZdoSimpleDescRequest            1      0     29
       -> ZDP_SimpleDescReq             0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoStartupFromApp               1      0     19
       -> ZDOInitDevice                 0      0     20
       -> MT_BuildAndSendZToolResponse
                                        0      0     20
     MT_ZdoUnbindRequest                1      0     52
       -> sAddrExtCpy                   0      0     70
       -> ZDP_BindUnbindReq             0      0     86
       -> MT_BuildAndSendZToolResponse
                                        0      0     70
     MT_ZdoUserDescRequest              1      0     29
       -> ZDP_NWKAddrOfInterestReq      0      0     40
       -> MT_BuildAndSendZToolResponse
                                        0      0     38
     MT_ZdoUserDescSet                  1      0     51
       -> osal_memcpy                   0      0     84
       -> ZDP_UserDescSet               0      0     82
       -> MT_BuildAndSendZToolResponse
                                        0      0     78


   Segment part sizes:

     Function/Label                   Bytes
     --------------                   -----
     _zdoCallbackSub                     4
     MT_ZdoInit                          3
     MT_ZdoCommandProcessing           195
     ??Subroutine56_0                    5
     MT_ZdoNWKAddressRequest            41
     ?Subroutine50                       5
     ??Subroutine55_0                    3
     ?Subroutine20                       6
     ?Subroutine12                      16
     ?Subroutine46                       6
     ?Subroutine42                      15
     ?Subroutine34                       8
     MT_ZdoIEEEAddrRequest              21
     ?Subroutine40                       9
     ?Subroutine5                       19
     ?Subroutine41                       1
     ??Subroutine62_0                    2
     ?Subroutine45                       7
     ?Subroutine39                       6
     ?Subroutine28                       9
     ??Subroutine53_0                    6
     ??Subroutine54_0                    6
     MT_ZdoNodeDescRequest              37
     ?Subroutine26                      10
     ?Subroutine19                       6
     ?Subroutine15                       9
     ?Subroutine33                       4
     ??Subroutine57_0                    5
     ?Subroutine1                       12
     ??Subroutine59_0                    6
     ?Subroutine35                       5
     ?Subroutine29                      12
     ?Subroutine43                       3
     MT_ZdoPowerDescRequest             32
     ?Subroutine7                        7
     MT_ZdoSimpleDescRequest            54
     MT_ZdoActiveEpRequest              33
     MT_ZdoMatchDescRequest            221
     ?Subroutine47                       8
     ?Subroutine18                       9
     ??Subroutine58_0                    6
     ?Subroutine8                       16
     ?Subroutine44                       8
     ?Subroutine0                        8
     ?Subroutine38                      11
     ?Subroutine16                       9
     ?Subroutine6                       16
     ?Subroutine36                       8
     MT_ZdoComplexDescRequest           33
     MT_ZdoUserDescRequest              33
     MT_ZdoEndDevAnnce                  82
     ?Subroutine51                       6
     ?Subroutine21                       6
     MT_ZdoUserDescSet                 160
     ?Subroutine48                       8
     ?Subroutine17                       5
     ??Subroutine60_0                   10
     ??Subroutine63_0                    6
     MT_ZdoServiceDiscRequest           27
     ?Subroutine11                       4
     MT_ZdoEndDevBindRequest           249
     ?Subroutine25                      10
     ?Subroutine9                       19
     ??Subroutine61_0                    8
     MT_ZdoBindRequest                 129
     ?Subroutine49                      13
     ?Subroutine23                      14
     ?Subroutine22                       6
     ?Subroutine14                       7
     ?Subroutine13                      14
     ?Subroutine31                       7
     ?Subroutine10                      26
     ?Subroutine4                       53
     ?Subroutine37                       9
     MT_ZdoUnbindRequest               132
     MT_ZdoSetLinkKey                   50
     MT_ZdoRemoveLinkKey                19
     MT_ZdoGetLinkKey                  191
     ?Subroutine27                       2
     MT_ZdoStartupFromApp               38
     ?Subroutine52                       5
     ?Subroutine24                      14
     ?Subroutine30                      16
     MT_ZdoRegisterForZDOMsg            36
     ?Subroutine3                       15
     MT_ZdoRemoveRegisteredCB           36
     MT_ZdoSendMsgCB                   172
     ?Subroutine2                       12
     ??Subroutine64_0                    7
     ??Subroutine65_0                    7
     ?Subroutine32                       9
     ??MT_ZdoInit?relay                  6
     ??MT_ZdoCommandProcessing?relay     6
     ??MT_ZdoNWKAddressRequest?relay     6
     ??MT_ZdoIEEEAddrRequest?relay       6
     ??MT_ZdoNodeDescRequest?relay       6
     ??MT_ZdoPowerDescRequest?relay      6
     ??MT_ZdoSimpleDescRequest?relay     6
     ??MT_ZdoActiveEpRequest?relay       6
     ??MT_ZdoMatchDescRequest?relay      6
     ??MT_ZdoComplexDescRequest?relay    6
     ??MT_ZdoUserDescRequest?relay       6
     ??MT_ZdoEndDevAnnce?relay           6
     ??MT_ZdoUserDescSet?relay           6
     ??MT_ZdoServiceDiscRequest?relay    6
     ??MT_ZdoEndDevBindRequest?relay     6
     ??MT_ZdoBindRequest?relay           6
     ??MT_ZdoUnbindRequest?relay         6
     ??MT_ZdoSetLinkKey?relay            6
     ??MT_ZdoRemoveLinkKey?relay         6
     ??MT_ZdoGetLinkKey?relay            6
     ??MT_ZdoStartupFromApp?relay        6
     ??MT_ZdoRegisterForZDOMsg?relay     6
     ??MT_ZdoRemoveRegisteredCB?relay    6
     ??MT_ZdoSendMsgCB?relay             6

 
 2 649 bytes in segment BANKED_CODE
   144 bytes in segment BANK_RELAYS
     4 bytes in segment XDATA_Z
 
 2 793 bytes of CODE  memory
     4 bytes of XDATA memory

Errors: none
Warnings: none
